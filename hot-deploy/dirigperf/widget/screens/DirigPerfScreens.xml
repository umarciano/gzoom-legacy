<?xml version="1.0" encoding="UTF-8"?>
<screens xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
        xsi:noNamespaceSchemaLocation="http://ofbiz.apache.org/dtds/widget-screen.xsd">

    <screen name="WorkEffortRootViewScreen">
        <section>
            <actions>
                <set field="extraParams" value="loadTreeView=Y&amp;specialized=Y&amp;statusIdParameters=${parameters.statusIdParameters}&amp;rootTree=${parameters.rootTree}&amp;rootInqyTree=${parameters.rootInqyTree}"/>
                <set field="entityName" value="WorkEffortView"/>
            </actions>
            <widgets>
                <include-screen name="ManagementFormScreen" location="component://base/widget/ManagementScreens.xml"/>
                <section>
                    <condition>
                        <if-compare operator="equals" value="Y" field="parameters.insertMode"/>
                    </condition>
                    <actions>
                        <set field="layoutSettings.javaScriptBlocks[]" value="component://emplperf/webapp/emplperf/ftl/workEffortRootView-extension.js.ftl"/>
                    </actions>
                    <widgets>
                        <include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml"/>
                    </widgets>
                </section>
            </widgets>
        </section>
    </screen>
	<screen name="WorkEffortRootExecViewSearchFormScreen">
		<section>
			<actions>
				<set field="currentStatusId_value" value="_EXEC"/>
			</actions>
			<widgets>
				<include-screen name="WorkEffortRootViewSearchFormScreen"/>
			</widgets>
		</section>
	</screen>    
	<screen name="WorkEffortRootMonitViewSearchFormScreen">
		<section>
			<actions>
				<set field="currentStatusId_value" value="_MONIT"/>
			</actions>
			<widgets>
				<include-screen name="WorkEffortRootViewSearchFormScreen"/>
			</widgets>
		</section>
	</screen>    
	<screen name="WorkEffortRootViewSearchFormScreen">
		<section>
			<actions>
        		<set field="orgUnitDisplayField" value="${bsh: &quot;Y&quot;.equals(context.get(&quot;localeSecondarySet&quot;)) ? &quot;partyNameLang&quot; : &quot;partyName&quot;}"/>
        		<set field="workEffortTypeDisplayField" value="${bsh: &quot;Y&quot;.equals(context.get(&quot;localeSecondarySet&quot;)) ? &quot;descriptionLang&quot; : &quot;description&quot;}"/>
        		<set field="currentStatusDisplayField" value="${bsh: &quot;Y&quot;.equals(context.get(&quot;localeSecondarySet&quot;)) ? &quot;descriptionLang&quot; : &quot;description&quot;}"/>
			
<!-- 				<set field="currentStatusId_value" value="${currentStatusId_value}" default-value="_PLAN"/> -->
<!-- 				<set field="extraParams" value="statusIdParameters=${currentStatusId_value}&amp;rootTree=N&amp;rootInqyTree=N"/> -->
				<set field="extraParams" value="rootTree=N&amp;rootInqyTree=N"/>
				<!-- devo caricate il JS per la gestione del droplist dei soggetti con ruolo e senza ruolo -->
				<set field="currentStatusId_value" value="${currentStatusId_value}" default-value="_PLAN"/>
				<set field="searchPanelArea" value="${searchPanelArea}" default-value="simple_search"/>
				<set field="searchTarget" value="searchResultContainerOnly"/>
                <set field="searchAreaId" value="common-container"/>                
				<set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/workEffortRootViewSearch-extension.js.ftl"/>
			</actions>
			<widgets>
				<include-screen name="SearchFormScreen" location="component://base/widget/SearchScreens.xml"/>
				<include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml"/>
			</widgets>
		</section>
	</screen>
    
    <screen name="WorkEffortRootViewContextManagementFormScreen">
        <section>
            <actions>
                <set field="addInsertExtraParams" value="statusIdParameters=${parameters.statusIdParameters}&amp;specialized=Y"/>
                
                <set field="addExtraParams" value="weContextId=${parameters.weContextId}&amp;statusIdParameters=${parameters.statusIdParameters}&amp;specialized=Y&amp;weIsTemplate=${parameters.weIsTemplate}"/>
                
                <set field="weIsTemplate" value="${weIsTemplate}" default-value="${parameters.weIsTemplate}"/>
                <set field="statusIdParameters" value="${statusIdParameters}" default-value="${parameters.statusIdParameters}"/>
            </actions>
            <widgets>
                <include-screen name="WorkEffortRootViewContextManagementFormScreen" location="component://workeffortext/widget/screens/WorkeffortExtScreens.xml"/>
            </widgets>
        </section>
    </screen>
    
    <screen name="WorkEffortRootViewContextManagementMultiFormScreen">
        <section>
            <actions>
                <set field="addInsertExtraParams" value="weContextId=${parameters.weContextId}&amp;statusIdParameters=${parameters.statusIdParameters}&amp;specialized=Y&amp;weIsTemplate=${parameters.weIsTemplate}"/>
                
                <set field="addExtraParams" value="weContextId=${parameters.weContextId}&amp;statusIdParameters=${parameters.statusIdParameters}&amp;specialized=Y&amp;weIsTemplate=${parameters.weIsTemplate}"/>
                
                <set field="weIsTemplate" value="${weIsTemplate}" default-value="${parameters.weIsTemplate}"/>
                <set field="statusIdParameters" value="${statusIdParameters}" default-value="${parameters.statusIdParameters}"/>
                <set field="weContextId" value="${weContextId}" default-value="${parameters.weContextId}"/>
            </actions>
            <widgets>
                <include-screen name="WorkEffortRootViewContextManagementMultiFormScreen" location="component://workeffortext/widget/screens/WorkeffortExtScreens.xml"/>
            </widgets>
        </section>
    </screen>
    
    <screen name="WorkEffortRootViewManagementInnerScreen">
        <section>
            <condition>               
                <if-compare operator="equals" value="Y" field="loadTreeView"/>               
            </condition>        
            <actions>
                <set field="constField" value="specialized;${parameters.specialized}|statusIdParameters;${parameters.statusIdParameters}"/>
            </actions>
            <widgets>
                <include-screen name="WorkEffortRootViewManagementInnerScreen" location="component://workeffortext/widget/screens/WorkeffortExtScreens.xml"/>
            </widgets>
            <fail-widgets>
                <include-screen name="WorkEffortRootViewManagementInnerScreen" location="component://workeffortext/widget/screens/WorkeffortExtScreens.xml"/>
            </fail-widgets>
        </section>
    </screen>
    
    <screen name="WorkEffortRootInqyViewManagementInnerScreen">
        <section>
            <actions>
            	<set field="loadTreeView" from-field="parameters.loadTreeView"/>
                <set field="rootInqyTree" from-field="parameters.rootInqyTree"/>                
            </actions>
            <widgets>
                <section>
                    <condition>
                    	<and>
                    		<if-compare field="loadTreeView" operator="equals" value="Y"/>
<!--                    		<if-compare field="rootInqyTree" operator="equals" value="Y"/>                    		-->
                    	</and>                        
                    </condition>
                    <actions>
                        <set field="parameters.disableDragAndDrop" value="Y"/>
                    </actions>
                    <widgets>
                        <include-screen name="WorkEffortRootViewManagementInnerScreen"/>
                    </widgets>
                    <fail-widgets>
                        <include-screen name="WorkEffortRootViewManagementInnerScreen"/>
                    </fail-widgets>
                </section>
            </widgets>
        </section>
    </screen>
        
    <!-- ============================================================================
    Screens activity 2302 - 2314 : Interrogazione risultati obiettivi (WorkEffortAchieveView)
    =============================================================================== -->
    <screen name="WorkEffortAchieveViewSearchScreen">
        <section>
        	<actions>
        		<script location="component://dirigperf/script/com/mapsengineering/dirigperf/achieveViewPermissionCheck.groovy" />
        	</actions>
        	<widgets>
				<include-screen name="SearchFormScreen" location="component://base/widget/SearchScreens.xml"/>        	
        	</widgets>
        </section>
    </screen>
    
    <screen name="WorkEffortAnalysisManagementScreen">
         <section>
            <actions>
                <service service-name="getWorkEffortAnalysisPerContext">
                    <field-map field-name="userLogin" from-field="context.userLogin"/>
                    <field-map field-name="contextId" value="CTX_DI"/>
                </service>
                 <!-- Inserisco il tachimetro alla lista! -->
                <script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/workEffortAnalysisImage.groovy"/>
            </actions>
            <widgets>
                <include-screen name="ManagementFormScreen" location="component://base/widget/ManagementScreens.xml"/>
            </widgets>
        </section>
    </screen>
    
    <screen name="DirigPerfSearchFormScreen">
        <section>
            <actions>
                <set field="extraParams" value="parentTypeId=CTX_DI"/>
            </actions>
            <widgets>
                <include-screen name="SearchFormScreen" location="component://base/widget/SearchScreens.xml"/>
            </widgets>
        </section>
    </screen>
    
    <screen name="WorkEffortTypePeriodManagementScreen">
        <section>
            <actions>
 	            <set field="childManagementFormListName" value="WorkEffortTypePeriodIconManagementMultiForm"/>
                <set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/WorkEffortTypePeriod-Status-multi-management.js.ftl"/>
            </actions>
            <widgets>
                <include-screen name="ManagementListFormScreen" location="component://base/widget/ManagementScreens.xml"/>
                <include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml"/>
            </widgets>
        </section>
     </screen>
     
     <screen name="WorkEffortViewSendMailManagementScreen">
        <section>
            <actions>
           		<set field="communicationFormName" value="WorkEffortNewEmailExt"/>
                <set field="communicationFormLocation" value="component://workeffortext/widget/forms/CommunicationForms.xml"/>
                <script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getWorkEffortResponsibleByRole.groovy"/>
     		    <set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/WorkEffortViewSendMail-management.js.ftl"/>
            </actions>
			<widgets>
			    <include-screen name="ManagementListFormScreen" location="component://base/widget/ManagementScreens.xml"/>
			    <include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml"/>
            </widgets>
        </section>
    </screen>
    
    <screen name="DirigPerfSearchFormScreen">
        <section>
            <actions>
                <set field="extraParams" value="parentTypeId=CTX_DI"/>
            </actions>
            <widgets>
                <include-screen name="SearchFormScreen" location="component://base/widget/SearchScreens.xml"/>
            </widgets>
        </section>
    </screen>
    
    <screen name="WorkEffortTypePeriodViewManagementScreen">
        <section>
            <actions>
	            <set field="childManagementFormListName" value="WorkEffortTypePeriodViewIconManagementMultiForm"/>
                <set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/WorkEffortTypePeriod-Status-multi-management.js.ftl"/>
            </actions>
            <widgets>
                <include-screen name="ManagementListFormScreen" location="component://base/widget/ManagementScreens.xml"/>
                <include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml"/>
            </widgets>
        </section>
     </screen>
     
     <screen name="WorkEffortViewSendMailManagementScreen">
        <section>
            <actions>
           		<set field="communicationFormName" value="WorkEffortNewEmailExt"/>
                <set field="communicationFormLocation" value="component://workeffortext/widget/forms/CommunicationForms.xml"/>
                <script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getWorkEffortResponsibleByRole.groovy"/>
     		    <set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/WorkEffortViewSendMail-management.js.ftl"/>
            </actions>
			<widgets>
			    <include-screen name="ManagementListFormScreen" location="component://base/widget/ManagementScreens.xml"/>
			    <include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml"/>
            </widgets>
        </section>
    </screen>

    <screen name="ExternalWorkEffortViewPageScreen">
        <section>
            <actions>
                <set field="planMenuItemId" value="GP_MENU_00092" />
                <set field="execMenuItemId" value="GP_MENU_00101" />
                <set field="monitMenuItemId" value="GP_MENU_00096" />
                <set field="inqyMenuItemId" value="GP_MENU_00104" />

                <set field="constFields" value="specialized;Y" />

                <set field="parameters.specialized" value="Y" />

                <set field="commonScreensLocation" value="component://dirigperf/widget/screens/CommonScreens.xml" />
            </actions>
            <widgets>
                <include-screen name="ExternalWorkEffortViewPageScreen" location="component://workeffortext/widget/screens/WorkeffortExtScreens.xml"/>
            </widgets>
        </section>
    </screen>
    <screen name="ExternalWorkEffortViewContainerOnlyScreen">
        <section>
            <actions>
                <set field="planMenuItemId" value="GP_MENU_00092" />
                <set field="execMenuItemId" value="GP_MENU_00096" />
                <set field="monitMenuItemId" value="GP_MENU_00101" />
                <set field="inqyMenuItemId" value="GP_MENU_00104" />

                <set field="constFields" value="specialized;Y" />

                <set field="parameters.specialized" value="Y" />
            </actions>
            <widgets>
                <include-screen name="ExternalWorkEffortViewContainerOnlyScreen" location="component://workeffortext/widget/screens/WorkeffortExtScreens.xml"/>
            </widgets>
        </section>
    </screen>
    
    <!-- Stampa -->
    <screen name="DirigPerfPrintBirt">
		<section>
			<actions>
				<set field="printBirtScreenLocation" value="component://dirigperf/widget/screens/DirigPerfScreens.xml" />
				<set field="printBirtScreenName" value="DirigPerfInnerPrintBirt" />

				<set field="parameters.repContextContentId" value="WE_PRINT" />
			</actions>
			<widgets>
				<include-screen name="LoadPrintBirtFormWrapper" location="component://base/widget/CommonScreens.xml" />
			</widgets>
		</section>
	</screen>
	
	<screen name="DirigPerfInnerPrintBirt">
		<section>
			<actions>
				<set field="extraFieldContainerScreenLocation[]" value="component://dirigperf/widget/screens/DirigPerfScreens.xml" />
				<set field="extraFieldContainerScreenName[]" value="DirigPerfExtraParametersPrintBirt" />

				<set field="showSelectLabel" value="Y" />
			</actions>
			<widgets>
				<include-screen name="ExtraParametersLoadPrintBirt" location="component://base/widget/CommonScreens.xml" />
			</widgets>
		</section>
	</screen>
	
	<screen name="DirigPerfExtraParametersPrintBirt">
		<section>
			<widgets>
				<platform-specific>
					<html>
						<html-template location="component://dirigperf/webapp/dirigperf/ftl/DirigPerfPrintBirtExtraParameters.ftl" />
					</html>
				</platform-specific>
			</widgets>
		</section>
	</screen>
	
    <screen name="DirigPerfInsertFromTemplateScreen">
        <section>
            <actions>
                <set field="executePaginationTarget" value="dirigPerfInsertFromTemplateAsync"/>
				<set field="actionMenuName" value="OnlyExecuteMenuBarNoRegisterMenu"/>
                <set field="parameters.actionMenuLocation" value="component://base/widget/BaseMenus.xml"/>
                <set field="searchTabMenuName" value="OnlyExecuteTabMenuBar"/>
                <set field="searchTabMenuLocation" value="component://base/widget/BaseMenus.xml"/>
                <set field="searchBaseScreenName" value="DirigPerfInsertFromTemplateSearchBaseScreen" />
                <set field="searchBaseScreenLocation" value="component://dirigperf/widget/screens/DirigPerfScreens.xml" />
            </actions>
            <widgets>
                <include-screen name="main-decorator-ui-labels" location="component://emplperf/widget/screens/CommonScreens.xml" />
                <include-screen name="SearchScreen" location="component://emplperf/widget/screens/CommonScreens.xml" />
            </widgets>
        </section>
    </screen>

    <screen name="DirigPerfInsertFromTemplateSearchBaseScreen">
        <section>
            <actions>
                <set field="executePaginationTarget" value="dirigPerfInsertFromTemplateAsync"/>
				<set field="submitFormScreenName" value="DirigPerfInsertFromTemplateFormManagementScreen" />
                <set field="submitFormScreenLocation" value="component://dirigperf/widget/screens/DirigPerfScreens.xml" />
                <set field="simpleSearchTarget" value="${simpleSearchTarget}" default-value="simple_search"/>
                <set field="simpleSearchTargetTooltip" value="${uiLabelMap.EmplPerfInsertFromTemplateTab}"/>
                <set field="simpleSearchTargetTitle" value="${uiLabelMap.EmplPerfInsertFromTemplateTab}"/>
                <set field="searchAreaId" value="${searchAreaId}" default-value="common-container"/>
                <set field="searchTarget" value="${searchTarget}" default-value="searchResultContainerOnly"/>
            </actions>
            <widgets>
                <decorator-screen name="SearchListDecorator" location="component://base/widget/BaseScreens.xml">
                    <decorator-section name="parameter-form-section">
                        <decorator-screen name="SearchFormDecorator" location="component://base/widget/BaseScreens.xml">
                            <decorator-section name="search-form-section">
                                <container id="${simpleSearchTarget}">
                                    <section>
                                        <widgets>
                                            <container style="search-parameters">
                                                <section>
                                                    <widgets>
                                                        <platform-specific>
                                                            <html>
                                                                <html-template location="component://dirigperf/webapp/dirigperf/ftl/DirigPerfInsertFromTemplate.ftl" />
                                                            </html>
                                                        </platform-specific>
                                                    </widgets>
                                                </section>
                                            </container>
                                        </widgets>
                                    </section>
                                </container>
                            </decorator-section>
                        </decorator-screen>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="DirigPerfInsertFromTemplateFormManagementScreen">
        <section>
            <widgets>
                <include-form name="DirigPerfInsertFromTemplateManagementForm" location="${parameters.managementFormLocation}" />
            </widgets>
        </section>
    </screen>	
</screens>
