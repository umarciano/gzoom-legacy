<?xml version="1.0" encoding="UTF-8"?>

<screens xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://ofbiz.apache.org/dtds/widget-screen.xsd">

	<!-- ********************************************************************** -->
	<!-- ************************ Portale Iniziale **************************** -->
	<!-- ********************************************************************** -->
	<screen name="WorkEffortHome">
		<section>
			<actions>
			    <property-map resource="CustomUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="WorkeffortExtUiLabels" map-name="uiLabelMap" global="true" />
				<property-map resource="BaseUiLabels" map-name="uiLabelMap" global="true" />
				<property-map resource="WorkEffortUiLabels" map-name="uiLabelMap" global="true" />
        
                <set field="parameters.parentPortalPageId" from-field="parameters.parentPortalPageId" default-value="GP_WE_PORTAL" global="true" />
                <set field="parameters.portalPageId" from-field="parameters.parentPortalPageId" />
			</actions>
			<widgets>
				<include-screen name="MainPortalPageScreen" location="component://base/widget/CommonScreens.xml" />
			</widgets>
		</section>
	</screen>

	<!-- Portale Con Commento Individuale -->

	<screen name="WorkEffortPerformanceSummaryListScreen">
		<section>
			<actions>
			    <property-map resource="CustomUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="WorkeffortExtUiLabels" map-name="uiLabelMap" global="true" />
				<property-map resource="BaseUiLabels" map-name="uiLabelMap" global="true" />
				<property-map resource="WorkEffortUiLabels" map-name="uiLabelMap" global="true" />

				<set field="mantainOldFormName" value="Y" />

				<set field="entityName" value="WorkEffortRootInqySummaryView" />
				<set field="managementFormType" value="list" />
				<set field="childManagementFormListLocation" value="component://workeffortext/widget/forms/WorkEffortViewForms.xml" />
				<set field="childManagementFormListScreenName" value="WorkEffortPerformanceSummaryListScreenBody" />
				<set field="childManagementFormListScreenLocation" value="component://workeffortext/widget/screens/WorkeffortExtScreens.xml" />
				<!-- se lista vuota e noDataLoaded != Y allora mostra Nessun Dato da caricare
				<set field="noDataLoaded" value="Y" /> -->
				<log message="WorkEffortPerformanceSummaryListScreen noDataLoaded ${noDataLoaded} ${parameters.noDataLoaded}"/>
				<set field="noDataLoaded" value="${parameters.noDataLoaded}" default-value="N" />

				<set field="splitAttr" value="Y" />
				<set field="alsoInParameters" value="Y" />
				<set field="attrName" value="[portletAssoc, workEffortStatusTypeId, weContextId_value, weContextId_op, childManagementFormListName, PORTLET_TITLE, permission_value, permission_op]" />
				<script location="component://base/webapp/common/WEB-INF/actions/getPortletAttributes.groovy" />				
				<set field="parameters.mainPortletBaseScreenLocation" from-field="parameters.mainPortletBaseScreenLocation" default-value="component://workeffortext/widget/screens/CommonScreens.xml"/>
			</actions>
			<widgets>
				<include-screen name="PortletBaseScreen" location="${parameters.mainPortletBaseScreenLocation}" />
				<section>
					<actions>
						<set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/WorkEffortPerformanceSummary-list-extension.js.ftl" />
					</actions>
					<widgets>
						<include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml" />
					</widgets>
				</section>
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortPerformanceSummaryListScreenBody">
		<section>
			<actions>			
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getWorkEffortPerformanceSummary.groovy" />
			</actions>
			<widgets>
				<section>
					<condition>
						<if-empty field="listIt" />
					</condition>
					<widgets>
						<label text="${uiLabelMap.BaseNoData}" />
					</widgets>
					<fail-widgets>
						<platform-specific>
							<html>
								<html-template location="component://workeffortext/webapp/workeffortext/ftl/WorkEffortPerformanceSummary.ftl" />
							</html>
						</platform-specific>
					</fail-widgets>
				</section>
			</widgets>
		</section>
	</screen>

	<!-- Portale Performance Individuale -->

	<screen name="WorkEffortPartyPerformanceSummaryListScreen">
		<section>
			<actions>
			    <property-map resource="CustomUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="WorkeffortExtUiLabels" map-name="uiLabelMap" global="true" />
				<property-map resource="BaseUiLabels" map-name="uiLabelMap" global="true" />
				<property-map resource="WorkEffortUiLabels" map-name="uiLabelMap" global="true" />

				<set field="entityName" value="WorkEffortRootInqyPartySummaryView" />
				<set field="managementFormType" value="list" />
				<set field="childManagementFormListScreenName" value="WorkEffortPartyPerformanceSummaryListScreenBody" />
				<set field="childManagementFormListScreenLocation" value="component://workeffortext/widget/screens/WorkeffortExtScreens.xml" />

				<!-- se lista vuota e noDataLoaded != Y allora mostra Nessun Dato da caricare
				<set field="noDataLoaded" value="Y" /> -->
				<log message="WorkEffortPerformanceSummaryListScreen noDataLoaded ${noDataLoaded} ${parameters.noDataLoaded}"/>
				<set field="noDataLoaded" value="${parameters.noDataLoaded}" default-value="N" />
				<set field="noExecuteChildPerformFind" value="Y" />
				
				<set field="parameters.mainPortletBaseScreenLocation" from-field="parameters.mainPortletBaseScreenLocation" default-value="component://workeffortext/widget/screens/CommonScreens.xml"/>
			</actions>
			<widgets>
				<include-screen name="PortletBaseScreen" location="${parameters.mainPortletBaseScreenLocation}" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortPartyPerformanceSummaryListScreenBody">
		<section>
			<actions>
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getWorkEffortPartyPerformanceSummary.groovy" />
			</actions>
			<widgets>
				<section>
					<condition>
						<if-empty field="listIt" />
					</condition>
					<widgets>
						<label text="${uiLabelMap.BaseNoData}" />
					</widgets>
					<fail-widgets>
						<include-screen name="WorkEffortPartyPerformanceSummaryAllScreenBody" />
					</fail-widgets>
				</section>

			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortPartyPerformanceSummaryStratOrgListScreen">
		<section>
			<actions>
			    <property-map resource="CustomUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="WorkeffortExtUiLabels" map-name="uiLabelMap" global="true" />
				<property-map resource="BaseUiLabels" map-name="uiLabelMap" global="true" />
				<property-map resource="WorkEffortUiLabels" map-name="uiLabelMap" global="true" />

				<set field="parameters.entityName" value="WorkEffortRootInqyPartySummaryStratOrgView" />
				<set field="context.entityNamePrefix" value="WorkEffortRootInqyPartySummaryStratOrg" />

				<set field="managementFormType" value="list" />
				<set field="childManagementFormListScreenName" value="WorkEffortPartyPerformanceSummaryStratOrgListScreenBody" />
				<set field="childManagementFormListScreenLocation" value="component://workeffortext/widget/screens/WorkeffortExtScreens.xml" />

				<!-- se lista vuota e noDataLoaded != Y allora mostra Nessun Dato da caricare
				<set field="noDataLoaded" value="Y" /> -->
				<log message="WorkEffortPerformanceSummaryListScreen noDataLoaded ${noDataLoaded} ${parameters.noDataLoaded}"/>
				<set field="noDataLoaded" value="${parameters.noDataLoaded}" default-value="N" />			
				<set field="noExecuteChildPerformFind" value="Y" />	
				
				<set field="parameters.mainPortletBaseScreenLocation" from-field="parameters.mainPortletBaseScreenLocation" default-value="component://workeffortext/widget/screens/CommonScreens.xml"/>
			</actions>
			<widgets>
				<include-screen name="PortletBaseScreen" location="${parameters.mainPortletBaseScreenLocation}" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortPartyPerformanceSummaryStratOrgListScreenBody">
		<section>
			<actions>
				<set field="otherExtraParams" from-field="otherExtraParams" default-value="parameters.noLeftBar=${parameters.noLeftBar}" />
				<set field="context.entityNamePrefix" value="WorkEffortRootInqyPartySummaryStratOrg" />
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getWorkEffortPartyPerformanceSummaryStratOrg.groovy" />
			</actions>
			<widgets>
				<section>
					<condition>
						<if-empty field="listIt" />
					</condition>
					<widgets>
						<label text="${uiLabelMap.BaseNoData}" />
					</widgets>
					<fail-widgets>
						<include-screen name="WorkEffortPartyPerformanceSummaryAllScreenBody" />
					</fail-widgets>
				</section>

			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortPartyPerformanceSummaryAllScreenBody">
		<section>
			<actions>
				<!-- La prima volta che carico non ho portalPortletId e portletSeqId nei parameters ma solo nei context  -->		
				<set field="parameters.noLeftBar" from-field="parameters.noLeftBar" default-value="Y" />
				<set field="parameters.noInfoToolbar" from-field="parameters.noInfoToolbar" default-value="Y" />
				<set field="parameters.portalPortletId" from-field="parameters.portalPortletId" default-value="${context.portalPortletId}" />
				<set field="parameters.portletSeqId" from-field="parameters.portletSeqId" default-value="${context.portletSeqId}" />
				<!--  -->
				<set field="managementFormScreenName" value="Calendar" />
				<set field="managementFormScreenLocation" value="component://workeffortext/widget/screens/CalendarScreens.xml" />
				<set field="managementScreenName" value="Calendar" />
				<set field="managementScreenLocation" value="component://workeffortext/widget/screens/CalendarScreens.xml" />
				<set field="managementFormName" value="WorkEffortAndPartyAssignCalendarManagementForm" />
				<set field="managementFormLocation" value="component://workeffortext/widget/forms/WorkEffortForms.xml" />
				<set field="managementPaginationTarget" value="showPortletContainerOnly" />
				<set field="actionMenuName" value="CalendarMenuBar" />
				<set field="actionMenuLocation" value="component://workeffortext/widget/menus/WorkeffortExtMenus.xml" />

				<set field="workEffortInqyRootManagementFormLocation" value="component://workeffortext/widget/forms/WorkEffortRootInqyViewForms.xml" />

				<set field="communicationFormName" value="NewEmailExt" />
				<set field="communicationFormLocation" value="component://workeffortext/widget/forms/CommunicationForms.xml" />
				<set field="communicationMenuName" value="SendMailMenuBar" />
				<set field="communicationMenuLocation" value="component://workeffortext/widget/menus/WorkeffortExtMenus.xml" />
				<set field="communicationScreenName" value="CommunicationEventScreen" />
				<set field="communicationScreenLocation" value="component://workeffortext/widget/screens/CommunicationScreens.xml" />
				

				<set field="splitAttr" value="Y" />
				<set field="alsoInParameters" value="Y" />
				<set field="attrName" value="[portletAssoc, extraTargetParameters, extraAreaId, otherExtraAreaId, otherExtraParams, workEffortStatusTypeId, weContextId_value, weContextId_op, workEffortStatusFormScreenLocation, workEffortStatusFormScreenName]" />
				<script location="component://base/webapp/common/WEB-INF/actions/getPortletAttributes.groovy" />
			</actions>
			<widgets>
				<platform-specific>
					<html>
						<html-template location="component://workeffortext/webapp/workeffortext/ftl/WorkEffortPartyPerformanceSummary.ftl" />
					</html>
				</platform-specific>
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortStatusPortletHiddenManagementFormScreen">
		<section>
			<actions>
				<set field="parameters.insertMode" from-field="insertMode" />
				<set field="isInsertMode" value="${bsh: &quot;Y&quot;.equals(parameters.get(&quot;insertMode&quot;)) }" type="Boolean" />
				<set field="isReadOnly" value="true" type="Boolean" />

				<set field="managementFormName" value="WorkEffortStatusManagementFormForPortlet" />
				<set field="managementFormLocation" value="component://workeffortext/widget/forms/WorkEffortStatusForms.xml" />

				<set field="managementPaginationTarget" value="showPortletContainerOnly" />
				<set field="managementPaginationAreaId" value="portlet-container_${portalPageId}_${portalPortletId}_${portletSeqId}" />
				<set field="extraParams" value="portalPageId=${portalPageId}&amp;portalPortletId=${portalPortletId}&amp;portletSeqId=${portletSeqId}&amp;orgUnitId=${orgUnitId}&amp;noLeftBar=${parameters.noLeftBar}" />
				<set field="otherExtraParams" value="${otherExtraParams}&amp;orgUnitId=${orgUnitId}" />
			</actions>
			<widgets>
				<include-screen name="ManagementFormScreen" location="component://base/widget/ManagementScreens.xml" />
			</widgets>
		</section>
	</screen>

	<!-- Portale Risorse assegnate senza schede attive -->

	<screen name="PartyAllocationWorkEffortNotOpenSummaryList">
		<section>
			<actions>
			    <property-map resource="CustomUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="WorkeffortExtUiLabels" map-name="uiLabelMap" global="true" />
				<property-map resource="BaseUiLabels" map-name="uiLabelMap" global="true" />
				<property-map resource="WorkEffortUiLabels" map-name="uiLabelMap" global="true" />
				<property-map resource="PartyUiLabels" map-name="uiLabelMap" global="true" />

				<set field="entityName" value="PartyAllocationEvaluationPlanNotOpenSummary" />
				<set field="managementFormType" value="list" />
				<!-- forza uso del name contenuto in managementFormName -->
				<set field="mantainOldFormName" value="Y" />
				<set field="childManagementFormListLocation" value="component://partyext/widget/forms/PartyRelationshipForms.xml" />
				<set field="childManagementFormListScreenName" value="PartyAllocationWorkEffortNotOpenSummaryListScreenBody" />
				<set field="childManagementFormListScreenLocation" value="component://workeffortext/widget/screens/WorkeffortExtScreens.xml" />

				<set field="noDataLoaded" value="Y" />
			</actions>
			<widgets>
				<include-screen name="PortletBaseScreen" location="${parameters.mainPortletBaseScreenLocation}" />
			</widgets>
		</section>
	</screen>

	<screen name="PartyAllocationWorkEffortNotOpenSummaryListScreenBody">
		<section>
			<actions>
				<property-map resource="PartyExtUiLabels" map-name="uiLabelMap" global="true" />

				<set field="weContextId" from-field="parameters.weContextId" default-value="CTX_EP" />
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getPartyAllocationWorkEffortNotOpenSummary.groovy" />

				<set field="childManagementFormListName" value="PartyRelationshipAllocationOrgUnitNoWorkeffortManagementListForm" />
				<set field="childManagementFormListLocation" value="component://partyext/widget/forms/PartyRelationshipForms.xml" />

				<!-- carico il fuile per cambiare il link della scheda che deve essere aperto dentro il modulo workeffortext passangogli ID della tabella in questo caso : table_PRRANW001_PartyRelationship -->
				<set field="tableName" value="table_PRRANW001_PartyRelationship" />
				<set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/GeneralChangeAjaxUpdateAreaInterApp.js.ftl" />

			</actions>
			<widgets>
				<section>
					<condition>
						<if-empty field="listIt" />
					</condition>
					<widgets>
						<label text="${uiLabelMap.BaseNoData}" />
					</widgets>
					<fail-widgets>
						<section>
							<widgets>
								<include-screen name="ManagementListFormScreen" location="component://base/widget/ManagementScreens.xml" />
								<include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml" />
							</widgets>
						</section>
					</fail-widgets>
				</section>

			</widgets>
		</section>
	</screen>

	<!-- Portale Mie Performance -->

	<screen name="WorkEffortMyPerformanceSummaryListScreen">
		<section>
			<actions>
			    <property-map resource="CustomUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="WorkeffortExtUiLabels" map-name="uiLabelMap" global="true" />
				<property-map resource="BaseUiLabels" map-name="uiLabelMap" global="true" />
				<property-map resource="WorkEffortUiLabels" map-name="uiLabelMap" global="true" />
				<property-map resource="PartyUiLabels" map-name="uiLabelMap" global="true" />
				<property-map resource="PartyExtUiLabels" map-name="uiLabelMap" global="true" />

				<set field="entityName" value="MyPerformance" />
				<set field="managementFormType" value="list" />
				<!-- forza uso del name contenuto in managementFormName -->
				<set field="mantainOldFormName" value="Y" />
				<set field="childManagementFormListLocation" value="component://workeffortext/widget/forms/WorkEffortViewForms.xml" />
				<set field="childManagementFormListScreenName" value="WorkEffortMyPerformanceSummaryListScreenBody" />
				<set field="childManagementFormListScreenLocation" value="component://workeffortext/widget/screens/WorkeffortExtScreens.xml" />

				<!-- se lista vuota e noDataLoaded != Y allora mostra Nessun Dato da caricare
				<set field="noDataLoaded" value="Y" /> -->
				<log message="WorkEffortPerformanceSummaryListScreen noDataLoaded ${noDataLoaded} ${parameters.noDataLoaded}"/>
				<set field="noDataLoaded" value="${parameters.noDataLoaded}" default-value="N" />

				<set field="weContextId" from-field="parameters.weContextId" default-value="CTX_EP" />

				<!-- Filtro per il portale "Mie performance" - mostra solo schede completate -->
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/checkPortalMyPerformanceFilter.groovy" />

				<!-- carico il fuile per cambiare il link della scheda che deve essere aperto dentro il modulo workeffortext passangogli ID della tabella in questo caso : table_MPML0001_MyPerformance -->
				<set field="tableName" value="table_MPML0001_MyPerformance" />
				<set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/GeneralChangeAjaxUpdateAreaInterApp.js.ftl" />
				<set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/WorkEffortMyPerformanceSummary-list-extension.js.ftl" />

				<set field="splitAttr" value="Y" />
				<set field="alsoInParameters" value="Y" />
				<set field="attrName" value="[portletAssoc]" />
				<script location="component://base/webapp/common/WEB-INF/actions/getPortletAttributes.groovy" />
				<set field="parameters.mainPortletBaseScreenLocation" from-field="parameters.mainPortletBaseScreenLocation" default-value="component://workeffortext/widget/screens/CommonScreens.xml"/>
            </actions>
			<widgets>
				<include-screen name="PortletBaseScreen" location="${parameters.mainPortletBaseScreenLocation}" />
				<include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml" />

			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortMyPerformanceSummaryListScreenBody">
		<section>
			<actions>
				<!-- Filtro per il portale "Mie performance" - mostra solo schede completate -->
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/checkPortalMyPerformanceFilter.groovy" />
				
				<entity-condition list="listIt" entity-name="MyPerformance">
					<condition-list>
						<condition-expr field-name="userLoginId" from-field="userLogin.userLoginId" />
						<condition-expr field-name="currentStatusId" operator="like" value="${currentStatusId}%" />
					</condition-list>
					<order-by field-name="estimatedStartDate DESC" />
					<order-by field-name="estimatedCompletionDate DESC" />
					<order-by field-name="orgUnitName" />
					<order-by field-name="partyName" />
					<order-by field-name="workEffortName" />
					<order-by field-name="stDescription" />
				</entity-condition>

				<set field="parameters.workEffortId" value="${groovy: import org.ofbiz.base.util.UtilValidate; UtilValidate.isNotEmpty(listIt) ? listIt[0].workEffortId : &quot;&quot;}" />

				<set field="workEffortInqyRootManagementFormLocation" value="component://workeffortext/widget/forms/WorkEffortRootInqyViewForms.xml" />
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getWorkEffortMyPerformanceSummary.groovy" />
			</actions>
			<widgets>
				<section>
					<condition>
						<if-empty field="listIt" />
					</condition>
					<widgets>
						<label text="${uiLabelMap.BaseNoData}" />
					</widgets>
					<fail-widgets>
						<section>
							<widgets>
								<platform-specific>
									<html>
										<html-template location="component://workeffortext/webapp/workeffortext/ftl/WorkEffortMyPerformanceSummary.ftl" />
									</html>
								</platform-specific>
							</widgets>
						</section>
					</fail-widgets>
				</section>

			</widgets>
		</section>
	</screen>
	<!-- ********************************************************************** -->

	<screen name="WorkEffortAssocTypeAttrFolderScreen">
		<section>
			<actions>
				<set field="entityName" value="WorkEffortAssocTypeAttr" />
				<set field="parentEntityName" value="WorkEffortAssocType" />
				<set field="managementFormType" value="multi" />
				<set field="managementFormLocation" value="component://workeffortext/widget/forms/WorkEffortAssocTypeForms.xml" />
				<set field="parentManagementFormLocation" value="component://workeffortext/widget/forms/WorkEffortAssocTypeForms.xml" />
				<set field="childManagementFormListLocation" value="component://workeffortext/widget/forms/WorkEffortAssocTypeForms.xml" />
			</actions>
			<widgets>
				<include-screen name="ManagementDetailCommonScreen" location="component://base/widget/CommonScreens.xml" />
			</widgets>
		</section>
	</screen>

	<!-- ********************************************************************** -->
	<!-- WorkEffortView -->
	<!-- ********************************************************************** -->

	<screen name="WorkEffortRootViewContextManagementFormScreen">
		<section>
			<actions>
				<!-- Recupero i dati di workeffort -->
				<entity-one value-field="workEffort" entity-name="WorkEffort" />
				<entity-one value-field="" entity-name="WorkEffort" />
				
				<set field="workEffortFromId" value="${parameters.workEffortIdFrom}" default-value="${parameters.workEffortIdRoot}" />
				<entity-one value-field="workEffortFrom" entity-name="WorkEffort">
					<field-map field-name="workEffortId" from-field="workEffortFromId" />
				</entity-one>
				<set field="workEffortTypeIdFrom" from-field="workEffortFrom.workEffortTypeId" />

				<set field="orgUnitRoleTypeId" value="${orgUnitRoleTypeId}" default-value="${parameters.orgUnitRoleTypeId}" />

				<set field="workEffortIdFrom" value="${workEffortIdFrom}" default-value="${parameters.workEffortId}" />
				<set field="workEffortIdFrom" value="${workEffortIdFrom}" default-value="${parameters.workEffortIdRoot}" />
				<set field="currentStatusId" value="${parameters.currentStatusId}" default-value="${currentStatusId}" />
				<set field="currentStatusId" value="${currentStatusId}" default-value="${parameters.wrToStatusId}" />
				<set field="estimatedStartDate" value="${workEffort.estimatedStartDate}" default-value="${estimatedStartDate}" />
				<set field="estimatedStartDate" value="${estimatedStartDate}" default-value="${parameters.wrToFromDate}" />
				<set field="estimatedCompletionDate" value="${workEffort.estimatedCompletionDate}" default-value="${estimatedCompletionDate}" />
				<set field="estimatedCompletionDate" value="${estimatedCompletionDate}" default-value="${parameters.wrToThruDate}" />				
				<set field="orgUnitId" value="${parameters.orgUnitId}" default-value="${orgUnitId}" />
				<set field="orgUnitId" value="${orgUnitId}" default-value="${parameters.wrToOrgUnitId}" />
				<set field="organizationId" value="${parameters.organizationId}" default-value="${organizationId}" />
				<set field="organizationId" value="${organizationId}" default-value="${parameters.wrToOrgId}" />
				<set field="orgUnitRoleTypeId" value="${parameters.orgUnitRoleTypeId}" default-value="${orgUnitRoleTypeId}" />
				<set field="orgUnitRoleTypeId" value="${orgUnitRoleTypeId}" default-value="${parameters.wrToOuRoleTypeId}" />
				<!-- wrToOuRoleTypeId contiene orgUnitRoleTypeId del padre -->
				<set field="wrToOuRoleTypeId" value="${parameters.wrToOuRoleTypeId}" default-value="${workEffortFrom.orgUnitRoleTypeId}" />
				<set field="weHierarchyTypeId" value="${parameters.weHierarchyTypeId}" default-value="${weHierarchyTypeId}" />
				<set field="lastStatusUpdate" value="${parameters.lastStatusUpdate}" default-value="${lastStatusUpdate}" />

                <!-- GN-1165 -->
                <set field="readOnlyContent" value="${parameters.readOnlyContent}" default-value="${readOnlyContent}" />
                <set field="readOnlyContent" value="${readOnlyContent}" default-value="${parameters.rootInqyTree}" />

				<set field="insertAreaId" value="treeview-detail-screen" />
				<set field="selectAreaId" value="treeview-detail-screen" />
				<set field="extraParams" value="${extraParams}" default-value="wrToOuRoleTypeId=${wrToOuRoleTypeId}&amp;searchDate=${parameters.searchDate}&amp;rootInqyTree=${parameters.rootInqyTree}&amp;managementMenuEnabled=N&amp;displayScreenlet=${parameters.displayScreenlet}&amp;rootTree=${parameters.rootTree}&amp;loadTreeView=N&amp;sourceReferenceId=${parameters.sourceReferenceId}&amp;weHierarchyTypeId=${parameters.weHierarchyTypeId}&amp;currentStatusId=${currentStatusId}&amp;estimatedStartDate=${estimatedStartDate}&amp;estimatedCompletionDate=${estimatedCompletionDate}&amp;orgUnitId=${orgUnitId}&amp;orgUnitRoleTypeId=${orgUnitRoleTypeId}&amp;organizationId=${organizationId}&amp;workEffortIdRoot=${parameters.workEffortIdRoot}&amp;workEffortIdFrom=${parameters.workEffortIdFrom}&amp;workEffortId=${parameters.workEffortId}&amp;nextStatusId=${parameters.nextStatusId}&amp;gpMenuEnumId=${parameters.gpMenuEnumId}&amp;withProcess=${parameters.withProcess}&amp;childStruct=${parameters.childStruct}${bsh: import org.ofbiz.base.util.UtilValidate; return UtilValidate.isNotEmpty(context.get(&quot;addExtraParams&quot;)) ? &quot;&amp;&quot; + context.get(&quot;addExtraParams&quot;) : &quot;&quot;}" />
				<set field="insertExtraParams" value="${insertExtraParams}"
					default-value="wrToOuRoleTypeId=${wrToOuRoleTypeId}&amp;searchDate=${parameters.searchDate}&amp;rootInqyTree=${parameters.rootInqyTree}&amp;managementMenuEnabled=N&amp;displayScreenlet=${parameters.displayScreenlet}&amp;rootTree=${parameters.rootTree}&amp;loadTreeView=N&amp;weHierarchyTypeId=${weHierarchyTypeId}&amp;currentStatusId=${currentStatusId}&amp;lastStatusUpdate=${lastStatusUpdate}&amp;estimatedStartDate=${estimatedStartDate}&amp;estimatedCompletionDate=${estimatedCompletionDate}&amp;orgUnitId=${orgUnitId}&amp;orgUnitRoleTypeId=${orgUnitRoleTypeId}&amp;organizationId=${organizationId}&amp;workEffortIdRoot=${parameters.workEffortIdRoot}&amp;workEffortIdFrom=${workEffortIdFrom}&amp;nextStatusId=${parameters.nextStatusId}&amp;workEffortParentId=${workEffortParentId}&amp;workEffortTypeIdFrom=${workEffortTypeIdFrom}&amp;gpMenuEnumId=${parameters.gpMenuEnumId}&amp;withProcess=${parameters.withProcess}&amp;childStruct=${parameters.childStruct}${bsh: import org.ofbiz.base.util.UtilValidate; return UtilValidate.isNotEmpty(context.get(&quot;addInsertExtraParams&quot;)) ? &quot;&amp;&quot; + context.get(&quot;addInsertExtraParams&quot;) : &quot;&quot;}" />

				<set field="arrayListExtraParams" value="${arrayListExtraParams}" default-value="wrToOuRoleTypeId=${wrToOuRoleTypeId}&amp;searchDate=${parameters.searchDate}&amp;rootInqyTree=${parameters.rootInqyTree}&amp;managementMenuEnabled=N&amp;displayScreenlet=${parameters.displayScreenlet}&amp;rootTree=${parameters.rootTree}&amp;loadTreeView=N&amp;weHierarchyTypeId=${weHierarchyTypeId}&amp;currentStatusId=${currentStatusId}&amp;lastStatusUpdate=${lastStatusUpdate}&amp;estimatedStartDate=${estimatedStartDate}&amp;estimatedCompletionDate=${estimatedCompletionDate}&amp;orgUnitId=${orgUnitId}&amp;orgUnitRoleTypeId=${orgUnitRoleTypeId}&amp;organizationId=${organizationId}&amp;workEffortIdRoot=${parameters.workEffortIdRoot}&amp;workEffortIdFrom=${workEffortIdFrom}&amp;nextStatusId=${parameters.nextStatusId}&amp;workEffortParentId=${workEffortParentId}&amp;workEffortTypeIdFrom=${workEffortTypeIdFrom}&amp;gpMenuEnumId=${parameters.gpMenuEnumId}&amp;withProcess=${parameters.withProcess}&amp;childStruct=${parameters.childStruct}${bsh: import org.ofbiz.base.util.UtilValidate; return UtilValidate.isNotEmpty(context.get(&quot;addInsertExtraParams&quot;)) ? &quot;&amp;&quot; + context.get(&quot;addInsertExtraParams&quot;) : &quot;&quot;}"  />
				
				<set field="contextManagementFormScreenName" value="${contextManagementFormScreenName}" default-value="ContextManagementFormScreen" />
				<set field="contextManagementFormScreenLocation" value="${contextManagementFormScreenLocation}" default-value="component://base/widget/ManagementScreens.xml" />
			</actions>
			<widgets>
				<include-screen name="${contextManagementFormScreenName}" location="${contextManagementFormScreenLocation}" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortViewParentScreen">
		<section>
			<actions>
				<!-- scambio parametri tra parameters e context per back -->
				<entity-one value-field="" entity-name="WorkEffort">
					<field-map field-name="workEffortId" from-field="parameters.workEffortId" />
				</entity-one>
				<!-- caso 3845, al click su nodo si perde workEffortTypeId -->
				<set field="parameters.workEffortTypeId" value="${parameters.workEffortTypeId}" default-value="${workEffortTypeId}" />
				<entity-one value-field="wt" entity-name="WorkEffortType">
					<field-map field-name="workEffortTypeId" from-field="parameters.workEffortTypeId" />
				</entity-one>
			</actions>
			<widgets>
				<include-screen name="ParentManagementFormScreen" location="component://base/widget/ManagementScreens.xml" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortViewExtendParentScreen">
		<section>
			<actions>
				<!-- scambio parametri tra parameters e context per back -->
				<entity-one value-field="" entity-name="WorkEffort">
					<field-map field-name="workEffortId" from-field="parameters.workEffortId" />
				</entity-one>
				<!-- caso 3845, al click su nodo si perde workEffortTypeId -->
				<set field="parameters.workEffortTypeId" value="${parameters.workEffortTypeId}" default-value="${workEffortTypeId}" />
				<entity-one value-field="wt" entity-name="WorkEffortType">
					<field-map field-name="workEffortTypeId" from-field="parameters.workEffortTypeId" />
				</entity-one>
				
				<set field="parentManagementFormName" value="WorkEffortViewExtendedManagementParentForm"/>
			</actions>
			<widgets>
				<include-screen name="ParentManagementFormScreen" location="component://base/widget/ManagementScreens.xml" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortViewManagementScreen">
		<section>
			<actions>
				<!-- GN-371 -->
                <set field="workEffortTypeIdFrom" from-field="workEffortTypeIdFrom" default-value="${parameters.workEffortTypeIdFrom}"/>
                <set field="workEffortTypeIdRoot" from-field="workEffortTypeIdRoot" default-value="${parameters.workEffortTypeIdRoot}"/> 
                
                <!-- Recupero i dati di workeffort -->
				<entity-one value-field="" entity-name="WorkEffort">
					<field-map field-name="workEffortId" from-field="parameters.workEffortId" />
				</entity-one>
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getUniqueWorkeffortAssoc.groovy" />
				
				<set field="parameters.etch" from-field="etch" />

				<set field="weAssocTypeId" from-field="weAssocTypeId" default-value="${workEffortAssocTypeId}" />

				<set field="orgUnitRoleTypeId" value="${orgUnitRoleTypeId}" default-value="${parameters.orgUnitRoleTypeId}" />
				
				<set field="wrToOuRoleTypeId" value="${wrToOuRoleTypeId}" default-value="${parameters.wrToOuRoleTypeId}" />
				<entity-one value-field="parentOrgUnitRoleType" entity-name="RoleType">
					<field-map field-name="roleTypeId" from-field="wrToOuRoleTypeId" />
				</entity-one>
				
				<!-- Provo a caricare Js.ftl -->
				<!-- <set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/workEffortMeasureValue-list-extension.js.ftl"/> -->


				<!-- Check read only statuses -->
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/checkWorkEffortActivationStatus.groovy" />
				<!-- I campi di stato non sono read-only nel caso lo stato sia attivo -->
				<!-- ToDo 3820 -->
				
				<set field="isReadOnly" value="${isReadOnly}" type="Boolean" />

				<set field="isInsertMode" value="${bsh: &quot;Y&quot;.equals(parameters.get(&quot;insertMode&quot;)) }" type="Boolean" />
				<set field="hasLocalNameContentId" value="${bsh: org.ofbiz.base.util.UtilValidate.isNotEmpty(context.get(&quot;localNameContentId&quot;)) }" type="Boolean" />

				<entity-condition entity-name="PartyRoleIntOrgViewAndUserLoginValidPartyRole" list="organizationList">
					<condition-expr field-name="userLoginId" from-field="userLogin.userLoginId" />
				</entity-condition>
				
			    <!-- GN602 -->
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/loadMainFolderWorkEffortTypeCntParams.groovy" />

				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getWorkeffortMainNote.groovy" />
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getWorkEffortViewColsTitle.groovy"/>
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getWorkEffortViewNoteInfoColsTitle.groovy"/>

				<!-- Bug 3818 -->
				<!-- Faccio vedere solo il responsabile -->
				<set field="parameters.onlyResponsible" default-value="Y"/>
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getWorkEffortResponsibleByRole.groovy" />
				
				<!-- bug 3994: estraggo il relativo workEfforType per i controlli di readonly sul campo etch -->
				<entity-one value-field="workEffortType" entity-name="WorkEffortType" />
				<!-- end 3994 -->
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getOrgUnitRoleTypeList.groovy" />

				<set field="loadTypeHierarchyIcon"  value="typeHierarchyIconLoading" />
				
				<set field="defaultOrganizationPartyId" from-field="defaultOrganizationPartyId" from-scope="user" default-value="${userPreferences.ORGANIZATION_PARTY}"/>
								
				<set field="readOnlyOrgUnitRoleTypeId" value="${bsh: import org.ofbiz.base.util.UtilValidate; ! isInsertMode &amp;&amp; UtilValidate.isNotEmpty(workEffortType) &amp;&amp; UtilValidate.isNotEmpty(workEffortType.get(&quot;orgUnitRoleTypeId&quot;)) &amp;&amp; UtilValidate.isEmpty(workEffortType.get(&quot;orgUnitRoleTypeId2&quot;))}" type="Boolean"/>
				
				<!-- GN2000 -->
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/loadWorkEffortTypeHierarchyTextAreaField.groovy" />
								
				<!-- GN-2356 -->
				<set field="orgUnitRoleTypeDisplayField" value="${bsh: &quot;Y&quot;.equals(context.get(&quot;localeSecondarySet&quot;)) ? &quot;descriptionLang&quot; : &quot;description&quot;}"/>
				<set field="orgUnitDisplayField" value="${bsh: &quot;Y&quot;.equals(context.get(&quot;localeSecondarySet&quot;)) ? &quot;partyNameLang&quot; : &quot;partyName&quot;}"/>
				<set field="workEffortTypeDescDisplayField" value="${bsh: &quot;Y&quot;.equals(context.get(&quot;localeSecondarySet&quot;)) ? &quot;descriptionLang&quot; : &quot;description&quot;}"/>
				<set field="workEffortTypeEtchDisplayField" value="${bsh: &quot;Y&quot;.equals(context.get(&quot;localeSecondarySet&quot;)) ? &quot;etchLang&quot; : &quot;etch&quot;}"/>
				<set field="workEffortPurposeTypeDisplayField" value="${bsh: &quot;Y&quot;.equals(context.get(&quot;localeSecondarySet&quot;)) ? &quot;descriptionLang&quot; : &quot;description&quot;}"/>
				<set field="customTimePeriodDisplayField" value="${bsh: &quot;Y&quot;.equals(context.get(&quot;localeSecondarySet&quot;)) ? &quot;customTimePeriodCodeLang&quot; : &quot;customTimePeriodCode&quot;}"/>
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/evaluateCtxTypeParams.groovy"/> 
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/executePerformFindPartyRoleOrgUnit.groovy"/>
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/setWorkEffortPurposeTypeTitle.groovy"/>
				
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getWrToOuRoleTypeDesc.groovy"/>
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/setEstimatedDateFields.groovy"/>
				
				<!-- Bug 4696 -->
				<set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/typeHierarchyIcon-extension.js.ftl" />

				<!-- carico Js per back interApp 4790 -->
				<set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/GeneralChangeBackInterApp.js.ftl" />
				
				<set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/WorkEffortView-management-extension.js.ftl" />
            </actions>
			<widgets>
				<include-screen name="WorkEffortViewGeneralManagementLayoutScreen" />
				<include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortRootViewManagementInnerScreen">
		<section>
			<actions>
                <set field="loadTreeView" from-field="parameters.loadTreeView" default-value="Y" />
				<entity-one value-field="wrk" entity-name="WorkEffort">
					<field-map field-name="workEffortId" from-field="parameters.workEffortId" />
				</entity-one>
				<get-related-one relation-name="WorkEffortType" to-value-field="wrkType" value-field="wrk" />
				<set field="disableDelete" value="${bsh: import org.ofbiz.base.util.UtilValidate; UtilValidate.isNotEmpty(wrk) &amp;&amp; UtilValidate.isNotEmpty(wrkType.get(&quot;isRoot&quot;)) &amp;&amp; &quot;Y&quot;.equals(wrkType.get(&quot;isRoot&quot;)) ? &quot;Y&quot; : &quot;&quot;}" />
				<set field="parameters.workEffortIdRoot" value="${parameters.workEffortIdRoot}" default-value="${parameters.workEffortId}" />
                
            </actions>
			<widgets>
				<section>
					<condition>
						<or>
							<if-compare operator="equals" value="Y" field="parameters.loadTreeView" />
							<if-compare operator="equals" value="Y" field="loadTreeView" />
						</or>
					</condition>
					<actions>				
						<set field="parameters.forceUniqueRoot" value="Y" />

						<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/loadWorkEffortRoot.groovy" />
						<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/checkWorkEffortReadOnly.groovy" />
						
						<set field="weHierarchyTypeId" value="${parameters.weHierarchyTypeId}" default-value="${weHierarchyTypeId}" />

						<set field="parameters.snapshot" value="${parameters.snapshot}"/>
						<set field="parameters.specialized" value="${parameters.specialized}"/>
						<set field="parameters.rootTree" value="${parameters.rootTree}" default-value="Y" />
						<set field="parameters.rootInqyTree" value="${parameters.rootInqyTree}" default-value="N" />
						<set field="parameters.workEffortIdRoot" value="${parameters.workEffortIdRoot}" default-value="${parameters.workEffortId}" />
						<set field="parameters.workEffortName" from-field="workEffortRoot.workEffortName" />
						<set field="parameters.rootValues" value="workEffortIdTo;${parameters.workEffortIdRoot}|workEffortAssocTypeId;${weHierarchyTypeId}|wrToCode;${workEffortRoot.sourceReferenceId}|wrToName;${workEffortRoot.workEffortName}|wrToNameLang;${workEffortRoot.workEffortNameLang}|wrToTypeDescr;${weTypeDescription}|wrToStatusId;${workEffortRoot.currentStatusId}|wrToFromDate;${workEffortRoot.estimatedStartDate}|wrToThruDate;${workEffortRoot.estimatedCompletionDate}|wrToOrgUnitId;${workEffortRoot.orgUnitId}|wrToOuRoleTypeId;${workEffortRoot.orgUnitRoleTypeId}|wrToOrgId;${workEffortRoot.organizationId}|weTypeIconId;${workEffortRoot.weTypeIconId}|etch;${workEffortRoot.etch}|searchDate;${parameters.searchDate}|snapshot;${parameters.snapshot}|gpMenuEnumId;${parameters.gpMenuEnumId}|withProcess=${parameters.withProcess}|childStruct;${parameters.childStruct}" />
						<set field="parameters.parentRelKeyFields" value="workEffortIdFrom;workEffortIdTo|workEffortAssocTypeId" />
						<set field="parameters.orderByFields" value="sequenceNum|wrToCode|workEffortIdTo" />
						<set field="parameters.treeViewEntityName" value="WorkEffortAssocExtView" />
						<set field="parameters.treeViewLocation" value="component://workeffortext/widget/trees/WorkEffortRootInqyTrees.xml" />											
						<set field="parameters.treeViewName" value="${parameters.treeViewName}" default-value="${bsh: &quot;Y&quot;.equals(context.get(&quot;localeSecondarySet&quot;)) ? &quot;WorkEffortRootInqyTreeLang&quot; : &quot;WorkEffortRootInqyTree&quot;}" />						
						<!-- <set field="parameters.treeViewEmptyDetail" value="Y"/> -->
						<set field="parameters.keyFields" value="workEffortIdTo|workEffortIdFrom|workEffortAssocTypeId|fromDate" />
                        <set field="parameters.constFields" value="${parameters.constFields}" default-value="rootTree;${parameters.rootTree}|rootInqyTree;${parameters.rootInqyTree}|specialized;${parameters.specialized}|definition;${parameters.definition}|noLeftBar;${parameters.noLeftBar}|noInfoToolbar;${parameters.noInfoToolbar}|workEffortIdRoot;${parameters.workEffortIdRoot}|weHierarchyTypeId;${weHierarchyTypeId}|weIsTemplate;${weIsTemplate}|weContextId;${weContextId}|estimatedStartDate;${estimatedStartDate}|estimatedCompletionDate;${estimatedCompletionDate}|loadTreeView;N|nextStatusId;${nextStatusId}|workEffortTypeIdRoot;${workEffortTypeId}|snapShot;${parameters.snapShot}|searchDate;${parameters.searchDate}|snapshot;${parameters.snapshot}${bsh: import org.ofbiz.base.util.UtilValidate; return UtilValidate.isNotEmpty(context.get(&quot;constField&quot;)) ? &quot;|&quot; + context.get(&quot;constField&quot;) : &quot;&quot;}"/>
						<set field="parameters.nodeEntityName" value="WorkEffortView" />
						<set field="parameters.relationTitle" value="To" />
						<set field="parameters.generateNodeFromEntityName" value="true" />
						<set field="parameters.saveView" value="N" />
						<set field="parameters.managementMenuEnabled" value="Y" />
						<set field="parameters.displayScreenlet" value="N" />
						<set field="parameters.loadTreeView" from-field="loadTreeView" default-value="Y" />
						<set field="parameters.customFindScriptLocation" value="component://workeffortext/webapp/workeffortext/WEB-INF/actions/executePerformFindWorkEffortRootInqyTree.groovy" />
						<set field="parameters.otherFields" value="${parameters.otherFields}" default-value="wrToStatusId|wrToFromDate|wrToThruDate|wrToOrgUnitId|wrToOuRoleTypeId|wrToOrgId|workEffortTypeIdTo|workEffortTypeIdFrom|initiallyCollapsed" />
						<set field="parameters.extraFields" value="${parameters.extraFields}" default-value="workEffortId;workEffortIdTo" />

						<set field="parameters.treeChangesSaveMethods" value="updateWorkEffortAssoc" />

						<set field="parameters.selectedId" value="${parameters.selectedId}" default-value="WorkEffortAssocExtView_root_${parameters.workEffortIdRoot}" />

						<set field="parameters.wrToFromDate" value="${parameters.estimatedStartDate}" default-value="${workEffortRoot.estimatedStartDate}" />
						<set field="parameters.wrToThruDate" value="${parameters.estimatedCompletionDate}" default-value="${workEffortRoot.estimatedCompletionDate}" />

						<set field="parameters.defaultValueFields" value="modifiedDate;${parameters.modifiedDate}" />

						<set field="workEffortId" value="${groovy: parameters.get(&quot;selectedId&quot;).substring(parameters.get(&quot;selectedId&quot;).lastIndexOf(&quot;_&quot;)+1)}" />
                        
                        <!-- carico solo i js che gestiscono la selezione della riga, perche la gestione del pannello adesso e' centralizzata, grazie alla class standardPortlet -->
                        <set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/WorkEffortAssignmentView-extension.js.ftl"/>
                        <set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/WorkEffortNoteAndData-extension.js.ftl"/>
                        <set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/WorkEffortAssocExtView-extension.js.ftl" />
                        <set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/WorkEffortMeasure-extension.js.ftl"/>
                    </actions>
					<widgets>
						<include-screen name="ManagementBaseInnerScreen" location="component://base/widget/BaseScreens.xml" />
					</widgets>
					<fail-widgets>
						<section>
						    <actions>
						        <script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/checkWorkEffortReadOnly.groovy" />
						    </actions>
							<widgets>
								<include-screen name="ManagementBaseInnerScreen" location="component://base/widget/BaseScreens.xml" />
							</widgets>
						</section>
					</fail-widgets>
				</section>
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortRootInqyViewManagementInnerScreen">
		<section>
			<actions>
				<set field="loadTreeView" from-field="parameters.loadTreeView" />
				<set field="rootInqyTree" from-field="parameters.rootInqyTree" />
			</actions>
			<widgets>
				<section>
					<condition>
						<and>
							<if-compare field="loadTreeView" operator="equals" value="Y" />
						</and>
					</condition>
					<actions>
						<set field="parameters.disableDragAndDrop" value="Y" />
					</actions>
					<widgets>
						<include-screen name="WorkEffortRootViewManagementInnerScreen" />
					</widgets>
					<fail-widgets>
						<include-screen name="WorkEffortRootViewManagementInnerScreen" />
					</fail-widgets>
				</section>
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortRootViewManagementScreen">
		<section>
			<actions>
				<set field="workEffortFromId" value="${parameters.workEffortIdFrom}" default-value="${parameters.workEffortIdRoot}" />
				<entity-one value-field="workEffortFrom" entity-name="WorkEffort">
					<field-map field-name="workEffortId" from-field="workEffortFromId" />
				</entity-one>
				<set field="workEffortTypeIdFrom" from-field="workEffortFrom.workEffortTypeId" />

				<entity-one value-field="workEffortRoot" entity-name="WorkEffort">
					<field-map field-name="workEffortId" from-field="parameters.workEffortIdRoot" />
				</entity-one>
				<set field="workEffortTypeIdRoot" from-field="workEffortRoot.workEffortTypeId" />
				<set field="gpMenuEnumId" from-field="parameters.gpMenuEnumId"/>
				<set field="childStruct" from-field="parameters.childStruct"/>
				<set field="withProcess" from-field="parameters.withProcess"/>

				<entity-one value-field="we" entity-name="WorkEffort">
					<field-map field-name="workEffortId" from-field="parameters.workEffortId" />
				</entity-one>
				<get-related-one relation-name="WorkEffortType" to-value-field="weType" value-field="we" />
				<set field="weIsRoot" from-field="weType.isRoot" />

				<!-- TOLTO dagli extraParams weIsTemplate=${parameters.weIsTemplate} -->
				<set field="extraParams" value="definition=${parameters.definition}&amp;snapshot=${parameters.snapshot}&amp;searchDate=${parameters.searchDate}&amp;rootInqyTree=${parameters.rootInqyTree}&amp;rootTree=${parameters.rootTree}&amp;managementMenuEnabled=Y&amp;displayScreenlet=${parameters.displayScreenlet}&amp;loadTreeView=Y&amp;selectedId=${parameters.selectedId}&amp;sourceReferenceId=${parameters.sourceReferenceId}&amp;weContextId=${parameters.weContextId}&amp;statusIdParameters=${parameters.statusIdParameters}&amp;specialized=${parameters.specialized}&amp;weHierarchyTypeId=${parameters.weHierarchyTypeId}&amp;estimatedCompletionDate=${parameters.estimatedCompletionDate}&amp;workEffortIdRoot=${parameters.workEffortIdRoot}&amp;workEffortIdFrom=${parameters.workEffortIdFrom}&amp;workEffortTypeIdRoot=${workEffortTypeIdRoot}&amp;gpMenuEnumId=${parameters.gpMenuEnumId}&amp;withProcess=${parameters.withProcess}&amp;childStruct=${parameters.childStruct}&amp;gpMenuOrgUnitRoleTypeId=${parameters.gpMenuOrgUnitRoleTypeId}&amp;hideIsRootActive=${parameters.hideIsRootActive}&amp;hideChildStruct=${parameters.hideChildStruct}" />

				<set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/WorkEffortIsPostedValue-toolbar-extension.js.ftl" />
            	
			</actions>
			<widgets>
				<section>
					<condition>
						<if-compare operator="equals" value="Y" field="parameters.detail" />
					</condition>
					<actions>
						<set field="managementPaginationTarget" value="managementContainerOnly" />
						<set field="managementPaginationAreaId" value="common-container" />
					</actions>
					<widgets>
						<include-screen name="WorkEffortViewManagementScreen" />
					</widgets>
					<fail-widgets>
						<include-screen name="WorkEffortViewManagementScreen" />
					</fail-widgets>
				</section>
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortRootViewContextManagementMultiFormScreen">
		<section>
			<actions>
				<set field="insertAreaId" value="treeview-detail-screen" />
				<set field="insertAreaTarget" value="childManagementContainerOnly" />

				<set field="selectAreaId" value="treeview-detail-screen" />
				<set field="selectAreaTarget" value="childManagementContainerOnly" />

				<set field="contextManagementFormScreenName" value="ContextManagementMultiFormScreen" />
				<set field="contextManagementFormScreenLocation" value="component://base/widget/ManagementScreens.xml" />

				<!-- readOnlyContent = Y, allegati in sola lettura, se parameters.rootInqyTree = Y -->
				<set field="readOnlyContent" from-field="parameters.rootInqyTree" />

				<set field="detail" value="${parameters.detail}" default-value="Y" />
			</actions>
			<widgets>
				<include-screen name="WorkEffortRootViewContextManagementFormScreen" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortRootViewMainFolderDetailScreen">
		<section>
			<actions>
				<set field="managementFormScreenName" value="WorkEffortRootViewManagementScreen" />
				<set field="managementFormScreenLocation" value="component://workeffortext/widget/screens/WorkeffortExtScreens.xml" />

				<set field="contextManagementFormName" value="BaseContextExtendedManagementForm" />
				<set field="contextManagementFormLocation" value="component://base/widget/BaseForms.xml" />

				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/checkWorkEffortActivationStatus.groovy" />
			</actions>
			<widgets>
				<include-screen name="InnerMenuContextManagementBaseScreen" location="component://base/widget/CommonScreens.xml" />
			</widgets>
		</section>
	</screen>

	<!-- ************************************************************** -->
	<!-- ****************** Screen Generali per i folder ************** -->
	<!-- ************************************************************** -->

	<screen name="WorkEffortViewGeneralManagementScreen">
		<section>
			<actions>
				<!-- utilizzati per la paginazione dopo il back -->
				<set field="extraParams" from-field="extraParams" default-value="weIsTemplate=${parameters.weIsTemplate}&amp;snapshot=${parameters.snapshot}&amp;searchDate=${parameters.searchDate}&amp;workEffortIdRoot=${parameters.workEffortIdRoot}&amp;rootTree=${parameters.rootTree}&amp;specialized=${parameters.specialized}&amp;rootInqyTree=${parameters.rootInqyTree}&amp;treeViewName=${treeViewName}" />

				<set field="isInsertMode" value="${bsh: &quot;Y&quot;.equals(parameters.get(&quot;insertMode&quot;)) }" default-value="false" type="Boolean" />
				<set field="isMultiWorkEffort" value="${isMultiWorkEffort}" default-value="false" type="Boolean" />
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/checkWorkEffortActivationStatus.groovy" />
				
			</actions>
			<widgets>
				<include-screen name="WorkEffortViewGeneralManagementLayoutScreen" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortViewGeneralManagementLayoutScreen">
		<section>
			<actions>
				<!-- aggiunto entityOne perchè dava errore nell'inserimento scheda bug 4640 -->
				<entity-one value-field="wrk" entity-name="WorkEffort" />
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getRootLayout.groovy" />
				<log message="### contentId per Layout = ${context.layoutContentId}" />
			</actions>
			<widgets>
				<section>
					<condition>
						<if-empty field="layoutContentId" />
					</condition>
					<widgets>
						<section>
							<condition>
								<or>
									<if-compare operator="equals" value="list" field="managementFormType" />
									<if-compare operator="equals" value="multi" field="managementFormType" />
								</or>
							</condition>
							<widgets>
								<include-screen name="ManagementListFormScreen" location="component://base/widget/ManagementScreens.xml" />
							</widgets>
							<fail-widgets>
								<include-screen name="ManagementFormScreen" location="component://base/widget/ManagementScreens.xml" />
							</fail-widgets>
						</section>
					</widgets>
					<fail-widgets>
						<content content-id="${layoutContentId}" />
					</fail-widgets>
				</section>
			</widgets>
		</section>
	</screen>
    
	<screen name="WorkEffortViewFolderDetailScreen">
		<section>
			<actions>
				<set field="childManagementDetailTitle" from-field="childManagementDetailTitle" />
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/checkWorkEffortActivationStatus.groovy" />
			</actions>
			<widgets>
				<include-screen name="InnerMenuContextManagementBaseScreen" location="component://base/widget/CommonScreens.xml" />
			</widgets>
		</section>
	</screen>

	<!-- caso 2952, nell'albero idFrom è il workeffortRoot, nelle "Relazioni Da" invece deve essere il nodo corrente -->
	<screen name="WorkEffortAssocExtFromViewContextManagementScreen">
		<section>
			<actions>
                <entity-one value-field="workEffort" entity-name="WorkEffort">
					<field-map field-name="workEffortId" from-field="parameters.workEffortId" />
				</entity-one>
				<set field="managementChildExtraParams" value="workEffortId=${parameters.workEffortId}|workEffortIdFrom=${parameters.workEffortId}" />
				
				<set field="extraParams" value="${extraParams}&amp;weIsTemplate=${parameters.weIsTemplate}&amp;snapshot=${parameters.snapshot}&amp;searchDate=${parameters.searchDate}&amp;workEffortIdRoot=${workEffort.workEffortParentId}&amp;workEffortParentId=${parameters.workEffortIdRoot}&amp;rootTree=${parameters.rootTree}&amp;workEffortTypeId=${workEffort.workEffortTypeId}&amp;rootInqyTree=${parameters.rootInqyTree}&amp;contentId=${parameters.contentId}&amp;isObiettivo=${parameters.isObiettivo}" />
				<set field="extraParams" value="${extraParams}&amp;assA1=${assA1}&amp;assA2=${assA2}&amp;assA3=${assA3}&amp;assB1=${assB1}&amp;assB2=${assB2}&amp;assocLevelSameUO=${assocLevelSameUO}&amp;assocLevelParentUO=${assocLevelParentUO}&amp;assocLevelChildUO=${assocLevelChildUO}&amp;assocLevelSisterUO=${assocLevelSisterUO}&amp;assocLevelTopUO=${assocLevelTopUO}&amp;assocLevelSameUOAss=${assocLevelSameUOAss}&amp;assocLevelParentUOAss=${assocLevelParentUOAss}&amp;assocLevelChildUOAss=${assocLevelChildUOAss}&amp;assocLevelSisterUOAss=${assocLevelSisterUOAss}&amp;assocLevelTopUOAss=${assocLevelTopUOAss}&amp;entityNameExtended=${entityNameExtended}" />
								
				<set field="arrayListExtraParams" value="weIsTemplate=${parameters.weIsTemplate}&amp;snapshot=${parameters.snapshot}&amp;searchDate=${parameters.searchDate}&amp;workEffortIdRoot=${workEffort.workEffortParentId}&amp;workEffortParentId=${parameters.workEffortIdRoot}&amp;saveView=N&amp;rootTree=${parameters.rootTree}&amp;workEffortTypeId=${workEffort.workEffortTypeId}&amp;rootInqyTree=${parameters.rootInqyTree}&amp;contentId=${parameters.contentId}&amp;isObiettivo=${parameters.isObiettivo}" />
				<set field="arrayListExtraParams" value="${arrayListExtraParams}&amp;assA1=${assA1}&amp;assA2=${assA2}&amp;assA3=${assA3}&amp;assB1=${assB1}&amp;assB2=${assB2}&amp;assocLevelSameUO=${assocLevelSameUO}&amp;assocLevelParentUO=${assocLevelParentUO}&amp;assocLevelChildUO=${assocLevelChildUO}&amp;assocLevelSisterUO=${assocLevelSisterUO}&amp;assocLevelTopUO=${assocLevelTopUO}&amp;assocLevelSameUOAss=${assocLevelSameUOAss}&amp;assocLevelParentUOAss=${assocLevelParentUOAss}&amp;assocLevelChildUOAss=${assocLevelChildUOAss}&amp;assocLevelSisterUOAss=${assocLevelSisterUOAss}&amp;assocLevelTopUOAss=${assocLevelTopUOAss}&amp;entityNameExtended=${entityNameExtended}" />
				
				<set field="insertExtraParams" value="${insertExtraParams}&amp;weIsTemplate=${parameters.weIsTemplate}&amp;snapshot=${parameters.snapshot}&amp;searchDate=${parameters.searchDate}&amp;workEffortIdRoot=${workEffort.workEffortParentId}&amp;workEffortParentId=${parameters.workEffortIdRoot}&amp;rootTree=${parameters.rootTree}&amp;workEffortTypeId=${workEffort.workEffortTypeId}&amp;rootInqyTree=${parameters.rootInqyTree}&amp;contentId=${parameters.contentId}&amp;isObiettivo=${parameters.isObiettivo}" />                              
				<set field="insertExtraParams" value="${insertExtraParams}&amp;assA1=${assA1}&amp;assA2=${assA2}&amp;assA3=${assA3}&amp;assB1=${assB1}&amp;assB2=${assB2}&amp;assocLevelSameUO=${assocLevelSameUO}&amp;assocLevelParentUO=${assocLevelParentUO}&amp;assocLevelChildUO=${assocLevelChildUO}&amp;assocLevelSisterUO=${assocLevelSisterUO}&amp;assocLevelTopUO=${assocLevelTopUO}&amp;assocLevelSameUOAss=${assocLevelSameUOAss}&amp;assocLevelParentUOAss=${assocLevelParentUOAss}&amp;assocLevelChildUOAss=${assocLevelChildUOAss}&amp;assocLevelSisterUOAss=${assocLevelSisterUOAss}&amp;assocLevelTopUOAss=${assocLevelTopUOAss}&amp;entityNameExtended=${entityNameExtended}" />			
			</actions>
			<widgets>
				<include-screen name="ContextManagementMultiFormScreen" location="component://base/widget/ManagementScreens.xml" />
			</widgets>
		</section>
	</screen>
	
	
	<screen name="WorkEffortAssocExtToContextManagementScreen">
		<section>
			<actions>
            	<entity-one value-field="workEffort" entity-name="WorkEffort">
					<field-map field-name="workEffortId" from-field="parameters.workEffortId" />
				</entity-one>
				<set field="extraParams" value="${extraParams}&amp;weIsTemplate=${parameters.weIsTemplate}&amp;snapshot=${parameters.snapshot}&amp;searchDate=${parameters.searchDate}&amp;workEffortIdRoot=${parameters.workEffortIdRoot}&amp;workEffortParentId=${parameters.workEffortIdRoot}&amp;rootTree=${parameters.rootTree}&amp;specialized=${parameters.specialized}&amp;workEffortTypeId=${workEffort.workEffortTypeId}&amp;rootInqyTree=${parameters.rootInqyTree}&amp;contentId=${parameters.contentId}&amp;isObiettivo=${parameters.isObiettivo}" />
				<set field="extraParams" value="${extraParams}&amp;assA1=${assA1}&amp;assA2=${assA2}&amp;assA3=${assA3}&amp;assB1=${assB1}&amp;assB2=${assB2}" />
				<set field="extraParams" value="${extraParams}&amp;assocLevelSameUO=${assocLevelSameUO}&amp;assocLevelParentUO=${assocLevelParentUO}&amp;assocLevelChildUO=${assocLevelChildUO}&amp;assocLevelSisterUO=${assocLevelSisterUO}&amp;assocLevelTopUO=${assocLevelTopUO}&amp;assocLevelSameUOAss=${assocLevelSameUOAss}&amp;assocLevelParentUOAss=${assocLevelParentUOAss}&amp;assocLevelChildUOAss=${assocLevelChildUOAss}&amp;assocLevelSisterUOAss=${assocLevelSisterUOAss}&amp;assocLevelTopUOAss=${assocLevelTopUOAss}&amp;entityNameExtended=${entityNameExtended}" />							
				
				<set field="arrayListExtraParams" value="weIsTemplate=${parameters.weIsTemplate}&amp;snapshot=${parameters.snapshot}&amp;searchDate=${parameters.searchDate}&amp;workEffortIdRoot=${parameters.workEffortIdRoot}&amp;workEffortParentId=${parameters.workEffortIdRoot}&amp;saveView=N&amp;rootTree=${parameters.rootTree}&amp;specialized=${parameters.specialized}&amp;workEffortTypeId=${workEffort.workEffortTypeId}&amp;rootInqyTree=${parameters.rootInqyTree}&amp;contentId=${parameters.contentId}&amp;isObiettivo=${parameters.isObiettivo}" />
				<set field="arrayListExtraParams" value="${arrayListExtraParams}&amp;assA1=${assA1}&amp;assA2=${assA2}&amp;assA3=${assA3}&amp;assB1=${assB1}&amp;assB2=${assB2}" />				
				<set field="arrayListExtraParams" value="${arrayListExtraParams}&amp;assocLevelSameUO=${assocLevelSameUO}&amp;assocLevelParentUO=${assocLevelParentUO}&amp;assocLevelChildUO=${assocLevelChildUO}&amp;assocLevelSisterUO=${assocLevelSisterUO}&amp;assocLevelTopUO=${assocLevelTopUO}&amp;assocLevelSameUOAss=${assocLevelSameUOAss}&amp;assocLevelParentUOAss=${assocLevelParentUOAss}&amp;assocLevelChildUOAss=${assocLevelChildUOAss}&amp;assocLevelSisterUOAss=${assocLevelSisterUOAss}&amp;assocLevelTopUOAss=${assocLevelTopUOAss}&amp;entityNameExtended=${entityNameExtended}" />							
								
				<set field="insertExtraParams" value="${insertExtraParams}&amp;weIsTemplate=${parameters.weIsTemplate}&amp;snapshot=${parameters.snapshot}&amp;searchDate=${parameters.searchDate}&amp;workEffortIdRoot=${parameters.workEffortIdRoot}&amp;workEffortParentId=${parameters.workEffortIdRoot}&amp;rootTree=${parameters.rootTree}&amp;specialized=${parameters.specialized}&amp;workEffortTypeId=${workEffort.workEffortTypeId}&amp;rootInqyTree=${parameters.rootInqyTree}&amp;contentId=${parameters.contentId}&amp;isObiettivo=${parameters.isObiettivo}" />
				<set field="insertExtraParams" value="${insertExtraParams}&amp;assA1=${assA1}&amp;assA2=${assA2}&amp;assA3=${assA3}&amp;assB1=${assB1}&amp;assB2=${assB2}" />				
				<set field="insertExtraParams" value="${insertExtraParams}&amp;assocLevelSameUO=${assocLevelSameUO}&amp;assocLevelParentUO=${assocLevelParentUO}&amp;assocLevelChildUO=${assocLevelChildUO}&amp;assocLevelSisterUO=${assocLevelSisterUO}&amp;assocLevelTopUO=${assocLevelTopUO}&amp;assocLevelSameUOAss=${assocLevelSameUOAss}&amp;assocLevelParentUOAss=${assocLevelParentUOAss}&amp;assocLevelChildUOAss=${assocLevelChildUOAss}&amp;assocLevelSisterUOAss=${assocLevelSisterUOAss}&amp;assocLevelTopUOAss=${assocLevelTopUOAss}&amp;entityNameExtended=${entityNameExtended}" />			
			</actions>
			<widgets>
				<include-screen name="ContextManagementMultiFormScreen" location="component://base/widget/ManagementScreens.xml" />
			</widgets>
		</section>
	</screen>

<screen name="WorkEffortContextManagementMultiFormScreen">
		<section>
			<actions>
				<entity-one value-field="" entity-name="WorkEffort">
					<field-map field-name="workEffortId" from-field="parameters.workEffortId" />
				</entity-one>
				<!-- caso 3845, al click su nodo si perde workEffortTypeId -->
				<set field="parameters.workEffortId" value="${parameters.workEffortId}" default-value="${workEffortId}" />
				<set field="parameters.workEffortTypeId" value="${parameters.workEffortTypeId}" default-value="${workEffortTypeId}" />
				<entity-one value-field="workEffort" entity-name="WorkEffort">
					<field-map field-name="workEffortId" from-field="parameters.workEffortId" />
				</entity-one>
				<!-- rimossi default-value perche mai usati <set field="insertExtraParams" value="${insertExtraParams}amp;workEffortTypeId=${parameters.workEffortTypeId}" default-value="workEffortTypeId=${parameters.workEffortTypeId}"/> -->
				<set field="insertExtraParams" value="${insertExtraParams}&amp;weIsTemplate=${parameters.weIsTemplate}&amp;snapshot=${parameters.snapshot}&amp;searchDate=${parameters.searchDate}&amp;workEffortIdRoot=${parameters.workEffortIdRoot}&amp;workEffortTypeId=${parameters.workEffortTypeId}&amp;contentIdInd=${parameters.contentIdInd}&amp;contentIdSecondary=${parameters.contentIdSecondary}&amp;isObiettivo=${parameters.isObiettivo}" />
				<set field="extraParams" value="${extraParams}" default-value="weIsTemplate=${parameters.weIsTemplate}&amp;snapshot=${parameters.snapshot}&amp;searchDate=${parameters.searchDate}&amp;workEffortIdRoot=${parameters.workEffortIdRoot}&amp;rootInqyTree=${parameters.rootInqyTree}&amp;contentIdInd=${parameters.contentIdInd}&amp;contentIdSecondary=${parameters.contentIdSecondary}&amp;isObiettivo=${parameters.isObiettivo}" />
				<set field="arrayListExtraParams" value="weIsTemplate=${parameters.weIsTemplate}&amp;snapshot=${parameters.snapshot}&amp;searchDate=${parameters.searchDate}&amp;workEffortIdRoot=${parameters.workEffortIdRoot}&amp;saveView=N&amp;rootInqyTree=${parameters.rootInqyTree}&amp;contentIdInd=${parameters.contentIdInd}&amp;contentIdSecondary=${parameters.contentIdSecondary}&amp;isObiettivo=${parameters.isObiettivo}" />
			</actions>			
			<widgets>
				<include-screen name="ContextManagementMultiFormScreen" location="component://base/widget/ManagementScreens.xml" />
			</widgets>
		</section>
	</screen>
	
	<screen name="WorkEffortNoteAndDataMultiFormScreen">
		<section>
			<actions>
            <log message="######### WorkEffortNoteAndDataMultiFormScreen "/>
                <entity-one value-field="workEffort" entity-name="WorkEffort">
					<field-map field-name="workEffortId" from-field="parameters.workEffortId" />
				</entity-one>

				<!-- rimossi default-value perche mai usati <set field="insertExtraParams" value="${insertExtraParams}amp;workEffortTypeId=${parameters.workEffortTypeId}" default-value="workEffortTypeId=${parameters.workEffortTypeId}"/> -->
				<set field="insertExtraParams" value="${insertExtraParams}&amp;weIsTemplate=${parameters.weIsTemplate}&amp;snapshot=${parameters.snapshot}&amp;searchDate=${parameters.searchDate}&amp;workEffortIdRoot=${parameters.workEffortIdRoot}&amp;workEffortTypeId=${parameters.workEffortTypeId}&amp;noteContentId=${parameters.noteContentId}&amp;isObiettivo=${parameters.isObiettivo}" />
				<set field="extraParams" value="${extraParams}" default-value="weIsTemplate=${parameters.weIsTemplate}&amp;snapshot=${parameters.snapshot}&amp;searchDate=${parameters.searchDate}&amp;workEffortIdRoot=${parameters.workEffortIdRoot}&amp;rootInqyTree=${parameters.rootInqyTree}&amp;isObiettivo=${parameters.isObiettivo}" />
				<set field="arrayListExtraParams" value="weIsTemplate=${parameters.weIsTemplate}&amp;snapshot=${parameters.snapshot}&amp;searchDate=${parameters.searchDate}&amp;workEffortIdRoot=${parameters.workEffortIdRoot}&amp;rootInqyTree=${parameters.rootInqyTree}&amp;saveView=N&amp;noteContentId=${parameters.noteContentId}&amp;isObiettivo=${parameters.isObiettivo}" />
			</actions>
			<widgets>
				<include-screen name="ContextManagementMultiFormScreen" location="component://base/widget/ManagementScreens.xml" />
			</widgets>
		</section>
	</screen>
	
	<!-- Bug 4144 -->
	<!-- screen name="WorkEffortTransactionViewContextLinkContextManagementMultiFormScreen"> <section> <actions> <entity-one value-field="workEffort" entity-name="WorkEffort"> <field-map field-name="workEffortId" from-field="parameters.workEffortId"/> </entity-one> <log message=" ############################ CONTEXT" /> </actions> <widgets> <include-screen name="ContextManagementMultiFormScreen" location="component://base/widget/ManagementScreens.xml"/> </widgets> </section> </screen -->

	<!-- 4144 detail -->
	<screen name="WorkEffortTransactionViewContextLinkDetailScreen">
		<section>
			<actions>
				<!-- bug 5241 -->
				<set field="contentId" from-field="parameters.contentId" default-value="${parameters.contentIdSecondary}"/>
				
				<entity-one value-field="glAccount" entity-name="GlAccount" />
				<set field="glAccountTypeId" from-field="glAccount.glAccountTypeId" />
				<set field="inputEnumId" from-field="glAccount.inputEnumId" />
				<set field="detailEnumId" from-field="glAccount.detailEnumId" />

				<set field="extraParams" value="${extraParams}&amp;weIsTemplate=${parameters.weIsTemplate}&amp;snapshot=${parameters.snapshot}&amp;searchDate=${parameters.searchDate}&amp;isObiettivo=${parameters.isObiettivo}&amp;contentId=${contentId}" />

				<set field="childManagementDetailTitle" value="${uiLabelMap.BaseDetail}" />

				<set field="insertMode" value="N" />

				<set field="_SAVED_VIEW_NAME_" value="${bsh: return com.mapsengineering.base.events.SessionHistoryWorker.checkExistenceSaveViewStack(request, response);}" global="true" />

				<!-- eseguo ricerca dati per refresh sulla form di dettaglio, il set di insertByWeTransMeasureId a true server perché altrimenti il groovy non inserisce i dati nel contesto (non so perché) -->
				<set field="weTransMeasureId" value="${parameters.weTransMeasureId}" default-value="${weTransMeasureId}" />
				<set field="insertByWeTransMeasureId" value="true" type="Boolean" />
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getWorkEffortTransactionView.groovy" />
			</actions>
			<widgets>
				<include-screen name="InnerMenuContextManagementBaseScreen" location="component://base/widget/CommonScreens.xml" />
			</widgets>
		</section>
	</screen>


	<screen name="WorkEffortTransactionViewContextLinkListDetailScreen">
		<section>
			<actions>
				<entity-one value-field="glAccount" entity-name="GlAccount" />
				<!-- inserito sia qui che nel folder successivo, perche questo screen porta anche nel contextlink -->
				<entity-one value-field="we" entity-name="WorkEffort" />
				<set field="organizationId" from-field="we.organizationId" />			
				<!-- bug 5241 -->
				<set field="glAccountTypeId" from-field="glAccount.glAccountTypeId" />

				<set field="weTransProductId" from-field="productId" default-value="${parameters.weTransProductId}" />

				<entity-one value-field="uom" entity-name="Uom">
					<field-map field-name="uomId" from-field="glAccount.defaultUomId" />
				</entity-one>
				<set field="weTransDecimalScale" from-field="weTransDecimalScale" default-value="${uom.decimalScale}" type="Long" />
				<set field="extraParams" value="${extraParams}&amp;weIsTemplate=${parameters.weIsTemplate}&amp;snapshot=${parameters.snapshot}&amp;searchDate=${parameters.searchDate}&amp;weTransProductId=${weTransProductId}&amp;isObiettivo=${parameters.isObiettivo}" />

				<set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/WorkEffortIsPostedValue-toolbar-extension.js.ftl" />
				<set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/WorkEffortTransactionViewValMod-toolbar-extension.js.ftl" />
			</actions>
			<widgets>
				<include-screen name="ManagementListFormScreen" location="component://base/widget/ManagementScreens.xml" />
				<include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml" />
			</widgets>
		</section>
	</screen>

	<!-- 4144 detail context -->
	<screen name="WorkEffortTransactionViewContextLinkDetailContextManagementScreen">
		<section>
			<actions>
                <!-- se apro il contextLink dei Valori Indicatori il contentIdSecondary contiene l'info su quale dei 5 folder sono...e quindi questo diventa il contentId -->
				<set field="contentId" from-field="parameters.contentId" default-value="${parameters.contentIdSecondary}"/>
				<entity-one value-field="workEffort" entity-name="WorkEffort">
					<field-map field-name="workEffortId" from-field="parameters.workEffortId" />
				</entity-one>

				<set field="weTransProductId" from-field="productId" default-value="${parameters.weTransProductId}" />

				<!-- rimossi default-value perche mai usati -->

				<set field="extraParams" value="${extraParams}&amp;weIsTemplate=${parameters.weIsTemplate}&amp;snapshot=${parameters.snapshot}&amp;searchDate=${parameters.searchDate}&amp;weTransProductId=${weTransProductId}&amp;workEffortId=${parameters.workEffortId}&amp;glAccountId=${parameters.glAccountId}&amp;workEffortTypeId=${workEffort.workEffortTypeId}&amp;isObiettivo=${parameters.isObiettivo}&amp;workEffortIdRoot=${parameters.workEffortIdRoot}&amp;contentId=${contentId}&amp;rootInqyTree=${parameters.rootInqyTree}" />
				<set field="insertExtraParams" value="${insertExtraParams}&amp;weIsTemplate=${parameters.weIsTemplate}&amp;snapshot=${parameters.snapshot}&amp;searchDate=${parameters.searchDate}&amp;weTransProductId=${weTransProductId}&amp;uomTypeId=${parameters.uomTypeId}&amp;isObiettivo=${parameters.isObiettivo}&amp;contentId=${contentId}" />

				<set field="arrayListExtraParams" value="${arrayListExtraParams}&amp;weIsTemplate=${parameters.weIsTemplate}&amp;snapshot=${parameters.snapshot}&amp;searchDate=${parameters.searchDate}&amp;weTransProductId=${weTransProductId}&amp;isObiettivo=${parameters.isObiettivo}&amp;workEffortIdRoot=${parameters.workEffortIdRoot}&amp;contentId=${contentId}&amp;rootInqyTree=${parameters.rootInqyTree}&amp;isReadOnly=${parameters.isReadOnly}" />


				<set field="selectAreaTarget" value="childManagementContainerOnly" />
				<set field="selectAreaId" value="child-management-container-${entityName}" />
				<set field="insertAreaTarget" value="childManagementContainerOnly" />
				<set field="insertAreaId" value="child-management-container-${entityName}" />

				<set field="saveView" value="N" />
				
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getValidateValModId.groovy" />
				
			</actions>
			<widgets>
				<section>
					<condition>
						<if-compare operator="not-equals" value="multi" field="managementFormType" />
					</condition>
					<widgets>
						<include-screen name="ContextManagementFormScreen" location="component://base/widget/ManagementScreens.xml" />
					</widgets>
					<fail-widgets>
						<include-screen name="ContextManagementMultiFormScreen" location="component://base/widget/ManagementScreens.xml" />
					</fail-widgets>
				</section>

			</widgets>
		</section>
	</screen>


	<!-- ************************************************************** -->

	<screen name="WorkEffortTransactionViewContextManagementMultiFormScreen">
		<section>
			<actions>
				<!-- Force isReadOnly = true if parameters.rootInqyTree = Y or parameters.snapshot -->
                <script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/checkWorkEffortActivationStatus.groovy" />
            	<set field="extraParams" value="${extraParams}" default-value="snapshot=${parameters.snapshot}&amp;weIsTemplate=${parameters.weIsTemplate}&amp;searchDate=${parameters.searchDate}&amp;workEffortIdRoot=${parameters.workEffortIdRoot}&amp;rootInqyTree=${parameters.rootInqyTree}" />
			    <set field="arrayListExtraParams" value="${arrayListExtraParams}" default-value="weIsTemplate=${parameters.weIsTemplate}&amp;snapshot=${parameters.snapshot}&amp;searchDate=${parameters.searchDate}&amp;rootInqyTree=${parameters.rootInqyTree}" />
			    <set field="insertExtraParams" value="${insertExtraParams}" default-value="weIsTemplate=${parameters.weIsTemplate}&amp;snapshot=${parameters.snapshot}&amp;searchDate=${parameters.searchDate}&amp;workEffortIdRoot=${parameters.workEffortIdRoot}&amp;rootInqyTree=${parameters.rootInqyTree}" />
            </actions>
			<widgets>
				<include-screen name="ContextManagementMultiFormScreen" location="component://base/widget/ManagementScreens.xml" />
			</widgets>
		</section>
	</screen>
    
    
    <screen name="WorkEffortMeasureContextManagementMultiFormScreen">
        <section>
            <actions>
                <set field="forcedBackAreaId" from-field="parameters.backAreaId"/>
                <set field="parameters.forcedBackAreaId" from-field="parameters.backAreaId"/>
                <set field="selectAreaId" from-field="parameters.backAreaId"/>
                <set field="managementPaginationAreaId" from-field="parameters.backAreaId"/>
                <set field="parameters.returnFolderIndex" value="${parameters.oldFolderIndex}" />
                <set field="extraParams" value="${extraParams}" default-value="snapshot=${parameters.snapshot}&amp;weIsTemplate=${parameters.weIsTemplate}&amp;searchDate=${parameters.searchDate}&amp;workEffortIdRoot=${parameters.workEffortIdRoot}&amp;rootInqyTree=${parameters.rootInqyTree}" />
                <set field="arrayListExtraParams" value="${arrayListExtraParams}" default-value="weIsTemplate=${parameters.weIsTemplate}&amp;snapshot=${parameters.snapshot}&amp;searchDate=${parameters.searchDate}&amp;rootInqyTree=${parameters.rootInqyTree}" />
                <set field="insertExtraParams" value="${insertExtraParams}" default-value="weIsTemplate=${parameters.weIsTemplate}&amp;snapshot=${parameters.snapshot}&amp;searchDate=${parameters.searchDate}&amp;workEffortIdRoot=${parameters.workEffortIdRoot}&amp;rootInqyTree=${parameters.rootInqyTree}" />
            </actions>
            <widgets>
                <include-screen name="ContextManagementMultiFormScreen" location="component://base/widget/ManagementScreens.xml" />
            </widgets>
        </section>
    </screen>

	<!-- ************************************************************** -->

	<!-- ************************************************************** -->
	<!-- ******** WorkEffortView folders WorkEffortAttribute ********** -->
	<!-- ************************************************************** -->
	<screen name="WorkEffortAttributeManagementScreen">
		<section>
			<actions>
				<entity-one entity-name="WorkEffortView" value-field="workEffortView" />
				<set field="workEffortTypeId" from-field="workEffortView.workEffortTypeId" />
			</actions>
			<widgets>
				<include-screen name="WorkEffortViewGeneralManagementScreen" />
			</widgets>
		</section>
	</screen>
	<screen name="WorkEffortAttributeContextManagementMultiFormScreen">
		<section>
			<actions>
				<set field="insertExtraParams" value="${insertExtraParams}" default-value="weIsTemplate=${parameters.weIsTemplate}&amp;snapshot=${parameters.snapshot}&amp;searchDate=${parameters.searchDate}&amp;workEffortIdRoot=${parameters.workEffortIdRoot}&amp;workEffortTypeId=${workEffortTypeId}" />
			</actions>
			<widgets>
				<include-screen name="ContextManagementMultiFormScreen" location="component://base/widget/ManagementScreens.xml" />
			</widgets>
		</section>
	</screen>
	<!-- ************************************************************** -->

	<!-- ********************************************************************** -->
	<!-- ********** WorkEffortView folders WorkEffortAssocExtView ************* -->
	<!-- ********************************************************************** -->
	<screen name="WorkEffortAssocExtViewManagementScreen">
		<section>
			<actions>
				<set field="isMultiWorkEffort" value="true" type="Boolean" />
				<set field="isRelationTitleFrom" value="${bsh: import org.ofbiz.base.util.UtilValidate; UtilValidate.isNotEmpty(context.get(&quot;relationTitle&quot;)) ? context.get(&quot;relationTitle&quot;).matches(&quot;From(.*)&quot;) : &quot;false&quot; }" type="Boolean" />
				<set field="isRelationTitleTo" value="${bsh: import org.ofbiz.base.util.UtilValidate; UtilValidate.isNotEmpty(context.get(&quot;relationTitle&quot;)) ? context.get(&quot;relationTitle&quot;).matches(&quot;To(.*)&quot;) : &quot;false&quot; }" type="Boolean" />
								
								
				<set field="extraParams"  value="${extraParams}" default-value="weIsTemplate=${parameters.weIsTemplate}&amp;snapshot=${parameters.snapshot}&amp;searchDate=${parameters.searchDate}" />
				<set field="extraParams"  value="${extraParams}&amp;workEffortIdRoot=${parameters.workEffortIdRoot}&amp;workEffortTypeId=${parameters.workEffortTypeId}&amp;specialized=${parameters.specialized}&amp;loadTreeView=Y&amp;rootTree=${parameters.rootTree}&amp;rootInqyTree=${parameters.rootInqyTree}" />
				<set field="extraParams"  value="${extraParams}&amp;assA1=${assA1}&amp;assA2=${assA2}&amp;assA3=${assA3}&amp;assB1=${assB1}&amp;assB2=${assB2}&amp;assocLevelSameUO=${assocLevelSameUO}&amp;assocLevelParentUO=${assocLevelParentUO}&amp;assocLevelChildUO=${assocLevelChildUO}&amp;assocLevelSisterUO=${assocLevelSisterUO}&amp;assocLevelTopUO=${assocLevelTopUO}&amp;assocLevelSameUOAss=${assocLevelSameUOAss}&amp;assocLevelParentUOAss=${assocLevelParentUOAss}&amp;assocLevelChildUOAss=${assocLevelChildUOAss}&amp;assocLevelSisterUOAss=${assocLevelSisterUOAss}&amp;assocLevelTopUOAss=${assocLevelTopUOAss}&amp;entityNameExtended=${entityNameExtended}" />
				
				<set field="insertExtraParams"  value="${insertExtraParams}&amp;assA1=${assA1}&amp;assA2=${assA2}&amp;assA3=${assA3}&amp;assB1=${assB1}&amp;assB2=${assB2}&amp;assocLevelSameUO=${assocLevelSameUO}&amp;assocLevelParentUO=${assocLevelParentUO}&amp;assocLevelChildUO=${assocLevelChildUO}&amp;assocLevelSisterUO=${assocLevelSisterUO}&amp;assocLevelTopUO=${assocLevelTopUO}&amp;assocLevelSameUOAss=${assocLevelSameUOAss}&amp;assocLevelParentUOAss=${assocLevelParentUOAss}&amp;assocLevelChildUOAss=${assocLevelChildUOAss}&amp;assocLevelSisterUOAss=${assocLevelSisterUOAss}&amp;assocLevelTopUOAss=${assocLevelTopUOAss}&amp;entityNameExtended=${entityNameExtended}" />
				
				<set field="arrayListExtraParams"  value="${arrayListExtraParams}&amp;assA1=${assA1}&amp;assA2=${assA2}&amp;assA3=${assA3}&amp;assB1=${assB1}&amp;assB2=${assB2}&amp;assocLevelSameUO=${assocLevelSameUO}&amp;assocLevelParentUO=${assocLevelParentUO}&amp;assocLevelChildUO=${assocLevelChildUO}&amp;assocLevelSisterUO=${assocLevelSisterUO}&amp;assocLevelTopUO=${assocLevelTopUO}&amp;assocLevelSameUOAss=${assocLevelSameUOAss}&amp;assocLevelParentUOAss=${assocLevelParentUOAss}&amp;assocLevelChildUOAss=${assocLevelChildUOAss}&amp;assocLevelSisterUOAss=${assocLevelSisterUOAss}&amp;assocLevelTopUOAss=${assocLevelTopUOAss}&amp;entityNameExtended=${entityNameExtended}" />
			
				<set field="childManagementFormListLocation" value="${childManagementFormListLocation}" default-value="${managementFormLocation}" />
			</actions>
			<widgets>
				<section>
					<condition>
						<and>
							<if-compare operator="equals" value="Y" field="parameters.detail" />
							<if-compare operator="not-equals" value="Y" field="detailJustLoaded" />
						</and>
					</condition>
					<widgets>
						<include-screen name="WorkEffortAssocExtViewManagementDetailScreen" />
					</widgets>
					<fail-widgets>
						<include-screen name="WorkEffortViewGeneralManagementScreen" />
					</fail-widgets>
				</section>
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortAssocExtViewFromGeneralManagementWrapperScreen">
		<section>
			<actions>
        		<set field="workEffortAssocTypeDisplayField" value="${bsh: &quot;Y&quot;.equals(context.get(&quot;localeSecondarySet&quot;)) ? &quot;commentsLang&quot; : &quot;comments&quot;}"/>
			
				<set field="workEffortAssocExtViewType" value="WEAEVMM001_WorkEffortAssocExtViewFromGeneral" />
				<set field="workEffortAssocExtAssocWeight" value="From" />
				
				<!-- Bug 4589 selezione multipla -->
				<set field="workEffortIdTo" default-value="${parameters.toFromWeId}" />
				<entity-one value-field="toFromWe" entity-name="WorkEffort">
					<field-map field-name="workEffortId" from-field="parameters.toFromWeId" />
				</entity-one>
				<set field="workEffortTypeIdTo" from-field="toFromWe.workEffortTypeId" />
			</actions>
			<widgets>
				<include-screen name="WorkEffortAssocExtViewManagementWrapperScreen" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortAssocExtViewToGeneralManagementWrapperScreen">
		<section>
			<actions>
        		<set field="workEffortAssocTypeDisplayField" value="${bsh: &quot;Y&quot;.equals(context.get(&quot;localeSecondarySet&quot;)) ? &quot;commentsLang&quot; : &quot;comments&quot;}"/>
						
				<set field="workEffortAssocExtViewType" value="WEAEVMM001_WorkEffortAssocExtViewToGeneral" />
				<set field="workEffortAssocExtAssocWeight" value="To" />

				<!-- Bug 4589 selezione multipla -->
				<set field="workEffortIdFrom" default-value="${parameters.toFromWeId}" />
				<entity-one value-field="toFromWe" entity-name="WorkEffort">
					<field-map field-name="workEffortId" from-field="parameters.toFromWeId" />
				</entity-one>
				<set field="workEffortTypeIdFrom" from-field="toFromWe.workEffortTypeId" />
			</actions>
			<widgets>
				<include-screen name="WorkEffortAssocExtViewManagementWrapperScreen" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortAssocExtViewSpecializedManagementScreen">
		<section>
			<actions>
				<!-- Caso particolare dove ho una form come lista che apre apre un dettaglio, in questo caso vengono inseriti i parametri si adi extraParam che di queryString
					per evitare che si duplicano basta che il paramettro managementChildExtraParams non sia vuoto
				 -->
				<set field="managementChildExtraParams" value="dummy=false" />
			</actions>
			<widgets>
				<include-screen name="WorkEffortAssocExtViewManagementScreen" />
			</widgets>
		</section>	
	</screen>
	
	<screen name="WorkEffortAssocExtViewFromManagementWrapperScreen">
		<section>
			<actions>
        		<set field="workEffortAssocTypeDisplayField" value="${bsh: &quot;Y&quot;.equals(context.get(&quot;localeSecondarySet&quot;)) ? &quot;commentsLang&quot; : &quot;comments&quot;}"/>
			
				<set field="parameters.workEffortTypeId" from-field="parameters.workEffortTypeIdTo" default-value="${parameters.workEffortTypeId}" />
				<set field="workEffortAssocExtViewType" value="WEAEVMM002_WorkEffortAssocExtView_${parameters.contentId}" />
				<set field="workEffortAssocExtAssocWeight" value="From" />

				<!-- vedi WorkEffortAssocExtViewValue-list-extension.js.ftl -->

				<set field="managementChildExtraParams" value="" />
				
				<set field="extraParams" value="weIsTemplate=${parameters.weIsTemplate}&amp;snapshot=${parameters.snapshot}&amp;searchDate=${parameters.searchDate}&amp;workEffortId=${parameters.workEffortId}&amp;workEffortIdFrom=${parameters.workEffortId}" />				

				<!-- Bug 4589 selezione multipla -->
				<set field="workEffortIdTo" default-value="${parameters.toFromWeId}" />
				<entity-one value-field="toFromWe" entity-name="WorkEffort">
					<field-map field-name="workEffortId" from-field="parameters.toFromWeId" />
				</entity-one>
				<set field="workEffortTypeIdTo" from-field="toFromWe.workEffortTypeId" />

				<!-- Bug 4589 -->
				<entity-condition list="workEffortTypeAssocAndAssocTypeList" entity-name="WorkEffortTypeAssocAndAssocType">
					<condition-list>
						<condition-expr field-name="workEffortTypeId" from-field="parameters.workEffortTypeId" />
						<condition-expr field-name="wefromWetoEnumId" value="WETAFROM" />
						<condition-expr field-name="workEffortTypeIdRef" from-field="workEffortTypeIdTo" />
						<condition-expr field-name="contentId" from-field="parameters.contentId" />
					</condition-list>
				</entity-condition>
				<set field="workEffortAssocTypeId" value="${workEffortTypeAssocAndAssocTypeList[0].workEffortAssocTypeId}" />
			</actions>
			<widgets>
				<include-screen name="WorkEffortAssocExtViewManagementWrapperScreen" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortAssocExtViewToManagementWrapperScreen">
		<section>
			<actions>
        		<set field="workEffortAssocTypeDisplayField" value="${bsh: &quot;Y&quot;.equals(context.get(&quot;localeSecondarySet&quot;)) ? &quot;commentsLang&quot; : &quot;comments&quot;}"/>
						
				<set field="parameters.workEffortTypeId" from-field="parameters.workEffortTypeIdTo" default-value="${parameters.workEffortTypeId}" />
				<set field="workEffortAssocExtViewType" value="WEAEVMM003_WorkEffortAssocExtView_${parameters.contentId}" />
				<set field="workEffortAssocExtAssocWeight" value="To" />
					
				<!-- vedi WorkEffortAssocExtViewValue-list-extension.js.ftl -->

				<!-- Bug 4589 selezione multipla -->
				<set field="workEffortIdFrom" default-value="${parameters.toFromWeId}" />
				<entity-one value-field="toFromWe" entity-name="WorkEffort">
					<field-map field-name="workEffortId" from-field="parameters.toFromWeId" />
				</entity-one>
				<set field="workEffortTypeIdFrom" from-field="toFromWe.workEffortTypeId" />

				<!-- Bug 4589 -->
				<entity-condition list="workEffortTypeAssocAndAssocTypeList" entity-name="WorkEffortTypeAssocAndAssocType">
					<condition-list>
						<condition-expr field-name="workEffortTypeId" from-field="parameters.workEffortTypeId" />
						<condition-expr field-name="wefromWetoEnumId" value="WETATO" />
						<condition-expr field-name="workEffortTypeIdRef" from-field="workEffortTypeIdFrom" />
						<condition-expr field-name="contentId" from-field="parameters.contentId" />
					</condition-list>
				</entity-condition>
				<set field="workEffortAssocTypeId" value="${workEffortTypeAssocAndAssocTypeList[0].workEffortAssocTypeId}" />
			</actions>
			<widgets>
				<include-screen name="WorkEffortAssocExtViewManagementWrapperScreen" />
			</widgets>
		</section>
	</screen>
	
	
	<screen name="WorkEffortExtViewAssocWeightManagementScreen">
		<section>
			<condition>
			    <and>
			    	<if-compare field="parameters.contentId" operator="equals" value="WEFLD_WEFROM"/>
			    	<if-compare field="showAssocWeight" operator="equals" value="Y"/>			    	
			    	<not>
			    		<if-empty field="workEffortType.weightControlSum"/>
			    	</not>			    	
			    	<if-compare field="workEffortType.weightControlSum" operator="greater" value="0" type="BigDecimal"/>
			    </and>
			</condition>
			<actions>
				<set field="weightControlSum" from-field="workEffortType.weightControlSum"/>
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/calculateAssocWeightAndkpiScoreWeight.groovy" />				
			</actions>			
			<widgets>
				<platform-specific>
	                <html>
	                    <html-template location="component://workeffortext/webapp/workeffortext/ftl/WorkEffortAssocExtViewAssocWeightTot.ftl"/>
	                </html>
           		</platform-specific>
			</widgets>
		</section>
	</screen>
	
	<screen name="WorkEffortAssocExtViewManagementWrapperScreen">
		<section>
			<actions>
				<set field="workEffortAssocExtViewType" from-field="workEffortAssocExtViewType" default-value="WEAEVMM001_WorkEffortAssocExtView" />
				<entity-one value-field="we" entity-name="WorkEffort" />

				<set field="parameters.workEffortTypeId" from-field="parameters.workEffortTypeId" default-value="${we.workEffortTypeId}" />

				<set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/WorkEffortAssocExtViewValue-list-extension.js.ftl" />

				<!-- Bug 4590 -->
				<entity-one value-field="workEffortType" entity-name="WorkEffortType">
					<field-map field-name="workEffortTypeId" from-field="we.workEffortTypeId" />
				</entity-one>
				<set field="hasPersonFilter" from-field="workEffortType.hasPersonFilter" />
			</actions>
			<widgets>			
			    <section>
			        <condition>
			        	<if-compare field="workEffortAssocExtAssocWeight" operator="equals" value="From"/>
			        </condition>
			       	<widgets>
			       		<section>
							<condition>
								<if-compare field="managementFormType" operator="equals" value="multi" />
							</condition>
							<actions>
								<set field="childManagementFormListName" from-field="childManagementFormListNameLocal" default-value="WorkEffortAssocExtFromViewEvalManagementMultiForm" />
							</actions>
							<widgets>
								<include-screen name="WorkEffortAssocExtViewManagementScreen" />
              	                <include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml" />                           
				                <include-screen name="WorkEffortExtViewAssocWeightManagementScreen" />
                                <container style="clear" />
                                <container id="WorkEffortAssocExtView_PanelPortletContainer_${parameters.contentId}" style="standardPortlet transactionPortlet">
              	                </container>
              	                <platform-specific>
								    <html>
									    <html-template location="component://workeffortext/webapp/workeffortext/ftl/WorkEffortAssocExtViewInsertCatalogChoice.ftl" />
								    </html>
							    </platform-specific>
              	            </widgets>
			                <fail-widgets>
			       				<include-screen name="WorkEffortAssocExtViewManagementScreen" />
			                    <include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml" />
				                <include-screen name="WorkEffortExtViewAssocWeightManagementScreen" />
                                <platform-specific>
								    <html>
									    <html-template location="component://workeffortext/webapp/workeffortext/ftl/WorkEffortAssocExtViewInsertCatalogChoice.ftl" />
								    </html>
							    </platform-specific>
                            </fail-widgets>
		                </section>
			        </widgets>
			        <fail-widgets>
			        	<include-screen name="WorkEffortAssocExtViewManagementScreen" />
				        <include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml" />
				        <include-screen name="WorkEffortExtViewAssocWeightManagementScreen" />
                        <container style="clear" />
                        <container id="WorkEffortAssocExtView_PanelPortletContainer_${parameters.contentId}" style="standardPortlet transactionPortlet">
              	        </container>
              	        <platform-specific>
						    <html>
							    <html-template location="component://workeffortext/webapp/workeffortext/ftl/WorkEffortAssocExtViewInsertCatalogChoice.ftl" />
							</html>
						</platform-specific>			        
				    </fail-widgets>
			   </section>
			</widgets>
		</section>
	</screen>
	
	<screen name="WorkEffortAssocExtFromViewFolderDetailScreen">
		<section>
			<actions>
        		<set field="workEffortAssocTypeDisplayField" value="${bsh: &quot;Y&quot;.equals(context.get(&quot;localeSecondarySet&quot;)) ? &quot;commentsLang&quot; : &quot;comments&quot;}"/>
								  
			    <set field="assA1" from-field="assA1" default-value="${parameters.assA1}"/>
			    <set field="assA2" from-field="assA2" default-value="${parameters.assA2}"/>
			    <set field="assA3" from-field="assA3" default-value="${parameters.assA3}"/>
			    <set field="assB1" from-field="assB1" default-value="${parameters.assB1}"/>
			    <set field="assB2" from-field="assB2" default-value="${parameters.assB2}"/>
			    <set field="assocLevelSameUO" from-field="assocLevelSameUO" default-value="${parameters.assocLevelSameUO}"/>
			    <set field="assocLevelParentUO" from-field="assocLevelParentUO" default-value="${parameters.assocLevelParentUO}"/>
			    <set field="assocLevelChildUO" from-field="assocLevelChildUO" default-value="${parameters.assocLevelChildUO}"/>
			    <set field="assocLevelSisterUO" from-field="assocLevelSisterUO" default-value="${parameters.assocLevelSisterUO}"/>
			    <set field="assocLevelTopUO" from-field="assocLevelTopUO" default-value="${parameters.assocLevelTopUO}"/>
			    <set field="assocLevelSameUOAss" from-field="assocLevelSameUOAss" default-value="${parameters.assocLevelSameUOAss}"/>
			    <set field="assocLevelParentUOAss" from-field="assocLevelParentUOAss" default-value="${parameters.assocLevelParentUOAss}"/>
			    <set field="assocLevelChildUOAss" from-field="assocLevelChildUOAss" default-value="${parameters.assocLevelChildUOAss}"/>
			    <set field="assocLevelSisterUOAss" from-field="assocLevelSisterUOAss" default-value="${parameters.assocLevelSisterUOAss}"/>
			    <set field="assocLevelTopUOAss" from-field="assocLevelTopUOAss" default-value="${parameters.assocLevelTopUOAss}"/>			    
			    <set field="entityNameExtended" from-field="entityNameExtended" default-value="${parameters.entityNameExtended}"/>			
				<set field="workEffortIdValue" from-field="parameters.workEffortIdTo" />
				<set field="childManagementDetailTitle" value="${uiLabelMap.BaseDetail}" />
				
				<set field="extraParams" value="contentId=${parameters.contentId}" />				
			</actions>
			<widgets>
				<include-screen name="WorkEffortAssocExtViewFolderDetailScreen" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortAssocExtToViewFolderDetailScreen">
		<section>
			<actions>
        		<set field="workEffortAssocTypeDisplayField" value="${bsh: &quot;Y&quot;.equals(context.get(&quot;localeSecondarySet&quot;)) ? &quot;commentsLang&quot; : &quot;comments&quot;}"/>			
			
			    <set field="assA1" from-field="assA1" default-value="${parameters.assA1}"/>
			    <set field="assA2" from-field="assA2" default-value="${parameters.assA2}"/>
			    <set field="assA3" from-field="assA3" default-value="${parameters.assA3}"/>
			    <set field="assB1" from-field="assB1" default-value="${parameters.assB1}"/>
			    <set field="assB2" from-field="assB2" default-value="${parameters.assB2}"/>
			    <set field="assocLevelSameUO" from-field="assocLevelSameUO" default-value="${parameters.assocLevelSameUO}"/>
			    <set field="assocLevelParentUO" from-field="assocLevelParentUO" default-value="${parameters.assocLevelParentUO}"/>
			    <set field="assocLevelChildUO" from-field="assocLevelChildUO" default-value="${parameters.assocLevelChildUO}"/>	
			    <set field="assocLevelSisterUO" from-field="assocLevelSisterUO" default-value="${parameters.assocLevelSisterUO}"/>
			    <set field="assocLevelTopUO" from-field="assocLevelTopUO" default-value="${parameters.assocLevelTopUO}"/>
			    <set field="assocLevelSameUOAss" from-field="assocLevelSameUOAss" default-value="${parameters.assocLevelSameUOAss}"/>
			    <set field="assocLevelParentUOAss" from-field="assocLevelParentUOAss" default-value="${parameters.assocLevelParentUOAss}"/>
			    <set field="assocLevelChildUOAss" from-field="assocLevelChildUOAss" default-value="${parameters.assocLevelChildUOAss}"/>	
			    <set field="assocLevelSisterUOAss" from-field="assocLevelSisterUOAss" default-value="${parameters.assocLevelSisterUOAss}"/>	
			    <set field="assocLevelTopUOAss" from-field="assocLevelTopUOAss" default-value="${parameters.assocLevelTopUOAss}"/>			    		    
			    <set field="entityNameExtended" from-field="entityNameExtended" default-value="${parameters.entityNameExtended}"/>			
				<set field="workEffortIdValue" from-field="parameters.workEffortIdFrom" />
				<set field="childManagementDetailTitle" value="${uiLabelMap.BaseDetail}" />
								
				<set field="extraParams" value="contentId=${parameters.contentId}" />
				
				<entity-one value-field="workEffortTypeOriginal" entity-name="WorkEffortType">
					<field-map field-name="workEffortTypeId" from-field="parameters.workEffortTypeIdFrom" />
				</entity-one>
			</actions>
			<widgets>
				<section>
					<condition>
						<if-empty field="workEffortTypeOriginal.childTemplateId"/>
					</condition>
					<widgets>
						<include-screen name="WorkEffortAssocExtViewFolderDetailScreen" />
					</widgets>
					<fail-widgets>
						<section>
							<actions>
								<set field="extraParams" value="searchDate=${parameters.searchDate}&amp;useCache=N" />
			
								<set field="managementPaginationTarget" value="managementContainerOnly"/>
								<set field="managementPaginationAreaId" value="common-container" />
								<set field="parameters.detail" value="N" />
								<set field="parameters.childManagementDetailTitle" value="" />
				
								<set field="workEffortIdValue" from-field="parameters.workEffortIdFrom" />
							</actions>
							<widgets>
								<include-screen name="WorkEffortAssocExtViewFolderDetailScreen" />
							</widgets>
						</section>
					</fail-widgets>
				</section>
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortAssocExtViewFolderDetailScreen">
		<section>
			<actions>
				<entity-one value-field="" entity-name="WorkEffortAssoc" />
				<entity-one value-field="" entity-name="WorkEffortTypeAssoc" />

				<entity-one value-field="we" entity-name="WorkEffort">
					<field-map field-name="workEffortId" from-field="workEffortIdValue" />
				</entity-one>
				<set field="detailJustLoaded" value="Y" />
				<entity-condition list="workEffortWorkEffortAssocAndTypeList" entity-name="WorkEffortWorkEffortAssocAndType">
					<condition-expr field-name="assocWorkEffortIdTo" from-field="we.workEffortId" />
				</entity-condition>
				
				<set field="childManagementDetailTitle" from-field="childManagementDetailTitle" />
				
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/filterListWorkEffortWorkEffortAssocAndType.groovy" />
			</actions>
			<widgets>
				<include-screen name="WorkEffortViewFolderDetailScreen" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortAssocExtViewManagementDetailScreen">
		<section>
			<actions>
				<entity-one value-field="" entity-name="WorkEffortAssoc" />
			</actions>
			<widgets>
				<include-screen name="WorkEffortViewGeneralManagementScreen" />
			</widgets>
		</section>
	</screen>

	<!-- ********************************************************************** -->

	<!-- ********************************************************************** -->
	<!-- ******** WorkEffortReview folders WorkEffortAssocExtView ************* -->
	<!-- ********************************************************************** -->
	<screen name="WorkEffortReviewManagementScreen">
		<section>
			<actions>
				<set field="isMultiWorkEffort" value="true" type="Boolean" />
			</actions>
			<widgets>
				<section>
					<condition>
						<if-compare field="managementFormType" operator="equals" value="" />
					</condition>
					<widgets>
						<section>
							<actions>
								<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/checkWorkEffortReviewReadOnly.groovy" />
								<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/initWorkEffortReviewFields.groovy" />
							</actions>
							<widgets>
								<include-screen name="WorkEffortViewGeneralManagementScreen" />
							</widgets>
						</section>
					</widgets>
					<fail-widgets>
						<section>
							<actions>
								<set field="isReadOnly" from-field="isReadOnly" default-value="false" type="Boolean" />
							</actions>
							<widgets>
								<include-screen name="WorkEffortViewGeneralManagementScreen" />
							</widgets>
						</section>
					</fail-widgets>
				</section>
			</widgets>
		</section>
	</screen>
	<!-- ********************************************************************** -->

	<!-- ********************************************************************** -->
	<!-- * WorkEffortView folders WorkEffortTimeEntryFolderScreen * -->
	<!-- ********************************************************************** -->
	<screen name="WorkEffortTimeEntryManagementScreen">
		<section>
			<actions>
				<set field="rootTree" value="${bsh: org.ofbiz.base.util.UtilValidate.isEmpty(parameters.get(&quot;workEffortId&quot;)) ? &quot;Y&quot; : &quot;&quot;}" />
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getRootLayout.groovy" />			
			</actions>
			<widgets>
			    <section>
			        <widgets>
			            <include-screen name="main-decorator-ui-labels" location="component://workeffortext/widget/screens/CommonScreens.xml" />
			            <container id="WorkEffortTimeEntryPanel_${parameters.contentIdInd}">
							<platform-specific>
								<html>
									<html-template location="component://workeffortext/webapp/workeffortext/ftl/WorkEffortTimeEntry.ftl" />
								</html>
							</platform-specific>
						</container>
			        </widgets>
			    </section>
			</widgets>
		</section>
	</screen>
	<!-- ********************************************************************** -->

	<!-- ********************************************************************** -->
	<!-- **************** WorkEffortView folders WorkEffortMeasure ************ -->
	<!-- ********************************************************************** -->
	<screen name="WorkEffortMeasureManagementScreen">
		<section>
			<actions>
				<set field="fromWEPanel" value="${fromWEPanel}" default-value="true" type="Boolean" />
				<entity-one value-field="we" entity-name="WorkEffort" />
				<entity-one value-field="wt" entity-name="WorkEffortType">
					<field-map field-name="workEffortTypeId" from-field="we.workEffortTypeId" />
				</entity-one>

				<entity-one value-field="wm" entity-name="WorkEffortMeasure" />
				<!-- bug 4790 -->
				<set field="wm.glAccountId" from-field="wm.glAccountId" default-value="${parameters.glAccountId}" />
				<entity-one entity-name="GlAccount" value-field="glAccount">
					<field-map field-name="glAccountId" from-field="wm.glAccountId" />
				</entity-one>
				<set field="periodTypeIdDefault" value="${bsh: import org.ofbiz.base.util.UtilValidate; UtilValidate.isNotEmpty(glAccount) ? (UtilValidate.isNotEmpty(glAccount.get(&quot;periodTypeId&quot;)) ? glAccount.get(&quot;periodTypeId&quot;) : wt.get(&quot;periodTypeId&quot;)) : wt.get(&quot;periodTypeId&quot;) }" />
				<set field="periodTypeId" value="${bsh: &quot;Y&quot;.equals(context.get(&quot;insertMode&quot;)) ? periodTypeIdDefault : context.get(&quot;periodTypeId&quot;)}" />

				<set field="inputEnumId" value="${groovy: org.ofbiz.base.util.UtilValidate.isNotEmpty(glAccount) ? glAccount.get(&quot;inputEnumId&quot;) : &quot;&quot;}" />
				<set field="detailEnumId" value="${groovy: org.ofbiz.base.util.UtilValidate.isNotEmpty(glAccount) ? glAccount.get(&quot;detailEnumId&quot;) : &quot;&quot;}" />

				<!-- il productId del workeffort e' ignorato, il productId del glAccount viene considerato solo se questo e' modello su prodotto
				il suo valore e' recuperato nella row-action della form -->
				<set field="productId" value="${context.productId}" default-value="${parameters.productId}"/>

			 <!-- Carico ftl per listener sul contextlink -->
                <set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/WorkEffortMeasureGlAccount-extension.js.ftl" />
            </actions>
			<widgets>
				<section>
					<condition>
						<and>
							<or>
								<if-has-permission permission="BSCPERFMGR" action="_ADMIN" />
								<if-has-permission permission="CORPERFMGR" action="_ADMIN" />
								<if-has-permission permission="ORGPERFMGR" action="_ADMIN" />
								<if-has-permission permission="EMPLPERFMGR"
									action="_ADMIN" />
							</or>
						</and>
					</condition>
					<actions>
						<set field="managementFormName" value="${managementFormName}Admin" />
					</actions>
					<widgets>
						<include-screen name="WorkEffortViewGeneralManagementScreen" />
                    </widgets>
                    <fail-widgets>
                    	<include-screen name="WorkEffortViewGeneralManagementScreen" />
                    </fail-widgets>
				</section>	
				<section>
					<condition>
						<if-compare operator="equals" value="Y" field="parameters.detail" />
					</condition>
					<actions>
						<set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/WorkEffortMeasure-management-extension.js.ftl" />
					</actions>
					<widgets>
						<include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml" />
					</widgets>
				</section>
				<section>
					<condition>
						<if-compare operator="not-equals" value="Y" field="parameters.detail" />
					</condition>
					<actions>
						<set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/workEffortMeasureValue-list-extension.js.ftl" />
					</actions>
					<widgets>
						<include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml" />
					</widgets>
				</section>
			</widgets>
		</section>
	</screen>

	<!-- ********************************************************************** -->

	<!-- ********************************************************************** -->
	<!-- ******* WorkEffortView folders WorkEffortCommunicationEventView ****** -->
	<!-- ********************************************************************** -->
    <screen name="WorkEffortCommunicationEventViewManagementScreen">
		<section>
			<actions>
				<entity-one value-field="partyFrom" entity-name="Party">
					<field-map field-name="partyId" from-field="partyIdFrom" />
				</entity-one>
				<entity-one value-field="partyTo" entity-name="Party">
					<field-map field-name="partyId" from-field="partyIdTo" />
				</entity-one>
				<entity-one value-field="statusItem" entity-name="StatusItem">
				</entity-one>
				<set field="partyFromName" from-field="partyFrom.partyName" />
				<set field="partyToName" from-field="partyTo.partyName" />
				<set field="statusDescr" from-field="statusItem.description" />
			</actions>
			<widgets>
				<include-screen name="WorkEffortViewGeneralManagementScreen" />
			</widgets>
		</section>
	</screen>
	
                
	<screen name="WorkEffortCommunicationEventViewDetailScreen">
		<section>
			<actions>
				<set field="childManagementDetailTitle" value="${uiLabelMap.BaseDetail}" />
			</actions>
			<widgets>
				<include-screen name="WorkEffortViewFolderDetailScreen" />
			</widgets>
		</section>
	</screen>
	
	<screen name="WorkEffortCommunicationEventViewContextManagementListFormScreen">
		<section>
			<actions>
				<set field="childManagementDetailTitle" value="${uiLabelMap.BaseDetail}" />
				<set field="parameters.childManagementDetailTitle" value="${uiLabelMap.BaseDetail}" />
				<entity-one value-field="" entity-name="WorkEffort">
					<field-map field-name="workEffortId" from-field="parameters.workEffortId" />
				</entity-one>
				<!-- caso 3845, al click su nodo si perde workEffortTypeId -->
				<set field="parameters.workEffortId" value="${parameters.workEffortId}" default-value="${workEffortId}" />
				<set field="parameters.workEffortTypeId" value="${parameters.workEffortTypeId}" default-value="${workEffortTypeId}" />
				<entity-one value-field="workEffort" entity-name="WorkEffort">
					<field-map field-name="workEffortId" from-field="parameters.workEffortId" />
				</entity-one>
				<!-- rimossi default-value perche mai usati <set field="insertExtraParams" value="${insertExtraParams}amp;workEffortTypeId=${parameters.workEffortTypeId}" default-value="workEffortTypeId=${parameters.workEffortTypeId}"/> -->
				<set field="insertExtraParams" value="${insertExtraParams}&amp;weIsTemplate=${parameters.weIsTemplate}&amp;snapshot=${parameters.snapshot}&amp;searchDate=${parameters.searchDate}&amp;workEffortIdRoot=${parameters.workEffortIdRoot}&amp;workEffortTypeId=${parameters.workEffortTypeId}&amp;contentIdInd=${parameters.contentIdInd}&amp;contentIdSecondary=${parameters.contentIdSecondary}&amp;isObiettivo=${parameters.isObiettivo}" />
				<set field="extraParams" value="${extraParams}" default-value="weIsTemplate=${parameters.weIsTemplate}&amp;snapshot=${parameters.snapshot}&amp;searchDate=${parameters.searchDate}&amp;workEffortIdRoot=${parameters.workEffortIdRoot}&amp;rootInqyTree=${parameters.rootInqyTree}&amp;contentIdInd=${parameters.contentIdInd}&amp;contentIdSecondary=${parameters.contentIdSecondary}&amp;isObiettivo=${parameters.isObiettivo}" />
				<set field="arrayListExtraParams" value="weIsTemplate=${parameters.weIsTemplate}&amp;snapshot=${parameters.snapshot}&amp;searchDate=${parameters.searchDate}&amp;workEffortIdRoot=${parameters.workEffortIdRoot}&amp;saveView=N&amp;rootInqyTree=${parameters.rootInqyTree}&amp;contentIdInd=${parameters.contentIdInd}&amp;contentIdSecondary=${parameters.contentIdSecondary}&amp;isObiettivo=${parameters.isObiettivo}" />
			</actions>			
			<widgets>
				<include-screen name="ContextManagementListFormScreen" location="component://base/widget/ManagementScreens.xml" />
			</widgets>
		</section>
	</screen>
	<!-- ********************************************************************** -->


	<!-- ********************************************************************** -->
	<!-- WorkEffortType folders -->
	<!-- ********************************************************************** -->

	<screen name="WorkEffortTypeFolderScreen">
		<section>
			<actions>
				<set field="entityName" value="WorkEffortType" />

				<entity-condition entity-name="WorkEffortType" list="workEffortTypelist">
					<condition-list combine="or">
						<condition-expr field-name="workEffortTypeId" operator="like" value="CTX%" />
						<condition-expr field-name="workEffortTypeId" operator="equals" value="EVENT" />
					</condition-list>
				</entity-condition>
				
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getWorkEffortTypeManagementFormColsTitle.groovy"/>

				<set field="managementFormType" value="" />				
				<set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/WorkEffortType-management-extension.js.ftl" />			
			</actions>
			<widgets>
				<include-screen name="ManagementFormScreen" location="component://base/widget/ManagementScreens.xml" />
				<include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortTypeRootFolderScreen">
		<section>
			<actions>
				<set field="containerName" value="WorkEffortTypeRoot" />
				<set field="childManagement" value="Y" />

				<set field="managementPaginationAreaId" value="child-management-container-${containerName}" />
				<set field="managementPaginationTarget" value="childManagementContainerOnly" />
				<set field="noExecuteChildPerformFind" value="Y" />
			</actions>
			<widgets>
				<include-screen name="ManagementDetailCommonScreen" location="component://base/widget/CommonScreens.xml" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortTypeRootManagementScreen">
		<section>
			<actions>
				<set field="containerName" value="WorkEffortTypeRoot" />
				<entity-one value-field="" entity-name="WorkEffortType" />

				<set field="extraParams" value="containerName=${containerName}" />
			</actions>
			<widgets>
				<include-screen name="ManagementFormScreen" location="component://base/widget/ManagementScreens.xml" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortTypeStatusViewDetailScreen">
		<section>
			<actions>
				<set field="childManagementDetailTitle" value="${uiLabelMap.BaseDetail}" />
				<entity-one entity-name="WorkEffortTypeStatus" value-field="" />
				<entity-one entity-name="StatusItem" value-field="" />
			</actions>
			<widgets>
				<include-screen name="InnerMenuContextManagementBaseScreen" location="component://base/widget/CommonScreens.xml" />
			</widgets>
		</section>
	</screen>
	<!-- ********************************************************************** -->

	<screen name="WorkEffortViewRootFolderScreen">
		<section>
			<actions>
				<set field="containerName" value="WorkEffortViewRoot" />
				<set field="childManagement" value="Y" />

				<set field="managementPaginationAreaId" value="child-management-container-${containerName}" />
				<set field="managementPaginationTarget" value="childManagementContainerOnly" />
				<set field="noExecuteChildPerformFind" value="Y" />
			</actions>
			<widgets>
				<include-screen name="ManagementDetailCommonScreen" location="component://base/widget/CommonScreens.xml" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortViewRootManagementScreen">
		<section>
			<actions>
				<set field="containerName" value="WorkEffortViewRoot" />
				<entity-one value-field="" entity-name="WorkEffort" />
				
				<set field="extraParams" value="containerName=${containerName}" />

				<set field="weAssocTypeId" from-field="workEffortAssocTypeId" />

				<entity-condition entity-name="PartyRoleIntOrgViewAndUserLoginValidPartyRole" list="organizationList">
					<condition-expr field-name="userLoginId" from-field="userLogin.userLoginId" />
				</entity-condition>
				
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/checkWorkEffortActivationStatus.groovy" />
			</actions>
			<widgets>
				<include-screen name="WorkEffortViewGeneralManagementLayoutScreen" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkeffortViewBaseHeaderScreen">
		<section>
			<actions>
				<set field="rootWeId" from-field="parameters.workEffortIdRoot" />
				<entity-one value-field="rootWe" entity-name="WorkEffortView">
					<field-map field-name="workEffortId" from-field="rootWeId" />
				</entity-one>

				<entity-and list="otherLogoList" entity-name="PartyContent">
					<field-map field-name="partyId" from-field="rootWe.organizationId" />
					<field-map field-name="partyContentTypeId" value="IMAGE" />
					<select-field field-name="contentId" />
				</entity-and>

				<entity-one value-field="rootInq" entity-name="WorkEffortRootInqyView">
					<field-map field-name="workEffortId" from-field="rootWeId" />
				</entity-one>

				<set field="referenceDate" from-field="rootInq.referenceDate" />
				<set field="organizationLogoId" from-field="rootWe.weTypeIconId" />
				<set field="otherLogoId" value="${otherLogoId}" default-value="${bsh: import org.ofbiz.base.util.UtilValidate; UtilValidate.isNotEmpty(otherLogoList) ? otherLogoList.get(0).get(&quot;contentId&quot;) : &quot;&quot;}" />
			</actions>
			<widgets>
				<container style="headerContainer">
					<include-form location="component://workeffortext/widget/forms/WorkEffortViewForms.xml" name="WorkEffortViewHeaderForm" />
				</container>
			</widgets>
		</section>
	</screen>

	<screen name="IndividualPerformanceHeaderScreen">
		<section>
			<actions>			
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/retrieveIndividualPerformanceHeaderData.groovy" />

				<set field="jbpmServerEnabled" value="${bsh: org.ofbiz.base.util.UtilProperties.propertyValueEquals(&quot;jbpm_factory.properties&quot;, &quot;enabled&quot;, &quot;Y&quot;)}" type="Boolean" />
				<service service-name="isProcessEnded" result-map="retMap">
					<field-map field-name="workEffortId" from-field="parameters.workEffortIdRoot" />
				</service>

				<set field="isProcessEnded" from-field="retMap.isEnded" />
			</actions>
			<widgets>
				<section>
					<condition>
						<if-compare operator="equals" value="false" field="isProcessEnded" type="Boolean" />
					</condition>
					<actions>
						<service service-name="getOutgoingDestinations" result-map="retMap">
							<field-map field-name="workEffortId" from-field="parameters.workEffortIdRoot" />
						</service>
						<set field="destinationMap" from-field="retMap.destinationMap" />
					</actions>
					<widgets>
						<container style="headerContainer">
							<platform-specific>
								<html>
									<html-template location="component://workeffortext/webapp/workeffortext/ftl/WorkEffortViewIndividualPerformanceHeader.ftl" />
								</html>
							</platform-specific>
						</container>
					</widgets>
					<fail-widgets>
						<container style="headerContainer">
							<platform-specific>
								<html>
									<html-template location="component://workeffortext/webapp/workeffortext/ftl/WorkEffortViewIndividualPerformanceHeader.ftl" />
								</html>
							</platform-specific>
						</container>
					</fail-widgets>
				</section>

			</widgets>
		</section>
	</screen>

	<screen name="OrganizationalAndStrategicPerformanceHeaderScreen">
		<section>
			<actions>			
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/retrieveOrganizationalAndStrategicPerformanceHeaderData.groovy" />

				<set field="jbpmServerEnabled" value="${bsh: org.ofbiz.base.util.UtilProperties.propertyValueEquals(&quot;jbpm_factory.properties&quot;, &quot;enabled&quot;, &quot;Y&quot;)}" type="Boolean" />
				<service service-name="isProcessEnded" result-map="retMap">
					<field-map field-name="workEffortId" from-field="parameters.workEffortIdRoot" />
				</service>
				<set field="isProcessEnded" from-field="retMap.isEnded" />
			</actions>
			<widgets>
				<section>
					<condition>
						<if-compare operator="equals" value="false" field="isProcessEnded" type="Boolean" />
					</condition>
					<actions>
						<service service-name="getOutgoingDestinations" result-map="retMap">
							<field-map field-name="workEffortId" from-field="parameters.workEffortIdRoot" />
						</service>
						<set field="destinationMap" from-field="retMap.destinationMap" />
					</actions>
					<widgets>
						<container style="headerContainer">
							<platform-specific>
								<html>
									<html-template location="component://workeffortext/webapp/workeffortext/ftl/WorkEffortViewOrganizationalAndStrategicPerformanceHeader.ftl" />
								</html>
							</platform-specific>
						</container>
					</widgets>
					<fail-widgets>
						<container style="headerContainer">
							<platform-specific>
								<html>
									<html-template location="component://workeffortext/webapp/workeffortext/ftl/WorkEffortViewOrganizationalAndStrategicPerformanceHeader.ftl" />
								</html>
							</platform-specific>
						</container>
					</fail-widgets>
				</section>
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortViewIndividualPerformanceDashboardScreen">
		<section>
			<actions>
				<set field="parameters.mainDecoratorLocation" value="component://base/widget/EmptyScreens.xml" />
				<set field="parameters.portalPageId" value="${portalPageId}" default-value="GP_WEW_PORTAL" />

				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getRootLayout.groovy" />
				<log message="### content per Layout ${context.layoutContentId}" />
			</actions>
			<widgets>
				<section>
					<condition>
						<if-empty field="context.layoutContentId" />
					</condition>
					<widgets>
						<include-screen name="showPortalPage" location="component://common/widget/PortalPageScreens.xml" />
					</widgets>
					<fail-widgets>
						<content content-id="context.layoutContentId" />
					</fail-widgets>
				</section>
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortViewIndividualPerformanceStandardDashboardScreen">
		<section>
			<actions>
				<set field="parameters.mainDecoratorLocation" value="component://base/widget/EmptyScreens.xml" />
				<set field="parameters.portalPageId" value="${portalPageId}" default-value="GP_WEW_INDIV_STAND" />
				<set field="workEffortId" value="${workEffortId}" default-value="${parameters.workEffortId}" />

				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getRootLayout.groovy" />
				<log message="### content per Layout ${context.layoutContentId}" />
			</actions>
			<widgets>
				<section>
					<condition>
						<if-empty field="context.layoutContentId" />
					</condition>
					<widgets>
						<include-screen name="showPortalPage" location="component://common/widget/PortalPageScreens.xml" />
					</widgets>
					<fail-widgets>
						<content content-id="context.layoutContentId" />
					</fail-widgets>
				</section>
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortViewOrganizationalAndStrategicPerformanceDashboardScreen">
		<section>
			<actions>
				<set field="parameters.mainDecoratorLocation" value="component://base/widget/EmptyScreens.xml" />
				<set field="parameters.portalPageId" value="${portalPageId}" default-value="GP_WEW_PORTAL_2" />
				<set field="workEffortId" value="${workEffortId}" default-value="${parameters.workEffortId}" />
			</actions>
			<widgets>
				<include-screen name="showPortalPage" location="component://common/widget/PortalPageScreens.xml" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortViewOrganizationalAndStrategicPerformanceStandardDashboardScreen">
		<section>
			<actions>
				<set field="parameters.mainDecoratorLocation" value="component://base/widget/EmptyScreens.xml" />
				<set field="parameters.portalPageId" value="${portalPageId}" default-value="GP_WEW_ORG_STAND" />
				<set field="workEffortId" value="${workEffortId}" default-value="${parameters.workEffortId}" />

				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getRootLayout.groovy" />
				<log message="### content per Layout ${context.layoutContentId}" />
			</actions>
			<widgets>
				<section>
					<condition>
						<if-empty field="context.layoutContentId" />
					</condition>
					<widgets>
						<include-screen name="showPortalPage" location="component://common/widget/PortalPageScreens.xml" />
					</widgets>
					<fail-widgets>
						<content content-id="context.layoutContentId" />
					</fail-widgets>
				</section>
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortViewIndividualPerformanceScreen">
		<section>
			<actions>
				<set field="portletTitle" value="${uiLabelMap.WorkEffortViewIdentificationData}" />

				<set field="managementFormName" value="EmptyForm" />
				<set field="managementFormScreenName" value="WorkEffortViewIndividualPerformanceDataScreen" />
				<set field="managementFormScreenLocation" value="component://workeffortext/widget/screens/WorkeffortExtScreens.xml" />
			</actions>
			<widgets>
				<include-screen name="PortletBaseScreen" location="component://workeffortext/widget/screens/CommonScreens.xml" />
				<container style="clear" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortViewIndividualPerformanceDataScreen">
		<section>
			<actions>
				<set field="managementFormName" value="WorkEffortViewIndividualPerformanceManagementForm" />
				<set field="managementFormLocation" value="component://workeffortext/widget/forms/WorkEffortForms.xml" />
			</actions>
			<widgets>
				<section>
					<condition>
						<not>
							<if-empty field="parameters.workEffortIdFrom" />
						</not>
					</condition>
					<actions>
						<set field="workEffortAssocTypeId" from-field="parameters.workEffortAssocTypeId" default-value="${parameters.weHierarchyTypeId}" />

						<set field="fromDate" from-field="parameters.fromDate" type="Timestamp" />

						<entity-one value-field="assoc" entity-name="WorkEffortAssocExtView">
							<field-map field-name="workEffortIdTo" from-field="workEffortId" />
							<field-map field-name="workEffortIdFrom" from-field="parameters.workEffortIdFrom" />
							<field-map field-name="workEffortAssocTypeId" from-field="workEffortAssocTypeId" />
							<field-map field-name="fromDate" from-field="fromDate" />
						</entity-one>
						<set field="assocWeight" from-field="assoc.assocWeight" />
					</actions>
					<widgets>
						<platform-specific>
							<html>
								<html-template location="component://workeffortext/webapp/workeffortext/ftl/WorkEffortViewIndividualPerformancePortlet.ftl" />
							</html>
						</platform-specific>
					</widgets>
					<fail-widgets>
						<platform-specific>
							<html>
								<html-template location="component://workeffortext/webapp/workeffortext/ftl/WorkEffortViewIndividualPerformancePortlet.ftl" />
							</html>
						</platform-specific>
					</fail-widgets>
				</section>
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortViewOrganizationalAndStrategicPerformanceScreen">
		<section>
			<actions>
				<set field="portletTitle" value="${uiLabelMap.WorkEffortViewIdentificationData}" />

				<set field="managementFormName" value="EmptyForm" />
				<set field="managementFormScreenName" value="WorkEffortViewOrganizationalAndStrategicPerformanceDataScreen" />
				<set field="managementFormScreenLocation" value="component://workeffortext/widget/screens/WorkeffortExtScreens.xml" />
			</actions>
			<widgets>
				<include-screen name="PortletBaseScreen" location="component://workeffortext/widget/screens/CommonScreens.xml" />
				<container style="clear" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortViewOrganizationalAndStrategicPerformanceDataScreen">
		<section>
			<actions>
				<set field="managementFormName" value="WorkEffortViewOrganizationalAndStrategicPerformanceManagementForm" />
				<set field="managementFormLocation" value="component://workeffortext/widget/forms/WorkEffortForms.xml" />
				
				<!-- Faccio vedere solo il responsabile -->
				<set field="parameters.onlyResponsible" default-value="Y"/>
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getWorkEffortResponsibleByRole.groovy" />
			</actions>
			<widgets>
				<section>
					<condition>
						<not>
							<if-empty field="parameters.workEffortIdFrom" />
						</not>
					</condition>
					<actions>
						<set field="workEffortAssocTypeId" from-field="parameters.workEffortAssocTypeId" default-value="${parameters.weHierarchyTypeId}" />

						<set field="fromDate" from-field="parameters.fromDate" type="Timestamp" />

						<entity-one value-field="assoc" entity-name="WorkEffortAssocExtView">
							<field-map field-name="workEffortIdTo" from-field="workEffortId" />
							<field-map field-name="workEffortIdFrom" from-field="parameters.workEffortIdFrom" />
							<field-map field-name="workEffortAssocTypeId" from-field="workEffortAssocTypeId" />
							<field-map field-name="fromDate" from-field="fromDate" />
						</entity-one>
						<set field="assocWeight" from-field="assoc.assocWeight" />
					</actions>
					<widgets>
						<platform-specific>
							<html>
								<html-template location="component://workeffortext/webapp/workeffortext/ftl/WorkEffortViewOrganizationalAndStrategicPerformancePortlet.ftl" />
							</html>
						</platform-specific>
					</widgets>
					<fail-widgets>
						<platform-specific>
							<html>
								<html-template location="component://workeffortext/webapp/workeffortext/ftl/WorkEffortViewOrganizationalAndStrategicPerformancePortlet.ftl" />
							</html>
						</platform-specific>
					</fail-widgets>
				</section>
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortCommunicationEventViewPortletScreen">
		<section>
			<actions>
				<set field="portletTitle" value="${uiLabelMap.WorkEffortCommunicationEventView}" />
				<set field="orderBy" value="-entryDate|partyIdFrom|partyIdTo|subject|statusId" />

				<set field="entityName" value="WorkEffortCommunicationEventView" />
				<set field="parentEntityName" value="WorkEffortView" />
				<set field="containerName" from-field="entityName" />
				<set field="managementFormType" value="list" />

				<set field="mantainOldFormName" value="Y" />
				<set field="childManagementFormListLocation" value="component://workeffortext/widget/forms/WorkEffortCommunicationEventViewForms.xml" />
				<set field="childManagementFormListName" value="WorkEffortCommunicationEventViewPortletManagementListForm" />

				<set field="contextManagementScreenName" value="WorkEffortCommunicationEventViewPortletContextScreen" />
				<set field="contextManagementScreenLocation" value="component://workeffortext/widget/screens/WorkeffortExtScreens.xml" />

				<set field="managementScreenName" value="WorkEffortCommunicationEventViewManagementScreen" />
				<set field="managementScreenLocation" value="component://workeffortext/widget/screens/WorkeffortExtScreens.xml" />

				<set field="contextManagementFormEnabled" value="Y" />
				<set field="portletMenuEnabled" value="Y" />
				<set field="portletMenuName" value="ReadOnlyPortletMenuBar" />
				<set field="portletMenuLocation" value="component://base/widget/PortletMenus.xml" />
			</actions>
			<widgets>
				<include-screen name="PortletBaseScreen" location="component://workeffortext/widget/screens/CommonScreens.xml" />
				<container style="clear" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortCommunicationEventViewPortletContextScreen">
		<section>
			<widgets>
				<include-form location="component://workeffortext/widget/forms/WorkEffortCommunicationEventViewForms.xml" name="WorkEffortCommunicationEventViewPortletContextForm" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortCommunicationEventViewPortletDataScreen">
		<section>
			<actions>
				<set field="parentEntityName" value="WorkEffortView" />
				<set field="managementFormLocation" value="component://workeffortext/widget/forms/WorkEffortCommunicationEventViewForms.xml" />
			</actions>
			<widgets>
				<include-screen name="ManagementDetailCommonScreen" location="component://base/widget/CommonScreens.xml" />
			</widgets>
		</section>
	</screen>


	<!-- ********************************************************************** -->
	<!-- WorkEffortMeasure - Activity 1705 -->
	<!-- ********************************************************************** -->

	<screen name="WorkEffortMeasureMainManagementScreen">
		<section>
			<actions>
				<set field="isInsertMode" value="${bsh: &quot;Y&quot;.equals(parameters.get(&quot;insertMode&quot;)) }" type="Boolean" />
				<set field="fromWEPanel" value="false" type="Boolean" />
			</actions>
			<widgets>
				<include-screen name="WorkEffortMeasureManagementScreen" />
				<section>
					<actions>
						<set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/WorkEffortMeasure-management-extension.js.ftl" />
					</actions>
					<widgets>
						<include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml" />
					</widgets>
				</section>
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortMeasRatScManagementScreen">
		<section>
			<actions>
				<set field="isInsertMode" value="${bsh: &quot;Y&quot;.equals(parameters.get(&quot;insertMode&quot;)) }" type="Boolean" />
			</actions>
			<widgets>
				<include-screen name="ManagementListFormScreen" location="component://base/widget/ManagementScreens.xml" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortMeasRatScBackManagementScreen">
		<section>
			<actions>
				<log message="${parameters.interApp}" />
				<!-- carico Js per back interApp 4790 -->
				<set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/GeneralChangeBackInterApp.js.ftl" />
			</actions>
			<widgets>
				<include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml" />
				<include-screen name="ManagementListFormScreen" location="component://base/widget/ManagementScreens.xml" />
			</widgets>
		</section>
	</screen>

	<!-- ============================================= Valori obiettivi Folder (Activity 2168) ================================================= -->

	<screen name="WorkEffortTransactionViewWEMChildManagementFormListScreen">
		<section>
			<actions>
				<set field="glAccountConditionField" from-field="parameters.glAccountConditionField" />

				<set field="displayWeTransAccountIdField" value="false" type="Boolean" />
			</actions>
			<widgets>
				<include-screen name="ManagementFormScreen" location="component://base/widget/ManagementScreens.xml" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortTransactionViewWEVChildManagementFormListScreen">
		<section>
			<actions>
				<set field="displayWeTransAccountIdField" value="true" type="Boolean" />
				<entity-one value-field="we" entity-name="WorkEffort" />
				<set field="organizationId" from-field="we.organizationId" />
				
				<!-- campi del js per caricare descrizione droplist -->
				<set field="weTransCurrencyUomId" from-field="parameters.weMeasureDefaultUomId" />
				<set field="weTransTypeValueId" from-field="parameters.weMeasureTypeValueId" />
				<set field="weTransDecimalScale" from-field="parameters.weMeasureUomDecimalScale" />
				<set field="weTransProductId" from-field="parameters.weMeasureProductId" />

				<set field="periodTypeId" from-field="parameters.weMeasurePeriodTypeId" />

				<set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/WorkEffortTransactionView-multi-extension.js.ftl" />
				
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/checkWorkEffortActivationStatus.groovy" />
				<!-- Force isReadOnly = true if parameters.rootInqyTree = Y or parameters.snapshot -->
                <script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/checkWorkEffortActivationStatus.groovy" />
				
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getValidateValModId.groovy" />
			</actions>
			<widgets>
				<include-screen name="ManagementListFormScreen" location="component://base/widget/ManagementScreens.xml" />
				<include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortTransactionViewWEMManagementScreen">
		<section>
			<actions>
				<set field="insertByWeTransMeasureId" value="true" type="Boolean" />

				<set field="weTransMeasureId" value="${weTransMeasureId}" default-value="${parameters.weTransMeasureId}" />
				<set field="weTransMeasureId" value="${weTransMeasureId}" default-value="${parameters.workEffortMeasureId}" />

				<!-- campi del js per caricare descrizione droplist -->
				<set field="weTransCurrencyUomId" from-field="weTransCurrencyUomId" default-value="${parameters.weMeasureDefaultUomId}" />
				<set field="weTransTypeValueId" from-field="weTransTypeValueId" default-value="${parameters.weMeasureTypeValueId}" />
				<set field="weTransDecimalScale" from-field="weTransDecimalScale" default-value="${parameters.weMeasureUomDecimalScale}" />
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/clearWorkEffortTransactionView.groovy" />

				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getWorkEffortTransactionView.groovy" />

				<entity-one value-field="we" entity-name="WorkEffort">
					<field-map field-name="workEffortId" from-field="parameters.weTransWeId" />
				</entity-one>
				<entity-one value-field="wtt" entity-name="WorkEffortType">
					<field-map field-name="workEffortTypeId" from-field="we.workEffortTypeId" />
				</entity-one>
				<set field="weIsTemplate" from-field="wtt.isTemplate" />
				<!-- bug 5241 -->
				<entity-one value-field="glAccount" entity-name="GlAccount">
					<field-map field-name="glAccountId" from-field="weTransAccountId" />
				</entity-one>
				<set field="glAccountTypeId" from-field="glAccount.glAccountTypeId" />
				<set field="inputEnumId" from-field="glAccount.inputEnumId" />
				<set field="detailEnumId" from-field="glAccount.detailEnumId" />
			</actions>
			<widgets>
				<section>
					<condition>
						<or>
							<if-empty field="parameters.justRegisters" />
							<if-compare operator="not-equals" value="Y" field="parameters.justRegisters" />
						</or>
					</condition>
					<actions>
						<set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/WorkEffortTransactionView-management-extension.js.ftl" />
					</actions>
					<widgets>
						<include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml" />
					</widgets>
				</section>
				<!-- <include-screen name="ManagementFormScreen" location="component://base/widget/ManagementScreens.xml"/> -->
				<include-screen name="WorkEffortViewGeneralManagementScreen" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortTransactionViewManagementContainerOnly">
		<section>
			<actions>
				<set field="weTransMeasureId" value="${weTransMeasureId}" default-value="${parameters.weTransMeasureId}" />
				<set field="weTransMeasureId" value="${weTransMeasureId}" default-value="${parameters.workEffortMeasureId}" />

				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/clearWorkEffortTransactionView.groovy" />

				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getWorkEffortTransactionView.groovy" />

				<set field="parameters.parentEntityName" value="WorkEffortView" />
			</actions>
			<widgets>
				<include-screen name="ManagementContainerOnlyScreen" location="component://workeffortext/widget/screens/CommonScreens.xml" />
			</widgets>
		</section>
	</screen>

	<!-- Dashboard Schede individuali Folder (duplicata per differenze di comportamenti nella form nella testata) -->
	<screen name="WorkEffortTransactionViewPortletScreen">
		<section>
			<actions>
				<set field="portletTitle" value="${uiLabelMap.WorkEffortTransactionViewFolderTabMenu}" />
				<set field="entityName" value="WorkEffortTransactionView" />
				<set field="parentEntityName" value="WorkEffortView" />

				<set field="containerName" from-field="entityName" />
				<set field="managementFormType" value="list" />
				<set field="mantainOldFormName" value="Y" />
				<set field="childManagementFormListName" value="WorkEffortTransactionViewPortletManagementListForm" />
				<set field="childManagementFormListLocation" value="component://workeffortext/widget/forms/WorkEffortMeasureForms.xml" />
				<set field="childManagementFormLocation" value="component://workeffortext/widget/forms/WorkEffortMeasureForms.xml" />

				<set field="contextManagementFormName" value="WorkEffortTransactionViewPortletContextManagementForm" />
				<set field="contextManagementFormLocation" value="component://workeffortext/widget/forms/WorkEffortMeasureForms.xml" />

				<set field="managementScreenName" value="WorkEffortTransactionViewPortletManagementScreen" />
				<set field="managementScreenLocation" value="component://workeffortext/widget/screens/WorkeffortExtScreens.xml" />

				<set field="contextManagementFormEnabled" value="Y" />
				<set field="portletMenuEnabled" value="Y" />
				<set field="portletMenuName" value="${bsh: &quot;Y&quot;.equals(parameters.get(&quot;rootInqyTree&quot;)) ? &quot;ReadOnlyPortletMenuBar&quot; : &quot;&quot;}" />
				<set field="portletMenuLocation" value="component://base/widget/PortletMenus.xml" />
			</actions>
			<widgets>
				<include-screen name="PortletBaseScreen" location="component://workeffortext/widget/screens/CommonScreens.xml" />
				<container style="clear" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortTransactionViewContextManagementScreen">
		<section>
			<actions>
				<set field="insertAreaTarget" value="workEffortTransactionViewManagementContainerOnly" />
				<set field="copyAreaTarget" value="workEffortTransactionViewManagementContainerOnly" />
			</actions>
			<widgets>
				<include-screen name="ContextManagementFormScreen" location="component://base/widget/ManagementScreens.xml" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortTransactionViewPortletManagementScreen">
		<section>
			<actions>
				<set field="entityName" value="WorkEffortTransactionView" />
				<set field="parentEntityName" value="WorkEffortMeasure" />
				<set field="parentManagementFormName" value="WorkEffortTransactionViewParentManagementForm" />
				<set field="parentManagementFormLocation" value="component://workeffortext/widget/forms/WorkEffortMeasureForms.xml" />

				<set field="isReadOnly" value="${bsh: &quot;Y&quot;.equals(parameters.get(&quot;rootInqyTree&quot;))}" type="Boolean" />
				<set field="insertByWeTransMeasureId" value="${bsh: !&quot;Y&quot;.equals(parameters.get(&quot;rootInqyTree&quot;)) &amp;&amp; &quot;Y&quot;.equals(parameters.get(&quot;insertMode&quot;))}" type="Boolean" />

				<set field="managementFormScreenName" value="WorkEffortTransactionViewManagementScreen" />
				<set field="managementFormScreenLocation" value="component://workeffortext/widget/screens/WorkeffortExtScreens.xml" />

				<set field="contextManagementScreenName" value="WorkEffortTransactionViewContextManagementScreen" />
				<set field="contextManagementScreenLocation" value="component://workeffortext/widget/screens/WorkeffortExtScreens.xml" />
			</actions>
			<widgets>
				<section>
					<condition>
						<or>
							<if-empty field="parameters.justRegisters" />
							<if-compare operator="not-equals" value="Y" field="parameters.justRegisters" />
						</or>
					</condition>
					<actions>
						<set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/WorkEffortTransactionView-management-extension.js.ftl" />
					</actions>
					<widgets>
						<include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml" />
					</widgets>
				</section>
				<include-screen name="ManagementDetailCommonScreen" location="component://base/widget/CommonScreens.xml" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortTransactionViewManagementScreen">
		<section>
			<actions>
				<set field="parentEntityName" value="WorkEffortView" />

				<set field="weTransMeasureId" value="${weTransMeasureId}" default-value="${parameters.weTransMeasureId}" />
				<set field="weTransMeasureId" value="${weTransMeasureId}" default-value="${parameters.workEffortMeasureId}" />

				<set field="managementPaginationTarget" value="workEffortTransactionViewManagementContainerOnly" />
				<set field="extraParams" value="managementFormLocation=component://workeffortext/widget/forms/WorkEffortMeasureForms.xml&amp;insertMode=${parameters.insertMode}" />
			</actions>
			<widgets>
				<include-screen name="ManagementFormScreen" location="component://base/widget/ManagementScreens.xml" />
				<!-- <section> -->
				<!-- <condition> -->
				<!-- <and> -->
				<!-- <if-compare operator="equals" value="Y" field="parameters.insertMode"/> -->
				<!-- <not> -->
				<!-- <if-empty field="parameters.workEffortMeasureId"/> -->
				<!-- </not> -->
				<!-- </and> -->
				<!-- </condition> -->
				<!-- <actions> -->
				<!-- <entity-one value-field="workEffortMeasure" entity-name="WorkEffortMeasure"/> -->
				<!-- -->
				<!-- <set field="weTransAccountId" from-field="workEffortMeasure.glAccountId"/> -->
				<!-- <set field="weTransMeasureType" from-field="workEffortMeasure.weMeasureTypeEnumId"/> -->
				<!-- <set field="weTransProductId" from-field="workEffortMeasure.productId"/> -->
				<!-- <set field="weTransEmplPosTypeId" from-field="workEffortMeasure.emplPositionTypeId"/> -->
				<!-- <set field="weTransUomDesc" from-field="workEffortMeasure.uomDescr"/> -->
				<!-- <set field="weTransOtherWorkEffortId" from-field="workEffortMeasure.otherWorkEffortId"/> -->
				<!-- </actions> -->
				<!-- <widgets> -->
				<!-- <include-screen name="ManagementFormScreen" location="component://base/widget/ManagementScreens.xml"/> -->
				<!-- </widgets> -->
				<!-- <fail-widgets> -->
				<!-- <include-screen name="ManagementFormScreen" location="component://base/widget/ManagementScreens.xml"/> -->
				<!-- </fail-widgets> -->
				<!-- </section> -->
			</widgets>
		</section>
	</screen>


	<!-- ============================================================================ Screens activity 2302 - 2314 : Interrogazione risultati obiettivi (WorkEffortAchieveView) =============================================================================== -->
	<screen name="WorkEffortAchieveViewSearchScreen">
		<section>
			<actions>
				<script location="component://workeffortext/script/com/mapsengineering/workeffortext/achieveViewPermissionCheck.groovy" />
			</actions>
			<widgets>
				<include-screen name="SearchFormScreen" location="component://base/widget/SearchScreens.xml" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortAnalysisManagementScreen">
		<section>
			<actions>
				<service service-name="getWorkEffortAnalysisPerContext">
					<field-map field-name="userLogin" from-field="context.userLogin" />
				</service>

				<!-- Inserisco il tachimetro alla lista! -->
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/workEffortAnalysisImage.groovy" />
			</actions>
			<widgets>
				<include-screen name="ManagementFormScreen" location="component://base/widget/ManagementScreens.xml" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortAchieveViewManagementScreen">
		<section>
			<actions>
				<!-- Filtro risultati in base ad un parametro passato dal menu principale -->

				<set field="_SAVED_VIEW_NAME_" value="${bsh: return com.mapsengineering.base.events.SessionHistoryWorker.checkExistenceSaveViewStack(request, response);}" global="true"/>
                <set field="ajaxRequest" value="${bsh: return com.mapsengineering.base.events.SessionHistoryWorker.isLastViewAjaxRequest(request, response);}" global="true"/>
			
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/workEffortAchieveViewFindScript.groovy" />
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/filterPerformFindWorkEffortAchieve.groovy" />

				<set field="analysisType" value="OBJ_AN_LAYOUT" />

				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getAnalysisLayout.groovy" />
			</actions>
			<widgets>
				<section>
					<condition>
						<or>
							<not>
								<if-empty field="OBJ_AN_LAYOUT" />
							</not>
							<if-empty field="analysisContentId" />
							<not>
								<if-empty field="hideMainFolder" />
							</not>
						</or>
					</condition>
					<!-- Bug 4391 punto 2, Nel caso non venisse caricato un record nella tabella WORK_EFFORT_TYPE_CONTENT per la corrispondente tipologia ((Obiettivo, indicatore, dettagli) deve essere proprio nascosto il folder -->
					<actions>
						<!-- Genero tutte le immagini e ne salvo i percorsi nella lista in modo da usarli nell'ftl -->
						<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/createAchieveImages.groovy" />
					</actions>
					<widgets>
						<section>
							<actions>
								<set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/PopulateGenericTooltip.js.ftl" />
								<set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/WorkEffortAchieveViewCleanBreadcrumbs.js.ftl" />
							</actions>
							<widgets>
								<include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml" />
							</widgets>
						</section>
						<platform-specific>
							<html>
								<!-- <html-template location="component://workeffortext/webapp/workeffortext/ftl/WorkEffortAchieveViewList.ftl"/> -->
								<html-template location="component://workeffortext/webapp/workeffortext/ftl/WorkEffortAchieveEmpty.ftl" />
							</html>
						</platform-specific>
					</widgets>
					<fail-widgets>
						<content content-id="${analysisContentId}" />
					</fail-widgets>
				</section>

			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortAchieveViewExtManagementScreen">
		<section>
			<actions>
				<set field="parameters.parentFormNotAllowed" value="Y" />

				<set field="_SAVED_VIEW_NAME_" value="${bsh: return com.mapsengineering.base.events.SessionHistoryWorker.checkExistenceSaveViewStack(request, response);}" global="true"/>
                <set field="ajaxRequest" value="${bsh: return com.mapsengineering.base.events.SessionHistoryWorker.isLastViewAjaxRequest(request, response);}" global="true"/>
			</actions>
			<widgets>
				<include-screen name="WorkEffortAchieveViewManagementScreen" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortAchieveViewExtManagementInnerScreen">
		<section>
			<actions>
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/loadWorkEffortAchieveViewExt.groovy" />
			</actions>
			<widgets>
				<include-screen name="ManagementBaseInnerScreen" location="component://base/widget/BaseScreens.xml" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortAndContentDataResourceExtendedManagementScreen">
		<section>
			<actions>
				<set field="insertAreaId" value="child-management-container-${entityName}"/>
                <set field="selectAreaId" value="child-management-container-${entityName}"/>
                <set field="insertAreaTarget" value="childManagementContainerOnly"/>
                <set field="selectAreaTarget" value="childManagementContainerOnly"/>
				<set field="readOnlyContent" from-field="parameters.readOnlyContent" />
				<set field="cruContent" from-field="parameters.cruContent" />
				<set field="searchDate" from-field="parameters.searchDate" />
				
				<set field="extraParams" value="searchDate=${parameters.searchDate}&amp;useCache=N" />
			
				<set field="managementPaginationAreaId" value="child-management-container-${containerName}" />
				<set field="managementPaginationTarget" value="childManagementContainerOnly" />
				
				<set field="childManagementFormListName" value="WorkEffortAndContentDataResourceExtendedManagementListForm" />
				<set field="childManagementFormListLocation" value="component://workeffortext/widget/forms/WorkEffortViewForms.xml" />
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getWorkEffortAndContentDataResourceExtendedList.groovy" />
			</actions>
			<widgets>
				<include-screen name="ManagementListFormScreen" location="component://base/widget/ManagementScreens.xml" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortAchieveViewExtHeaderScreen">
		<section>
			<actions>
				<entity-one value-field="weAchieve" entity-name="${parameters.parentEntityName}">
					<field-map field-name="workEffortId" from-field="parameters.workEffortId" />
				</entity-one>
				<set field="comments" from-field="weAchieve.comments" />
				<set field="workEffortName" from-field="weAchieve.workEffortName" />
				<set field="estimatedStartDate" from-field="weAchieve.estimatedStartDate" />
				<set field="estimatedCompletionDate" from-field="weAchieve.estimatedCompletionDate" />
				<set field="maxTransactionDate" from-field="weAchieve.maxTransactionDate" />

				<!-- Metto in sessione perché i dati sno usati dalla stampa BIRT AnalisiRisultatiObiettivi -->
				<set field="dummy" value="${bsh: session.setAttribute(&quot;weAchieveHeaderValue&quot;, weAchieve);}" />

				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/createAchieveHeaderImage.groovy" />
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getAttachementForWorkEffortAchieveContext.groovy" />
			</actions>
			<widgets>
				<platform-specific>
					<html>
						<html-template location="component://workeffortext/webapp/workeffortext/ftl/WorkEffortAchieveViewExtHeader.ftl" />
					</html>
				</platform-specific>
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortAchieveViewHeaderScreen">
		<section>
			<actions>
			</actions>
			<widgets>
				<platform-specific>
					<html>
						<html-template location="component://workeffortext/webapp/workeffortext/ftl/WorkEffortAchieveViewHeader.ftl" />
					</html>
				</platform-specific>
			</widgets>
		</section>
	</screen>

	<!-- Specifici 2314 -->
	<screen name="WorkEffortAchieveInqMeasViewManagementScreen">
		<section>
			<actions>
				<set field="analysisType" value="IND_AN_LAYOUT" />

				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getAnalysisLayout.groovy" />

				<!-- Genero tutte le immagini e ne salvo i percorsi nella lista in modo da usarli nell'ftl -->
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/createInqMeasImages.groovy" />
			</actions>
			<widgets>
				<section>
					<condition>
						<or>
							<not>
								<if-empty field="IND_AN_LAYOUT" />
							</not>
							<if-empty field="analysisContentId" />
						</or>
					</condition>
					<widgets>
						<!-- Bug 4391 punto 2, Nel caso non venisse caricato un record nella tabella WORK_EFFORT_TYPE_CONTENT per la corrispondente tipologia ((Obiettivo, indicatore, dettagli) deve essere proprio nascosto il folder -->
						<!-- <section> -->
						<!-- <actions> -->
						<!-- <set field="lookupFormIndicatorTarget" value="${bsh: import org.ofbiz.base.util.UtilValidate; UtilValidate.isEmpty(parameters.get(&quot;userLoginId&quot;)) || !(parameters.get(&quot;userLoginId&quot;).equals(&quot;_NA_&quot;)) ? &quot;lookupFormIndicator&quot; : &quot;lookupFormIndicatorNotAuth&quot;}"/> -->
						<!-- <set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/PopulateGenericTooltip.js.ftl"/> -->
						<!-- <set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/WorkEffortAchieveInqMeasView_LookupIndicator.js.ftl"/> -->
						<!-- </actions> -->
						<!-- <widgets> -->
						<!-- <include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml"/> -->
						<!-- </widgets> -->
						<!-- </section> -->
						<!-- <platform-specific> -->
						<!-- <html> -->
						<!-- <html-template location="component://workeffortext/webapp/workeffortext/ftl/WorkEffortAchieveInqMeasView.ftl"/> -->
						<!-- </html> -->
						<!-- </platform-specific> -->
					</widgets>
					<fail-widgets>
						<content content-id="${analysisContentId}" />
					</fail-widgets>
				</section>

			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortAchieveTransactionViewManagementScreen">
		<section>
			<actions>
				<set field="isReadOnly" value="true" type="Boolean" />

				<set field="insertByWeTransMeasureId" value="true" type="Boolean" />

				<set field="weTransMeasureId" from-field="parameters.weTransMeasureId" />
				<set field="weTransWeId" from-field="parameters.weTransWeId" />

				<entity-one value-field="WEMV" entity-name="WorkEffortMeasureView">
					<field-map field-name="weMeasureId" from-field="weTransMeasureId" />
				</entity-one>
				<set field="weTransOtherMeasGoal" value="${WEMV.weMeasureOtherGoal}" />
				<set field="weTransMeasureType" value="${WEMV.weMeasureMeasureType}" />
				<set field="weTransTypeValueDesc" value="${WEMV.weMeasureTypeValueDesc}" />
				<set field="weTransRoleDesc" value="${WEMV.weMeasureRoleTypeDesc}" />
				<set field="weTransPartyId" value="${WEMV.weMeasurePartyId}" />
				<set field="weTransProductId" value="${WEMV.weMeasureProductId}" />
				<set field="weTransEmplPosTypeId" value="${WEMV.weMeasureEmpPosTypeId}" />
				<set field="weTransUomDesc" value="${WEMV.weMeasureUomDescr}" />
			</actions>
			<widgets>
				<section>
					<condition>
						<or>
							<if-empty field="parameters.justRegisters" />
							<if-compare operator="not-equals" value="Y" field="parameters.justRegisters" />
						</or>
					</condition>
					<actions>
						<set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/WorkEffortTransactionView-management-extension.js.ftl" />
					</actions>
					<widgets>
						<include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml" />
					</widgets>
				</section>
				<include-screen name="ManagementFormScreen" location="component://base/widget/ManagementScreens.xml" />
			</widgets>
		</section>
	</screen>


	<screen name="WorkEffortAchieveMatrixInnerScreen">
		<section>
			<widgets>
				<platform-specific>
					<html>
						<html-template location="component://workeffortext/webapp/workeffortext/ftl/WorkEffortAchieveMatrixView.ftl" />
					</html>
				</platform-specific>
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortAchieveMatrixManagementCommonScreen">
		<section>
			<actions>
				<set field="analysisType" value="DET_AN_LAYOUT" />

				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getAnalysisLayout.groovy" />

				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/achieveChildViewList.groovy" />

				<!-- Lista WorkEffortId (childViewList é generata nel groovy) -->
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/loadChildView.groovy" />
				<!-- crea la mappa per una più comoda costruzionedella tabella nell' ftl -->
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/achieveChildViewMap.groovy" />
			</actions>
			<widgets>
				<section>
					<condition>
						<or>
							<not>
								<if-empty field="DET_AN_LAYOUT" />
							</not>
							<if-empty field="analysisContentId" />
						</or>
					</condition>
					<widgets>
						<!-- Bug 4391 punto 2, Nel caso non venisse caricato un record nella tabella WORK_EFFORT_TYPE_CONTENT per la corrispondente tipologia ((Obiettivo, indicatore, dettagli) deve essere proprio nascosto il folder -->

						<!-- <section> -->
						<!-- <actions> -->
						<!-- <set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/PopulateGenericTooltip.js.ftl"/> -->
						<!-- </actions> -->
						<!-- <widgets> -->
						<!-- <include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml"/> -->
						<!-- </widgets> -->
						<!-- </section> -->
						<!-- <platform-specific> -->
						<!-- <html> -->
						<!-- <html-template location="component://workeffortext/webapp/workeffortext/ftl/WorkEffortAchieveMatrixView.ftl"/> -->
						<!-- </html> -->
						<!-- </platform-specific> -->
					</widgets>
					<fail-widgets>
						<content content-id="${analysisContentId}" />
					</fail-widgets>
				</section>

			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortAchieveMatrixManagementScreen">
		<section>
			<actions>
				<!-- In questo caso listIt é già valorizzato dalla folder principale, non devo estrarre i dati come in WorkEffortAchieveExtMatrixManagementScreen -->
				<set field="childList" from-field="listIt" />
			</actions>
			<widgets>
				<include-screen name="WorkEffortAchieveMatrixManagementCommonScreen" />
			</widgets>
		</section>
	</screen>

	<!-- Matrice di navigazione su screen iniziale -->
	<screen name="WorkEffortAchieveExtMatrixManagementScreen">
		<section>
			<actions>
				<!-- Estrazione dati -->
				<entity-condition list="childList" entity-name="WorkEffortAchieveViewExtGrouped">
					<condition-expr field-name="workEffortIdFrom" from-field="parameters.workEffortId" />
					<order-by field-name="sequenceNum" />
					<order-by field-name="sourceReferenceId" />
					<order-by field-name="workEffortId" />
				</entity-condition>
			</actions>
			<widgets>
				<include-screen name="WorkEffortAchieveMatrixManagementCommonScreen" />
			</widgets>
		</section>
	</screen>

	<!-- ToDo 2104 WorkEffortTransDashView -->

	<screen name="WorkEffortTransDashViewManagementScreen">
		<section>
			<actions>
				<set field="entityName" value="WorkEffortTransactionView" />
				<set field="parentEntityName" value="WorkEffortView" />
				<set field="parentManagementFormLocation" value="component://workeffortext/widget/forms/WorkEffortViewForms.xml" />

				<set field="childManagementFormListName" value="WorkEffortTransactionViewManagementListForm" />
				<set field="childManagementFormListLocation" value="component://workeffortext/widget/forms/WorkEffortMeasureForms.xml" />
				<set field="displayWeTransAccountIdField" value="true" type="Boolean" />
			</actions>
			<widgets>
				<section>
					<condition>
						<if-compare field="parameters.fromPortlet" operator="equals" value="Y" />
					</condition>
					<actions>
						<entity-and list="weTrasactionViews" entity-name="WorkEffortTransactionView">
							<field-map field-name="weTransWeId" from-field="parameters.wtDashWeId" />
							<field-map field-name="weTransMeasureType" from-field="parameters.wtDashMeasureType" />
						</entity-and>
						<set field="listIt" from-field="weTrasactionViews" />
					</actions>
					<widgets>
						<include-screen name="ManagementDetailCommonScreen" location="component://base/widget/CommonScreens.xml" />
					</widgets>
					<fail-widgets>
						<section>
							<actions>
								<entity-and list="weTrasactionViews" entity-name="WorkEffortTransactionView">
									<field-map field-name="weTransWeId" from-field="parameters.wtDashWeId" />
								</entity-and>
								<set field="listIt" from-field="weTrasactionViews" />
								<set field="managementFormType" value="list" />
							</actions>
							<widgets>
								<include-screen name="ManagementListFormScreen" location="component://base/widget/ManagementScreens.xml" />
							</widgets>
						</section>
					</fail-widgets>
				</section>
			</widgets>
		</section>
	</screen>


	<screen name="WorkEffortTransDashViewPortletScreen">
		<section>
			<actions>
				<set field="parentEntityName" value="WorkEffortView" />

				<set field="managementFormType" value="list" />
				<set field="mantainOldFormName" value="Y" />

				<set field="childManagementFormListScreenName" value="WorkEffortTransDashViewPortletListScreenBody" />
				<set field="childManagementFormListScreenLocation" value="component://workeffortext/widget/screens/WorkeffortExtScreens.xml" />

				<set field="noDataLoaded" value="Y" />

				<set field="contextManagementFormName" value="WorkEffortTransDashViewMIS.3ContextManagementForm" />
				<set field="contextManagementFormLocation" value="component://workeffortext/widget/forms/WorkEffortMeasureForms.xml" />

				<set field="managementScreenName" value="WorkEffortTransDashViewManagementScreen" />
				<set field="managementScreenLocation" value="component://workeffortext/widget/screens/WorkeffortExtScreens.xml" />

				<set field="contextManagementFormEnabled" value="Y" />
				<set field="portletMenuEnabled" value="Y" />
				<set field="portletMenuName" value="ReadOnlyPortletMenuBar" />
				<set field="portletMenuLocation" value="component://base/widget/PortletMenus.xml" />

				<set field="attrName" value="containerName, childManagementFormListScreenName, wtDashMeasureType, childManagementFormListName" />
				<script location="component://base/webapp/common/WEB-INF/actions/getPortletAttributes.groovy" />
			</actions>
			<widgets>
				<include-screen name="PortletBaseScreen" location="component://workeffortext/widget/screens/CommonScreens.xml" />
				<container style="clear" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortTransDashViewPortletListScreenBody">
		<section>
			<actions>
				<set field="childManagementFormListLocation" value="component://workeffortext/widget/forms/WorkEffortMeasureForms.xml" />
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getWorkEffortTransDashView.groovy" />
			</actions>
			<widgets>
				<section>
					<condition>
						<if-empty field="listIt" />
					</condition>
					<widgets>
						<label text="${uiLabelMap.BaseNoData}" />
					</widgets>
					<fail-widgets>
						<include-screen name="ManagementListFormScreen" location="component://base/widget/ManagementScreens.xml" />
					</fail-widgets>
				</section>
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortTransDashViewFolderScreen">
		<section>
			<actions>
				<set field="noExecuteChildPerformFind" value="Y" />
			</actions>
			<widgets>
				<include-screen name="ManagementDetailCommonScreen" location="component://base/widget/CommonScreens.xml" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortTransDashViewChildManagementFormListScreen">
		<section>
			<actions>
				<set field="childManagementFormListName" value="WorkEffortTransDashViewManagementListForm" />
				<set field="childManagementFormListLocation" value="component://workeffortext/widget/forms/WorkEffortMeasureForms.xml" />

				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getWorkEffortTransDashView.groovy" />
				<set field="entityName" value="WorkEffortTransDashView${viewIndex}" />
			</actions>
			<widgets>
				<include-screen name="ManagementListFormScreen" location="component://base/widget/ManagementScreens.xml" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortTransDashViewDetailContextScreen">
		<section>
			<actions>
				<set field="extraParams" value="workEffortId=${parameters.workEffortId}" />

				<set field="contextManagementFormScreenName" value="${contextManagementFormScreenName}" default-value="ContextManagementListFormScreen" />
				<set field="contextManagementFormScreenLocation" value="${contextManagementFormScreenLocation}" default-value="component://base/widget/ManagementScreens.xml" />
			</actions>
			<widgets>
				<include-screen name="${contextManagementFormScreenName}" location="${contextManagementFormScreenLocation}" />
			</widgets>
		</section>
	</screen>


	<!-- Sandro: Screen calcolo punteggi -->
	<screen name="WorkEffortMeasureKpiManagementScreen">
		<section>
			<actions>
				<set field="parameters.contentId" value="${parameters.contentId}" default-value="WEFLD_ELAB"/>
				<set field="submitFormScreenName" value="WorkEffortMeasureKpiSubmitFormScreen" /><!-- Usati nell'ftl ScoreCardCalc.ftl per renderizzare la form di submit -->
				<set field="submitFormScreenLocation" value="component://workeffortext/widget/screens/WorkeffortExtScreens.xml" /><!-- Usati nell'ftl ScoreCardCalc.ftl per renderizzare la form di submit -->
				<set field="resultFormScreenName" value="JobLogUserViewScreen" /><!-- Usati nell'ftl ScoreCardCalc.ftl per renderizzare la form di submit -->
				<set field="resultFormScreenLocation" value="component://workeffortext/widget/screens/WorkeffortExtScreens.xml" /><!-- Usati nell'ftl ScoreCardCalc.ftl per renderizzare la form di submit -->
				
				<!-- verifico per messi in base allo stato  -->
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/checkStatusCrudEnum.groovy"/>
			</actions>
			<widgets>
				<platform-specific>
					<html>
						<html-template location="component://workeffortext/webapp/workeffortext/ftl/ScoreCardCalc.ftl" />
					</html>
				</platform-specific>
			</widgets>
		</section>
	</screen>

	<!-- Screen per la form di submit (screen richiamato dentro: ScoreCardCalc.ftl) -->
	<screen name="WorkEffortMeasureKpiSubmitFormScreen">
		<section>
			<actions>			
				<set field="isReadOnly" value="true" type="Boolean" />
				<set field="entityName" value="WorkEffortMeasureKpi" />
				<set field="parentEntityName" value="WorkEffortView" />
				<set field="managementFormName" value="WorkEffortMeasureKpiManagementForm" />
				<set field="managementFormLocation" value="component://workeffortext/widget/forms/WorkEffortViewForms.xml" />

				<entity-one value-field="rootWorkEffort" entity-name="WorkEffort" />
				<entity-one value-field="workEffortTypeStatus" entity-name="WorkEffortTypeStatus">
					<field-map field-name="workEffortTypeRootId" from-field="rootWorkEffort.workEffortTypeId" />
					<field-map field-name="currentStatusId" from-field="rootWorkEffort.currentStatusId" />
				</entity-one>
				<set field="scoreValueType" from-field="workEffortTypeStatus.glFiscalTypeId" />
				
				<set field="glFiscalTypeIdExcellentLimit" value="BUDGET"/>
				<set field="glFiscalTypeIdUpperLimit" value="BUDGET"/>
				<set field="glFiscalTypeIdMediumLimit" value="BUDGET"/>
				<set field="glFiscalTypeIdLowerLimit" value="BUDGET"/>
				<set field="showOtherWeight" value="N"/>
				
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/populateSearchDateAndParams.groovy"/>
    			<set field="thruDate" from-field="parameters.searchDate" />
			</actions>
			<widgets>
				<include-screen name="ManagementFormScreen" location="component://base/widget/ManagementScreens.xml" />
			</widgets>
		</section>
	</screen>

	<!-- Screen per i risultati (screen richiamato dentro: ScoreCardCalc.ftl) -->
	<screen name="JobLogUserViewScreen">
		<section>
			<actions>
			    <property-map resource="CustomUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="CommondataExtUiLabels" map-name="uiLabelMap" global="true" />
				<property-map resource="WorkeffortExtUiLabels" map-name="uiLabelMap" global="true" />

				<set field="jobLogId" from-field="parameters.jobLogId" default-value="${bsh: return org.ofbiz.base.util.UtilHttp.getAttributeMap(request).get(&quot;jobLogId&quot;);}" />
				<entity-condition list="listIt" entity-name="JobLogUserView">
					<condition-list>
						<condition-expr field-name="jobLogId" from-field="jobLogId" />
	                    <condition-expr field-name="logTypeEnumId" operator="not-equals" value="LOG_DEBUG"/>
                    </condition-list>
                    <order-by field-name="jobLogLogId" />
				</entity-condition>
			</actions>
			<widgets>
				<platform-specific>
					<html>
						<html-template location="component://workeffortext/webapp/workeffortext/ftl/ScoreCardCalcResult.ftl" />
					</html>
				</platform-specific>
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortNoteAndDataIsObiettivoManagementFormScreen">
		<section>
			<actions>
				<entity-one value-field="" entity-name="WorkEffortNoteAndData" />
				<entity-one entity-name="WorkEffort" value-field="workEffort" />
				<set field="workEffortTypeId" from-field="workEffort.workEffortTypeId" />
				<set field="isObiettivo" value="Y" />				
				<set field="parameters.noteContentId" value="${parameters.noteContentId}" default-value="${context.noteContentId}"/>
			</actions>
			<widgets>
				<include-screen name="WorkEffortNoteAndDataExtendsManagementFormScreen" />
			</widgets>
		</section>
	</screen>


	<screen name="WorkEffortNoteAndDataManagementFormScreen">
		<section>
			<actions>
                <log message="######### WorkEffortNoteAndDataManagementFormScreen "/>
				<entity-one value-field="" entity-name="WorkEffortNoteAndData" />
				<entity-one entity-name="WorkEffort" value-field="workEffort" />
				<set field="workEffortTypeId" from-field="workEffort.workEffortTypeId" />
				<set field="isObiettivo" value="N" />
				<set field="isPosted" from-field="isPosted" default-value="${parameters.isPosted}" />
				<set field="isReadOnly" from-field="parameters.isReadOnly" type="Boolean"/>
				<set field="parameters.noteContentId" value="${parameters.noteContentId}" default-value="${context.noteContentId}"/>		
			</actions>
			<widgets>
				<include-screen name="WorkEffortNoteAndDataExtendsManagementFormScreen" />
			</widgets>
		</section>

	</screen>
	<screen name="WorkEffortNoteAndDataExtendsManagementFormScreen">
		<section>
			<widgets>
				<section>
					<condition>
						<if-compare operator="equals" value="Y" field="isHtml" />
					</condition>
					<actions>
						<log message="WorkEffortNoteAndDataExtendsManagementFormScreen isHtml"/>
                        <entity-condition list="defaultStyleList" entity-name="Content">
							<condition-expr field-name="contentTypeId" value="HTML_STYLE" />
						</entity-condition>

						<entity-one value-field="w" entity-name="WorkEffort">
							<field-map field-name="workEffortId" />
						</entity-one>
						<entity-one value-field="wta" entity-name="WorkEffortTypeAttr">
							<field-map field-name="workEffortTypeId" from-field="w.workEffortTypeId" />
							<field-map field-name="attrName" from-field="noteName" />
						</entity-one>

						<entity-one value-field="style1" entity-name="Content">
							<field-map field-name="contentId" from-field="wta.style1" />
						</entity-one>
						<entity-one value-field="style2" entity-name="Content">
							<field-map field-name="contentId" from-field="wta.style2" />
						</entity-one>
						<entity-one value-field="style3" entity-name="Content">
							<field-map field-name="contentId" from-field="wta.style3" />
						</entity-one>

						<set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/elrte_customformatlist_button.js.ftl" />
						<set field="layoutSettings.javaScriptBlocks[]" value="component://base/webapp/resources/ftl/register-rich-textarea.js.ftl" />
						<set field="textAreaId" value="WorkEffortNoteAndDataManagementForm_noteInfo" />
						<set field="textAreaIdLang" value="WorkEffortNoteAndDataManagementForm_noteInfoLang" />
					</actions>
					<widgets>
						<include-screen name="WorkEffortViewGeneralManagementScreen" />
						<include-screen name="loadRichTextAreaEditor" location="component://base/widget/CommonScreens.xml" />
						<include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml" />
					</widgets>
					<fail-widgets>
						<include-screen name="WorkEffortViewGeneralManagementScreen" />
					</fail-widgets>
				</section>
			</widgets>
		</section>
	</screen>


	<screen name="WorkEffortNoteAndDataChildManagementFormScreen">
		<section>
			<actions>
                <log message="######### WorkEffortNoteAndDataChildManagementFormScreen"/>
                <script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getWorkEffortNoteAndDataFormColsTitle.groovy"/>
                
                <!-- aggiunto entityOne perche' viene usato nella form per stabilire il nome della nota -->
                <entity-one entity-name="WorkEffort" value-field="workEffort" />
				<set field="workEffortTypeId" from-field="workEffort.workEffortTypeId" />
            </actions>
			<widgets>
			    <include-screen name="WorkEffortViewGeneralManagementScreen" />
                <container id="WorkEffortNoteAndData_PanelPortletContainer_${parameters.noteContentId}" style="standardPortlet transactionPortlet">
                </container>
                <include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml"/>    
			</widgets>
		</section>
	</screen>
    
    <!-- panel usato per visualizzare il dettaglio della nota sotto la form multi -->
    <screen name="ReloadWorkEffortNoteAndDataPanelScreen">
        <section>
            <actions>
                <set field="managementFormName" value="WorkEffortNoteAndDataManagementFormPanel"/>
                <set field="managementFormLocation" value="component://workeffortext/widget/forms/WorkEffortViewForms.xml"/>
                
                <set field="managementFormScreenName" value="WorkEffortNoteAndDataManagementFormScreen"/>
                <set field="managementFormScreenLocation" value="component://workeffortext/widget/screens/WorkeffortExtScreens.xml"/>
            </actions>
            <widgets>
                <include-screen name="main-decorator-ui-labels" location="component://workeffortext/widget/screens/CommonScreens.xml"/>
                <platform-specific>
                    <html>
                        <html-template location="component://workeffortext/webapp/workeffortext/ftl/WorkEffortNoteAndDataPanelNoteInfo.ftl"/>
                    </html>
                </platform-specific>
                <container style="clear"/>
            </widgets>
        </section>
    </screen>

	<screen name="WorkEffortTypeTypeContextManagementFormScreen">
		<section>
			<actions>
				<set field="insertExtraParams" value="isTemplate=${isTemplate}" />
			</actions>
			<widgets>
				<include-screen name="ContextManagementFormScreen" location="component://base/widget/ManagementScreens.xml" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortTypeTypeChildManagementFormListScreen">
		<section>
			<actions>
				<set field="isTemplate" from-field="parameters.isTemplate" />
				<set field="extraParams" value="isTemplate=${isTemplate}" />
			</actions>
			<widgets>
				<include-screen name="ManagementListFormScreen" location="component://base/widget/ManagementScreens.xml" />
			</widgets>
		</section>
	</screen>
	
	<screen name="WorkEffortTypeAssocManagementScreen">
        <section>
            <actions>
                <script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getWorkEffortTypeAssocFormColsTitle.groovy"/>
            </actions>
            <widgets>
                <include-screen name="ManagementListFormScreen" location="component://base/widget/ManagementScreens.xml"/>
            </widgets>
        </section>
    </screen>

	<screen name="WorkEffortTypeContentFolderChildManagementFormListScreen">
		<section>
			<actions>
                <script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getWorkEffortTypeFolderFormColsTitle.groovy"/>
			
				<set field="contentIdStart" value="WE_FOLDER" />
				<set field="contentAssocTypeId" value="FOLDER_OF" />
				<set field="weTypeContentTypeId" value="FOLDER" />
			</actions>
			<widgets>
				<include-screen name="WorkEffortTypeContentChildManagementFormListScreen" />
			</widgets>
		</section>
	</screen>
	<screen name="WorkEffortTypeContentPrintChildManagementFormListScreen">
		<section>
			<actions>
                <script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getWorkEffortTypePrintFormColsTitle.groovy"/>
			
				<set field="contentIdStart" value="WE_PRINT" />
				<set field="contentAssocTypeId" value="REP_PERM" />
				<set field="weTypeContentTypeId" value="REPORT" />
			</actions>
			<widgets>
				<include-screen name="WorkEffortTypeContentChildManagementFormListScreen" />
			</widgets>
		</section>
	</screen>
	<screen name="WorkEffortTypeContentChildManagementFormListScreen">
		<section>
			<!-- <actions> -->
			<!-- <set field="extraParams" value="contentIdStart=${contentIdStart}&amp;contentAssocTypeId=${contentAssocTypeId}&amp;weTypeContentTypeId=${weTypeContentTypeId}"/> -->
			<!-- </actions> -->
			<widgets>
				<include-screen name="ManagementListFormScreen" location="component://base/widget/ManagementScreens.xml" />
			</widgets>
		</section>
	</screen>
	<!-- Unità Finanziarie -->
	<screen name="WorkEffortMeasureResourceManagementScreen">
		<section>
			<actions>
				<set field="glAccountConditionField" value="workEffortTypeIdRes" />
				<set field="purposeTypeEnumId" value="PT_FINANCIAL" />

				<set field="accountTypeEnumId" value="RESOURCE" />
			</actions>
			<widgets>
				<include-screen name="WorkEffortMeasureManagementScreen" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortTransactionViewResourceManagementScreen">
		<section>
			<actions>
				<set field="glAccountConditionField" value="workEffortTypeIdRes" />
				<set field="accountTypeEnumId" value="RESOURCE" />
			</actions>
			<widgets>
				<include-screen name="WorkEffortTransactionViewWEMManagementScreen" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortTransactionViewWEVResourceChildManagementFormListScreen">
		<section>
			<actions>
				<set field="glAccountConditionField" value="workEffortTypeIdRes" />
			</actions>
			<widgets>
				<include-screen name="WorkEffortTransactionViewWEVChildManagementFormListScreen" />
			</widgets>
		</section>
	</screen>

    <screen name="WorkEffortMeasureViewIndicatorManagementScreen">
        <section>
            <actions>
                <set field="insertExtraParams" value="detailEnabled=${detailEnabled}" />
                <set field="arrayListExtraParams" value="detailEnabled=${detailEnabled}" />
                <set field="extraParams" value="detailEnabled=${detailEnabled}" />
                
                <set field="contentIdSecondary" from-field="parameters.contentIdSecondary" />
                <set field="glAccountConditionField" value="workEffortTypeIdInd" />
                <set field="purposeTypeEnumId" value="PT_INDICATOR" />
                <set field="contentIdInd" from-field="contentIdInd" default-value="${parameters.contentIdInd}"/>
                <set field="accountTypeEnumId" value="INDICATOR" />

                <!-- 4901 punto 2 -->
                <entity-one value-field="g" entity-name="GlAccount" />
                <entity-condition entity-name="WorkEffortMeasureProduct" list="workEffortMeasureProductList">
                    <condition-list>
                        <condition-expr field-name="glAccountId" from-field="glAccountId" />
                        <condition-expr field-name="productId" from-field="productId" />
                    </condition-list>
                </entity-condition>
                <set field="workEffortMeasureProduct" from-field="workEffortMeasureProductList[0]" type="Object" />
                <set field="prodUomDescr" value="${workEffortMeasureProduct.uomDescr}" />
                <set field="prodUomDescrLang" value="${workEffortMeasureProduct.uomDescrLang}" />

                <set field="glAccountDescription" value="${g.accountCode} - ${bsh: import org.ofbiz.base.util.UtilValidate; UtilValidate.isNotEmpty(context.get(&quot;prodUomDescr&quot;)) ? context.get(&quot;prodUomDescr&quot;) : UtilValidate.isNotEmpty(g) ? g.get(&quot;accountName&quot;) : &quot;&quot;}" />
                <set field="glAccountDescriptionLang" value="${g.accountCode} - ${bsh: import org.ofbiz.base.util.UtilValidate; UtilValidate.isNotEmpty(context.get(&quot;prodUomDescrLang&quot;)) ? context.get(&quot;prodUomDescrLang&quot;) : UtilValidate.isNotEmpty(g) ? g.get(&quot;accountNameLang&quot;) : &quot;&quot;}" />                
                <set field="detectOrgUnitIdFlag" from-field="g.detectOrgUnitIdFlag"/>
            
                <set field="fromWEPanel" value="${fromWEPanel}" default-value="true" type="Boolean" />
                <entity-one value-field="wt" entity-name="WorkEffortAndTypeView">
                    <field-map field-name="workEffortId" from-field="workEffortId" />
                </entity-one>

                <entity-one value-field="wm" entity-name="WorkEffortMeasure" />
                <!-- bug 4790 -->
                <set field="wm.glAccountId" from-field="wm.glAccountId" default-value="${parameters.glAccountId}" />
                <entity-one entity-name="GlAccount" value-field="glAccount">
                    <field-map field-name="glAccountId" from-field="wm.glAccountId" />
                </entity-one>
                <set field="periodTypeIdDefault" value="${bsh: import org.ofbiz.base.util.UtilValidate; UtilValidate.isNotEmpty(glAccount) ? (UtilValidate.isNotEmpty(glAccount.get(&quot;periodTypeId&quot;)) ? glAccount.get(&quot;periodTypeId&quot;) : wt.get(&quot;periodTypeId&quot;)) : wt.get(&quot;periodTypeId&quot;) }" />
                <set field="periodTypeId" value="${bsh: &quot;Y&quot;.equals(context.get(&quot;insertMode&quot;)) ? periodTypeIdDefault : context.get(&quot;periodTypeId&quot;)}" />

                <set field="inputEnumId" value="${groovy: org.ofbiz.base.util.UtilValidate.isNotEmpty(glAccount) ? glAccount.get(&quot;inputEnumId&quot;) : &quot;&quot;}" />
                <set field="detailEnumId" value="${groovy: org.ofbiz.base.util.UtilValidate.isNotEmpty(glAccount) ? glAccount.get(&quot;detailEnumId&quot;) : &quot;&quot;}" />

                <set field="productId" value="${context.productId}" default-value="${parameters.productId}"/>
                
                <set field="managementFormName" value="WorkEffortMeasureViewIndicatorManagementForm" />
                <!-- Force isReadOnly = true if parameters.rootInqyTree = Y or parameters.snapshot -->
                <script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/checkWorkEffortActivationStatus.groovy" />
                <script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getWorkEffortMeasureViewIndicatorColsTitle.groovy" />
            </actions>
            <widgets>
                <section>
                    <condition>
                        <if-compare operator="equals" value="ALL" field="parameters.detailEnabled"/>
                    </condition>
                    <actions>
                        <set field="managementFormName" value="${managementFormName}Admin" />
                    </actions>
                    <widgets>
                        <include-screen name="WorkEffortViewGeneralManagementScreen" />
                    </widgets>
                    <fail-widgets>
                        <include-screen name="WorkEffortViewGeneralManagementScreen" />
                    </fail-widgets>
                </section>
            </widgets>
        </section>
    </screen>
    
	<screen name="WorkEffortMeasureIndicatorManagementScreen">
		<section>
			<actions>
				<set field="contentIdSecondary" from-field="parameters.contentIdSecondary" />
				<set field="glAccountConditionField" value="workEffortTypeIdInd" />
				<set field="purposeTypeEnumId" value="PT_INDICATOR" />
                <set field="contentIdInd" from-field="contentIdInd" default-value="${parameters.contentIdInd}"/>
				<set field="accountTypeEnumId" value="INDICATOR" />
				<entity-one value-field="wEffort" entity-name="WorkEffort" />
				<!-- <set field="productId" from-field="productId" default-value="${wEffort.productId}"/> -->

				<!-- 4901 punto 2 -->
				<entity-one value-field="g" entity-name="GlAccount" />
				<entity-condition entity-name="WorkEffortMeasureProduct" list="workEffortMeasureProductList">
					<condition-list>
						<condition-expr field-name="glAccountId" from-field="glAccountId" />
						<condition-expr field-name="productId" from-field="productId" />
					</condition-list>
				</entity-condition>
				<set field="workEffortMeasureProduct" from-field="workEffortMeasureProductList[0]" type="Object" />
				<set field="prodUomDescr" value="${workEffortMeasureProduct.uomDescr}" />
				<set field="prodUomDescrLang" value="${workEffortMeasureProduct.uomDescrLang}" />

				<set field="glAccountDescription" value="${g.accountCode} - ${bsh: import org.ofbiz.base.util.UtilValidate; UtilValidate.isNotEmpty(context.get(&quot;prodUomDescr&quot;)) ? context.get(&quot;prodUomDescr&quot;) : UtilValidate.isNotEmpty(g) ? g.get(&quot;accountName&quot;) : &quot;&quot;}" />
				<set field="glAccountDescriptionLang" value="${g.accountCode} - ${bsh: import org.ofbiz.base.util.UtilValidate; UtilValidate.isNotEmpty(context.get(&quot;prodUomDescrLang&quot;)) ? context.get(&quot;prodUomDescrLang&quot;) : UtilValidate.isNotEmpty(g) ? g.get(&quot;accountNameLang&quot;) : &quot;&quot;}" />		        
		        <set field="detectOrgUnitIdFlag" from-field="g.detectOrgUnitIdFlag"/>
            
                <!-- Carico la finalita -->
                <entity-one value-field="workEffortPurpose" entity-name="WorkEffortTypeContent">
                    <field-map field-name="workEffortTypeId" from-field="wEffort.workEffortTypeId"/>
                    <field-map field-name="contentId" from-field="parameters.contentIdInd"/>
                </entity-one>
                <set field="workEffortPurposeTypeIdInd" from-field="workEffortPurpose.workEffortPurposeTypeId"/>
                
                <script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getWemFromPanelColsTitle.groovy"/>
                <script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getWorkEffortMeasureViewIndicatorColsTitle.groovy" />                               
      		</actions>
			<widgets>
				
				<include-screen name="WorkEffortMeasureManagementScreen" />				
				<include-screen name="WorkEffortExtViewkpiScoreWeightTotWithoutLayoutManagementScreen" />
				
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortTransactionViewIndicatorManagementScreen">
		<section>
			<actions>
                <log message="WorkEffortTransactionViewIndicatorManagementScreen " />
				<set field="glAccountConditionField" value="workEffortTypeIdInd" />
				<set field="contentIdInd" from-field="contentIdInd" default-value="${parameters.contentIdInd}"/>
                <set field="accountTypeEnumId" value="INDICATOR" />

				<set field="weTransId" from-field="weTransId" default-value="${parameters.weTransId}"/>
                <set field="weTransEntryId" from-field="weTransEntryId" default-value="${parameters.weTransEntryId}"/>
                <set field="weTransAccountId" from-field="weTransAccountId" default-value="${parameters.weTransAccountId}"/>
                <!-- 4901 punto 2 -->
				<entity-one value-field="te" entity-name="AcctgTransEntry">
					<field-map field-name="acctgTransId" from-field="weTransId"/>
					<field-map field-name="acctgTransEntrySeqId" from-field="weTransEntryId" />
				</entity-one>

				<entity-condition entity-name="WorkEffortMeasureProduct" list="workEffortMeasureProductList">
					<condition-list>
						<condition-expr field-name="glAccountId" from-field="weTransAccountId" />
						<condition-expr field-name="productId" from-field="te.productId" />
					</condition-list>
				</entity-condition>
				<set field="workEffortMeasureProduct" from-field="workEffortMeasureProductList[0]" type="Object" />
				<set field="prodUomDescr" value="${workEffortMeasureProduct.uomDescr}" />
				
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getWorkEffortTransactionViewPortletColsTitle.groovy"/>
			</actions>
			<widgets>
				<include-screen name="WorkEffortTransactionViewWEMManagementScreen" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortTransactionViewWEVIndicatorChildManagementFormListScreen">
		<section>
			<actions>
				<set field="glAccountConditionField" value="workEffortTypeIdInd" />
                <!-- Force isReadOnly = true if parameters.rootInqyTree = Y or parameters.snapshot -->
                <script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/checkWorkEffortActivationStatus.groovy" />
			</actions>
			<widgets>
				<include-screen name="WorkEffortTransactionViewWEVChildManagementFormListScreen" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortLoadPrintBirtList">
		<section>
			<actions>
			    <property-map resource="CustomUiLabels" map-name="uiLabelMap" global="true"/>
			    <property-map resource="CustomUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="WorkeffortExtUiLabels" map-name="uiLabelMap" global="true" />
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getWorkEffortPrintBirtList.groovy" />
			</actions>
			<widgets>
				<include-screen name="LoadPrintBirt" location="component://base/widget/CommonScreens.xml" />
			</widgets>
		</section>
	</screen>
	
	<screen name="WorkEffortLoadTypePrintBirtList">
		<section>
			<actions>
				<property-map resource="WorkeffortExtUiLabels" map-name="uiLabelMap" global="true" />
			</actions>
			<widgets>
			    <include-screen name="LoadTypePrintBirt" location="component://base/widget/CommonScreens.xml" />
			</widgets>
		</section>
	</screen>

   	<screen name="WorkEffortLoadParamsPrintBirtList">
        <section>
            <actions>
                <property-map resource="WorkeffortExtUiLabels" map-name="uiLabelMap" global="true" />
            </actions>
            <widgets>
                <include-screen name="LoadParamsPrintBirt" location="component://base/widget/CommonScreens.xml" />
            </widgets>
        </section>
    </screen>
	
	<screen name="WorkEffortLoadPrintBirt">
		<section>
			<actions>
			    <property-map resource="CustomUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="WorkeffortExtUiLabels" map-name="uiLabelMap" global="true" />
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getWorkEffortPrintBirtList.groovy" />

				<set field="workEffortLoadPrintBirtScreenName" value="${workEffortLoadPrintBirtScreenName}" default-value="ExtraParametersLoadPrintBirt" />
				<set field="workEffortLoadPrintBirtScreenLocation" value="${workEffortLoadPrintBirtScreenLocation}" default-value="component://base/widget/CommonScreens.xml" />
			</actions>
			<widgets>
				<include-screen name="${workEffortLoadPrintBirtScreenName}" location="${workEffortLoadPrintBirtScreenLocation}" />
			</widgets>
		</section>
	</screen>
	<screen name="PopupWorkEffortLoadPrintBirt">
		<section>
			<actions>
				<set field="workEffortLoadPrintBirtScreenName" value="PopupLoadPrintBirt" />
				<set field="workEffortLoadPrintBirtScreenLocation" value="component://base/widget/CommonScreens.xml" />
			</actions>
			<widgets>
				<include-screen name="WorkEffortLoadPrintBirt" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortAnalysisContextManagementListFormScreen">
		<section>
			<actions>
				<set field="entityName" value="WorkEffortAchieveView" />
				<set field="selectAreaTarget" value="workEffortAchieveViewManagementContainerOnly" />
				<set field="selectAreaId" value="common-container" />

				<set field="backAreaId" from-field="selectAreaId" />
				<set field="managementFormLocation" value="component://workeffortext/widget/forms/WorkEffortAchieveForms.xml" />
				<set field="orderBy" value="sourceReferenceId|workEffortId" />

				<set field="currentContextManagementFormName" value="WorkEffortAnalysisContextMultiExtendedManagementForm" />
				<set field="currentContextManagementFormLocation" value="component://workeffortext/widget/forms/WorkEffortAchieveForms.xml" />
			</actions>
			<widgets>
				<include-screen name="ContextManagementListFormScreen" location="component://base/widget/ManagementScreens.xml" />
			</widgets>
		</section>
	</screen>

	<!-- ******************************************************* -->
	<screen name="WorkEffortAchieveViewMenuBarScreen">
		<section>
			<actions>
				<set field="actionMenuName" value="${bsh: import org.ofbiz.base.util.UtilValidate; UtilValidate.isNotEmpty(parameters.get(&quot;userLoginId&quot;)) ? (!(parameters.get(&quot;userLoginId&quot;).equals(&quot;_NA_&quot;)) ? (&quot;Y&quot;.equals(parameters.get(&quot;detail&quot;)) ? &quot;WorkEffortAchieveViewDetailMenuBar&quot; : &quot;WorkEffortAchieveViewMenuBar&quot;) : (&quot;Y&quot;.equals(parameters.get(&quot;detail&quot;)) ? &quot;WorkEffortAchieveViewDetailMenuBarPublic&quot; : &quot;WorkEffortAchieveViewMenuBarPublic&quot;)) : (&quot;Y&quot;.equals(parameters.get(&quot;detail&quot;)) ? &quot;WorkEffortAchieveViewDetailMenuBarPublic&quot; : &quot;WorkEffortAchieveViewMenuBarPublic&quot;)}" />
				<set field="actionMenuLocation" value="${bsh: import org.ofbiz.base.util.UtilValidate; UtilValidate.isNotEmpty(parameters.get(&quot;userLoginId&quot;)) ? (!(parameters.get(&quot;userLoginId&quot;).equals(&quot;_NA_&quot;)) ? &quot;component://workeffortext/widget/menus/WorkeffortExtMenus.xml&quot; : &quot;component://workeffortext/widget/menus/WorkeffortExtMenusPublic.xml&quot;) : &quot;component://workeffortext/widget/menus/WorkeffortExtMenusPublic.xml&quot;}" />
				<!--<set field="actionMenuLocation" value="component://workeffortext/widget/menus/WorkeffortExtMenus.xml"/> -->
			</actions>
			<widgets>
				<include-screen name="ActionMenu" location="component://base/widget/MenuScreens.xml" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortAchieveViewAttachmentMenuBarScreen">
		<section>
			<actions>
				<set field="actionMenuName" value="${bsh: import org.ofbiz.base.util.UtilValidate; UtilValidate.isNotEmpty(parameters.get(&quot;userLoginId&quot;)) ? (!(parameters.get(&quot;userLoginId&quot;).equals(&quot;_NA_&quot;)) ? &quot;WorkEffortAchieveViewAttachemntMenuBar&quot; : &quot;WorkEffortAchieveViewMenuBarPublic&quot;) : &quot;WorkEffortAchieveViewMenuBarPublic&quot;}" />
				<set field="actionMenuLocation" value="${bsh: import org.ofbiz.base.util.UtilValidate; UtilValidate.isNotEmpty(parameters.get(&quot;userLoginId&quot;)) ? (!(parameters.get(&quot;userLoginId&quot;).equals(&quot;_NA_&quot;)) ? &quot;component://workeffortext/widget/menus/WorkeffortExtMenus.xml&quot; : &quot;component://workeffortext/widget/menus/WorkeffortExtMenusPublic.xml&quot;) : &quot;component://workeffortext/widget/menus/WorkeffortExtMenusPublic.xml&quot;}" />
			</actions>
			<widgets>
				<include-screen name="ActionMenu" location="component://base/widget/MenuScreens.xml" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortAchieveViewMenuListBarScreen">
		<section>
			<actions>
				<set field="actionMenuName" value="${bsh: import org.ofbiz.base.util.UtilValidate; UtilValidate.isNotEmpty(parameters.get(&quot;userLoginId&quot;)) ? (!(parameters.get(&quot;userLoginId&quot;).equals(&quot;_NA_&quot;)) ? &quot;WorkEffortAchieveViewMenuBar&quot; : &quot;WorkEffortAchieveViewMenuBarPublic&quot;) : &quot;WorkEffortAchieveViewMenuBarPublic&quot;}" />

				<!--<set field="actionMenuLocation" value="component://workeffortext/widget/menus/WorkeffortExtMenus.xml"/> -->
				<set field="actionMenuLocation" value="${bsh: import org.ofbiz.base.util.UtilValidate; UtilValidate.isNotEmpty(parameters.get(&quot;userLoginId&quot;)) ? (!(parameters.get(&quot;userLoginId&quot;).equals(&quot;_NA_&quot;)) ? &quot;component://workeffortext/widget/menus/WorkeffortExtMenus.xml&quot; : &quot;component://workeffortext/widget/menus/WorkeffortExtMenusPublic.xml&quot;) : &quot;component://workeffortext/widget/menus/WorkeffortExtMenusPublic.xml&quot;}" />

			</actions>
			<widgets>
				<include-screen name="ActionMenu" location="component://base/widget/MenuScreens.xml" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortAndContentDataResourceExtendedMenuBarScreen">
		<section>
			<actions>

				<!-- TODO prendo il nome dal file di properties perchè cambia in base a readOnlycontet e cruContent <set field="actionMenuName" value="${bsh: import org.ofbiz.base.util.UtilValidate; &quot;Y&quot;.equals(parameters.get(&quot;readOnlyContent&quot;)) ? &quot;AllDisabledMenuBar&quot; : &quot;ContentListMenu&quot;}"/> -->
				<set field="actionMenuName" value="${bsh: import org.ofbiz.base.util.UtilValidate; UtilValidate.isEmpty(parameters.get(&quot;userLoginId&quot;)) || !(parameters.get(&quot;userLoginId&quot;).equals(&quot;_NA_&quot;)) ? context.get(&quot;actionMenuName&quot;) : &quot;WorkEffortAndContentDataResourceExtendedMultiMenuPublic&quot;}" />
				<set field="actionMenuLocation" value="${bsh: import org.ofbiz.base.util.UtilValidate; UtilValidate.isEmpty(parameters.get(&quot;userLoginId&quot;)) || !(parameters.get(&quot;userLoginId&quot;).equals(&quot;_NA_&quot;)) ? &quot;component://workeffortext/widget/menus/WorkeffortExtMenus.xml&quot; : &quot;component://workeffortext/widget/menus/WorkeffortExtMenusPublic.xml&quot;}" />

				<!--<set field="actionMenuLocation" value="component://workeffortext/widget/menus/WorkeffortExtMenus.xml"/> -->
			</actions>
			<widgets>
				<include-screen name="ActionMenu" location="component://base/widget/MenuScreens.xml" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortPrintBirt">
		<section>
			<actions>
				<set field="printBirtScreenLocation" value="component://workeffortext/widget/screens/WorkeffortExtScreens.xml" />
				<set field="printBirtScreenName" value="WorkEffortInnerPrintBirt" />

				<set field="parameters.repContextContentId" value="WE_PRINT" />
			</actions>
			<widgets>
				<include-screen name="LoadPrintBirtFormWrapper" location="component://base/widget/CommonScreens.xml" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortAnalysisPrintBirt">
		<section>
			<actions>
				<set field="printBirtScreenLocation" value="component://workeffortext/widget/screens/WorkeffortExtScreens.xml" />
				<set field="printBirtScreenName" value="WorkEffortAnalysisInnerPrintBirt" />

				<set field="parameters.repContextContentId" value="WE_PRINT" />
			</actions>
			<widgets>
				<include-screen name="LoadPrintBirtFormWrapper" location="component://base/widget/CommonScreens.xml" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortInnerPrintBirt">
		<section>
			<actions>
				<set field="extraFieldContainerScreenLocation[]" value="component://workeffortext/widget/screens/WorkeffortExtScreens.xml" />
				<set field="extraFieldContainerScreenName[]" value="WorkEffortExtraParametersPrintBirt" />

				<set field="showSelectLabel" value="Y" />
			</actions>
			<widgets>
				<include-screen name="ExtraParametersLoadPrintBirt" location="component://base/widget/CommonScreens.xml" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortAnalysisInnerPrintBirt">
		<section>
			<actions>
				<set field="extraFieldContainerScreenLocation[]" value="component://workeffortext/widget/screens/WorkeffortExtScreens.xml" />
				<set field="extraFieldContainerScreenName[]" value="WorkEffortAnalysisExtraParametersPrintBirt" />

				<!-- aggiunto per far comparire nella stampa le sezioni -->
				<set field="loadPrintBirtScreenLocation" value="component://workeffortext/widget/screens/WorkeffortExtScreens.xml" />
				<set field="loadPrintBirtScreenName" value="LoadPrintBirtWorkEffortAnalysis" />
				<set field="excludeSez" value="Y" />

				<set field="showSelectLabel" value="Y" />
			</actions>
			<widgets>
				<include-screen name="ExtraParametersLoadPrintBirt" location="component://base/widget/CommonScreens.xml" />
			</widgets>
		</section>
	</screen>
	<!-- inserimento ricarca stampa -->
	<screen name="LoadPrintBirtWorkEffortAnalysis">
		<section>
			<actions>
				<set field="parameters.repContextContentId" value="WE_PRINT_ANALYSIS" />
				<property-map resource="BaseUiLabels" map-name="uiLabelMap" global="true" />
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getPrintBirtWorkEffortAnalysisList.groovy" />
				<script location="component://base/webapp/common/WEB-INF/actions/getPrintBirtList.groovy" />
			</actions>
			<widgets>
				<platform-specific>
					<html>
						<html-template location="component://workeffortext/webapp/workeffortext/ftl/loadPrintBirtWorkEffortAnalysis.ftl" />
						<html-template location="component://base/webapp/common/ftl/loadPrintBirt.ftl" />
					</html>
				</platform-specific>
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortAnalysisLoadPrintBirtList">
		<section>
			<actions>
			    <property-map resource="CustomUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="WorkeffortExtUiLabels" map-name="uiLabelMap" global="true" />
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getWorkEffortPrintBirtList.groovy" />
			</actions>
			<widgets>
				<include-screen name="LoadPrintBirtWorkEffortAnalysis" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortExtraParametersPrintBirt">
		<section>
			<widgets>
				<platform-specific>
					<html>
						<html-template location="component://workeffortext/webapp/workeffortext/ftl/workeffortPrintBirtExtraParameters.ftl" />
					</html>
				</platform-specific>
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortAnalysisExtraParametersPrintBirt">
		<section>
			<widgets>
				<platform-specific>
					<html>
						<html-template location="component://workeffortext/webapp/workeffortext/ftl/workeffortAnalysisPrintBirtExtraParameters.ftl" />
					</html>
				</platform-specific>
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortAchieveInqMeasViewContextManagementScreen">
		<section>
			<actions>
				<set field="contextManagementFormName" value="WorkEffortAchieveInqMeasViewContextManagementForm" />
				<set field="contextManagementFormLocation" value="component://workeffortext/widget/forms/WorkEffortAchieveForms.xml" />

				<!-- <set field="entityName" value="WorkEffortAchieveView"/> -->
				<!-- <set field="selectAreaTarget" value="workEffortAchieveViewManagementContainerOnly"/> -->
				<!-- <set field="selectAreaId" value="common-container"/> -->

				<set field="backAreaId" from-field="common-container" />
				<set field="managementFormLocation" value="component://workeffortext/widget/forms/WorkEffortAchieveForms.xml" />
				<!-- <set field="orderBy" value="sourceReferenceId|workEffortId"/> -->

				<set field="currentContextManagementFormName" value="WorkEffortAchieveInqMeasViewContextManagementForm" />
				<set field="currentContextManagementFormLocation" value="component://workeffortext/widget/forms/WorkEffortAchieveForms.xml" />
			</actions>
			<widgets>
				<include-screen name="ContextManagementListFormScreen" location="component://base/widget/ManagementScreens.xml" />
			</widgets>
		</section>
	</screen>

	<!-- ************************************************************** -->
	<!-- ****************** Screen WorkEffort Analysis************** -->
	<!-- ************************************************************** -->
	<screen name="WorkEffortAnalysisManagementSearchScreen">
		<section>
			<actions>
				<set field="extraParams" value="isManagement=Y" />
			</actions>
			<widgets>
				<include-screen name="SearchFormScreen" location="component://base/widget/SearchScreens.xml" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortAnalysisManagementManagementScreen">
		<section>
			<actions>
				<set field="extraParams" value="${extraParams}" default-value="isManagement=Y" />
			</actions>
			<widgets>
				<section>
					<condition>
						<or>
							<if-compare operator="equals" value="list" field="managementFormType" />
							<if-compare operator="equals" value="multi" field="managementFormType" />
						</or>
					</condition>
					<widgets>
						<include-screen name="ManagementListFormScreen" location="component://base/widget/ManagementScreens.xml" />
					</widgets>
					<fail-widgets>
						<include-screen name="ManagementFormScreen" location="component://base/widget/ManagementScreens.xml" />
					</fail-widgets>
				</section>
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortAnalysisManagementContextManagementFormScreen">
		<section>
			<actions>
				<set field="entityName" value="WorkEffortAnalysis" />
				<set field="selectAreaTarget" value="workEffortAnalysisManagementContainerOnly" />
				<set field="selectAreaId" value="common-container" />

				<set field="backAreaId" from-field="selectAreaId" />
				<set field="managementFormLocation" value="component://workeffortext/widget/forms/WorkEffortAnalysisForms.xml" />

				<set field="currentContextManagementFormName" value="BaseContextManagementForm" />
				<set field="currentContextManagementFormLocation" value="component://base/widget/BaseForms.xml" />

				<set field="insertExtraParams" value="${insertExtraParams}" default-value="isManagement=Y" />
				<set field="extraParams" value="${extraParams}" default-value="isManagement=Y" />
			</actions>
			<widgets>
				<include-screen name="ContextManagementFormScreen" location="component://base/widget/ManagementScreens.xml" />
			</widgets>
		</section>
	</screen>
	
	<!-- GN-517  -->
	<screen name="WorkEffortAnalysisReferenceManagementManagementScreen">
		<section>
			<actions>
				<set field="containerName" value="WorkEffortAnalysis" />
				<!-- <entity-one value-field="" entity-name="WorkEffortAnalysis" /> -->
				<set field="childManagement" value="Y" />
				<set field="managementPaginationAreaId" value="child-management-container-${containerName}" />
				<set field="managementPaginationTarget" value="childManagementContainerOnly" />
				<set field="noExecuteChildPerformFind" value="Y" />
			</actions>
			<widgets>
				<include-screen name="ManagementDetailCommonScreen" location="component://base/widget/CommonScreens.xml" />
			</widgets>
		</section>
	</screen>

	<!-- ********************************************************************** -->
	<!-- WorkEffortMeasure - 4130 -->
	<!-- ********************************************************************** -->


	<screen name="WorkEffortMeasureAndPurposeAccountIndManagementScreen">
		<section>
			<actions>
				<set field="isInsertMode" value="${bsh: &quot;Y&quot;.equals(parameters.get(&quot;insertMode&quot;)) }" type="Boolean" />
				<set field="fromWEPanel" value="false" type="Boolean" />

				<set field="glAccountConditionField" value="workEffortTypeIdInd" />

				<set field="purposeTypeEnumId" value="PT_INDICATOR" />
				<set field="contentIdInd" from-field="contentIdInd" default-value="${parameters.contentIdInd}"/>
                <set field="accountTypeEnumId" value="INDICATOR" />
			</actions>
			<widgets>
				<section>
					<condition>
						<or>
							<if-compare operator="equals" value="list" field="managementFormType" />
							<if-compare operator="equals" value="multi" field="managementFormType" />
						</or>
					</condition>
					<widgets>
						<include-screen name="ManagementListFormScreen" location="component://base/widget/ManagementScreens.xml" />
					</widgets>
					<fail-widgets>
						<include-screen name="ManagementFormScreen" location="component://base/widget/ManagementScreens.xml" />
					</fail-widgets>
				</section>
				<section>
					<condition>
						<if-compare operator="equals" value="Y" field="parameters.detail" />
					</condition>
					<actions>
						<set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/WorkEffortMeasure-management-extension.js.ftl" />
					</actions>
					<widgets>
						<include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml" />
					</widgets>
				</section>
				<section>
					<condition>
						<if-compare operator="not-equals" value="Y" field="parameters.detail" />
					</condition>
					<actions>
						<set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/workEffortMeasureValue-list-extension.js.ftl" />
					</actions>
					<widgets>
						<include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml" />
					</widgets>
				</section>
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortMeasureAndPurposeAccountResManagementScreen">
		<section>
			<actions>

				<set field="isInsertMode" value="${bsh: &quot;Y&quot;.equals(parameters.get(&quot;insertMode&quot;)) }" type="Boolean" />
				<set field="fromWEPanel" value="false" type="Boolean" />
				<set field="glAccountConditionField" value="workEffortTypeIdRes" />

				<set field="purposeTypeEnumId" value="PT_FINANCIAL" />
				<set field="accountTypeEnumId" value="RESOURCE" />
			</actions>
			<widgets>
				<section>
					<condition>
						<or>
							<if-compare operator="equals" value="list" field="managementFormType" />
							<if-compare operator="equals" value="multi" field="managementFormType" />
						</or>
					</condition>
					<widgets>
						<include-screen name="ManagementListFormScreen" location="component://base/widget/ManagementScreens.xml" />
					</widgets>
					<fail-widgets>
						<include-screen name="ManagementFormScreen" location="component://base/widget/ManagementScreens.xml" />
					</fail-widgets>
				</section>
				<section>
					<condition>
						<if-compare operator="equals" value="Y" field="parameters.detail" />
					</condition>
					<actions>
						<set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/WorkEffortMeasure-management-extension.js.ftl" />
					</actions>
					<widgets>
						<include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml" />
					</widgets>
				</section>
				<section>
					<condition>
						<if-compare operator="not-equals" value="Y" field="parameters.detail" />
					</condition>
					<actions>
						<set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/workEffortMeasureValue-list-extension.js.ftl" />
					</actions>
					<widgets>
						<include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml" />
					</widgets>
				</section>
			</widgets>
		</section>
	</screen>


	<screen name="PopupWorkEffortMassivePrintBirt">
        <section>
            <actions>
                <property-map resource="CustomUiLabels" map-name="uiLabelMap" global="true"/>
                <property-map resource="WorkeffortExtUiLabels" map-name="uiLabelMap" global="true"/>
                <property-map resource="BaseUiLabels" map-name="uiLabelMap" global="true"/>
                <property-to-field resource="BaseConfig.properties" property="EmplPerfRootView.enableSendMassivePrintMail" field="enableSendMassivePrintMail" default="N"/>
        	
                <set field="popupFieldContainerScreenLocation" value="${popupFieldContainerScreenLocation}" default-value="component://base/widget/CommonScreens.xml"/>
                <set field="popupFieldContainerScreenName" value="${popupFieldContainerScreenName}" default-value="ExtraParametersLoadPrintBirt"/>
                
                <set field="popup" value="Y"/>
            </actions>
            <widgets>
                <platform-specific>
                    <html>
                        <html-template location="component://workeffortext/webapp/workeffortext/ftl/popupWorkEffortMassivePrintBirt.ftl"/>
                    </html>
                </platform-specific>
            </widgets>
        </section>
    </screen>

    <!-- snapshot  -->
    <screen name="PopupCopyAllWorkEffort">
        <section>
            <actions>
                <property-map resource="CustomUiLabels" map-name="uiLabelMap" global="true"/>
                <property-map resource="WorkeffortExtUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="workEffortCopyAllScreenName" value="PopupCopyAllWorkEffort"/>
                <set field="workEffortCopyAllBirtScreenLocation" value="component://base/widget/CommonScreens.xml"/>
            </actions>
            <widgets>
                <include-screen name="WorkEffortCopyAllBirt"/>
            </widgets>
        </section>
    </screen>
    <screen name="WorkEffortCopyAllBirt">
        <section>
            <actions>
                <property-map resource="CustomUiLabels" map-name="uiLabelMap" global="true"/>
                <property-map resource="WorkeffortExtUiLabels" map-name="uiLabelMap" global="true"/>
                
                <set field="workEffortCopyAllScreenName" value="${workEffortCopyAllScreenName}" default-value=""/>
                <set field="workEffortCopyAllBirtScreenLocation" value="${workEffortCopyAllBirtScreenLocation}" default-value=""/>
            </actions>
            <widgets>
                <include-screen name="${workEffortCopyAllScreenName}" location="${workEffortCopyAllBirtScreenLocation}"/>
            </widgets>
        </section>
    </screen>   
    
    <screen name="ExportTransactionFromMeasureScreen">
        <section>
            <actions>
                <set field="actionMenuName" value="OnlyExecuteMenuBarNoRegisterMenu"/>
                <set field="parameters.actionMenuLocation" value="component://base/widget/BaseMenus.xml"/>
                <set field="searchTabMenuName" value="OnlyExecuteTabMenuBar"/>
                <set field="searchTabMenuLocation" value="component://base/widget/BaseMenus.xml"/>
                <set field="searchBaseScreenName" value="ExportTransactionFromMeasureSearchBaseScreen"/>
                <set field="searchBaseScreenLocation" value="component://workeffortext/widget/screens/WorkeffortExtScreens.xml"/>
            </actions>
            <widgets>
                <include-screen name="main-decorator-ui-labels" location="component://workeffortext/widget/screens/CommonScreens.xml"/>
                <include-screen name="SearchScreen" location="component://workeffortext/widget/screens/CommonScreens.xml"/>
            </widgets>
        </section>
    </screen>
    
    <screen name="ExportTransactionFromMeasureSearchBaseScreen">
        <section>
            <actions>
                <set field="simpleSearchTarget" value="${simpleSearchTarget}" default-value="simple_search"/>
                <set field="simpleSearchTargetTooltip" value="${uiLabelMap.ExportValuesTab}"/>
                <set field="simpleSearchTargetTitle" value="${uiLabelMap.ExportValuesTab}"/>
                <set field="searchAreaId" value="${searchAreaId}" default-value="common-container"/>
                <set field="searchTarget" value="${searchTarget}" default-value="searchResultContainerOnly"/>
                <set field="exportTransactionFromMeasureScreenLocation" value="component://workeffortext/widget/screens/WorkeffortExtScreens.xml"/>
                <set field="exportTransactionFromMeasureScreenName" value="ExportTransactionFromMeasureFormScreen"/>
            </actions>
            <widgets>
                <decorator-screen name="SearchListDecorator" location="component://base/widget/BaseScreens.xml">
                    <decorator-section name="parameter-form-section">
                        <decorator-screen name="SearchFormDecorator" location="component://base/widget/BaseScreens.xml">
                            <decorator-section name="search-form-section">
                                <container id="${simpleSearchTarget}">
                                    <section>
                                        <widgets>
                                            <container style="search-parameters">
                                                <section>
                                                    <widgets>
                                                        <platform-specific>
                                                            <html>
                                                               <html-template location="component://workeffortext/webapp/workeffortext/ftl/exportTransactionFromMeasure.ftl"/>
                                                            </html>
                                                        </platform-specific>
                                                    </widgets>
                                                </section>
                                            </container>
                                        </widgets>
                                    </section>
                                </container>
                            </decorator-section>
                        </decorator-screen>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    <screen name="ExportTransactionFromMeasureFormScreen">
        <section>
            <widgets>
                <include-form name="ExportTransactionFromMeasureForm" location="component://workeffortext/widget/forms/WorkEffortViewForms.xml"/>
            </widgets>
        </section>
    </screen>
    
    <screen name="ImportTransactionFromMeasureScreen">
        <section>
            <actions>
                <set field="actionMenuName" value="OnlyExecuteMenuBarNoRegisterMenu"/>
                <set field="parameters.actionMenuLocation" value="component://base/widget/BaseMenus.xml"/>
                <set field="searchTabMenuName" value="OnlyExecuteTabMenuBar"/>
                <set field="searchTabMenuLocation" value="component://base/widget/BaseMenus.xml"/>
                <set field="searchBaseScreenName" value="ImportTransactionFromMeasureSearchBaseScreen"/>
                <set field="searchBaseScreenLocation" value="component://workeffortext/widget/screens/WorkeffortExtScreens.xml"/>
            </actions>
            <widgets>
                <include-screen name="main-decorator-ui-labels" location="component://workeffortext/widget/screens/CommonScreens.xml"/>
                <include-screen name="SearchScreen" location="component://workeffortext/widget/screens/CommonScreens.xml"/>
            </widgets>
        </section>
    </screen>
    
    <screen name="ImportTransactionFromMeasureSearchBaseScreen">
        <section>
            <actions>
                <set field="simpleSearchTarget" value="${simpleSearchTarget}" default-value="simple_search"/>
                <set field="simpleSearchTargetTooltip" value="${uiLabelMap.ImportValuesTab}"/>
                <set field="simpleSearchTargetTitle" value="${uiLabelMap.ImportValuesTab}"/>
                <set field="searchAreaId" value="${searchAreaId}" default-value="common-container"/>
                <set field="searchTarget" value="${searchTarget}" default-value="searchResultContainerOnly"/>
                <set field="importTransactionFromMeasureScreenLocation" value="component://workeffortext/widget/screens/WorkeffortExtScreens.xml"/>
                <set field="importTransactionFromMeasureScreenName" value="ImportTransactionFromMeasureFormScreen"/>
            </actions>
            <widgets>
                <decorator-screen name="SearchListDecorator" location="component://base/widget/BaseScreens.xml">
                    <decorator-section name="parameter-form-section">
                        <decorator-screen name="SearchFormDecorator" location="component://base/widget/BaseScreens.xml">
                            <decorator-section name="search-form-section">
                                <container id="${simpleSearchTarget}">
                                    <section>
                                        <widgets>
                                            <container style="search-parameters">
                                                <section>
                                                    <widgets>
                                                        <platform-specific>
                                                            <html>
                                                               <html-template location="component://workeffortext/webapp/workeffortext/ftl/importTransactionFromMeasure.ftl"/>
                                                            </html>
                                                        </platform-specific>
                                                    </widgets>
                                                </section>
                                            </container>
                                        </widgets>
                                    </section>
                                </container>
                            </decorator-section>
                        </decorator-screen>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    <screen name="ImportTransactionFromMeasureFormScreen">
        <section>
            <widgets>
                <include-form name="ImportTransactionFromMeasureForm" location="component://workeffortext/widget/forms/WorkEffortViewForms.xml"/>
            </widgets>
        </section>
    </screen>
    
	<screen name="WorkEffortTransactionViewDetailScreen">
		<section>
			<actions>
				<set field="childManagementDetailTitle" value="${uiLabelMap.BaseDetail}" />
			</actions>
			<widgets>
				<include-screen name="InnerMenuContextManagementBaseScreen" location="component://base/widget/CommonScreens.xml" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortTransactionViewGeneralManagementScreen">
		<section>
			<actions>
				<set field="glAccountConditionField" from-field="parameters.glAccountConditionField" />
				<set field="extraParams" value="glAccountConditionField=${glAccountConditionField}" />
			</actions>
			<widgets>
				<include-screen name="WorkEffortTransactionViewWEMManagementScreen" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortTransactionViewGeneralContextManagementFormScreen">
		<section>
			<actions>
				<set field="glAccountConditionField" from-field="parameters.glAccountConditionField" />
				<set field="insertExtraParams" value="glAccountConditionField=${parameters.glAccountConditionField}" />
				<set field="arrayListExtraParams" value="glAccountConditionField=${parameters.glAccountConditionField}" />
				<set field="extraParams" value="glAccountConditionField=${parameters.glAccountConditionField}" />
			</actions>
			<widgets>
				<include-screen name="ContextManagementListFormScreen" location="component://base/widget/ManagementScreens.xml" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortTypePeriodManagementScreen">
		<section>
			<actions>
				<set field="childManagementFormListName" value="WorkEffortTypePeriodIconManagementMultiForm" />
				<set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/WorkEffortTypePeriod-Status-multi-management.js.ftl" />
			</actions>
			<widgets>
				<include-screen name="ManagementListFormScreen" location="component://base/widget/ManagementScreens.xml" />
				<include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml" />
			</widgets>
		</section>
	</screen>

     <screen name="WorkEffortRootSnapShotViewChildManagementFormListScreen">
        <section>
            <actions>
                <set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/WorkEffortRootSnapShotView-ctxMenu-extension.js.ftl"/>
            </actions>
            <widgets>
                <include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml"/>
                <include-screen name="WorkEffortViewGeneralManagementScreen"/>
            </widgets>
        </section>
    </screen>
    
	<screen name="WorkEffortViewSendMailManagementScreen">
		<section>
			<actions>
				<set field="communicationFormName" value="WorkEffortNewEmailExt" />
				<set field="communicationFormLocation" value="component://workeffortext/widget/forms/CommunicationForms.xml" />
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getWorkEffortResponsibleByRole.groovy" />
				<set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/WorkEffortViewSendMail-management.js.ftl" />
			</actions>
			<widgets>
				<include-screen name="ManagementListFormScreen" location="component://base/widget/ManagementScreens.xml" />
				<include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml" />
			</widgets>
		</section>
	</screen>
	<screen name="WorkEffortNoteAndDataContextManagementListFormScreen">
		<section>
			<actions>
                <set field="extraParams" value="${extraParams}&amp;workEffortAnalysisId=${parameters.workEffortAnalysisId}&amp;userLoginId=${parameters.userLoginId}&amp;workEffortTypeId=${parameters.workEffortTypeId}" />
				<set field="arrayListExtraParams" value="${arrayListExtraParams}&amp;userLoginId=${parameters.userLoginId}&amp;workEffortAnalysisId=${parameters.workEffortAnalysisId}&amp;workEffortTypeId=${parameters.workEffortTypeId}" />
			</actions>
			<widgets>
				<include-screen name="ContextManagementMultiFormScreen" location="component://base/widget/ManagementScreens.xml" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortNoteAndDataAchieveChildManagementScreen">
		<section>
			<actions>
				<entity-condition list="workEffortTypeContentList" entity-name="WorkEffortTypeContent">
					<condition-list>
						<condition-expr field-name="workEffortTypeId" from-field="parameters.workEffortTypeId" />
						<condition-expr field-name="weTypeContentTypeId" value="NOT_AN_LAYOUT" />
					</condition-list>
				</entity-condition>
				<set field="workEffortTypeContentId" from-field="workEffortTypeContentList[0].contentId" />

				<set field="isReadOnly" value="true" type="Boolean" />
				<set field="childManagementFormListName" value="WorkEffortNoteAndDataAchieveViewExtManagementMultiForm" />

				<set field="isPosted" value="Y" />
				<set field="isObiettivo" value="N" />
				<set field="listTable" value="Y" />
			</actions>
			<widgets>
				<platform-specific>
					<html>
						<html-template location="component://workeffortext/webapp/workeffortext/ftl/WorkEffortAchieveViewNote.ftl" />
					</html>
				</platform-specific>
			</widgets>
		</section>
	</screen>

	<!-- Serve per visualizzare i breadcrumbs quando primo folder visibile -->
	<screen name="OnlyHeaderBreadCrumbScreen">
		<section>
			<widgets>
				<section>
					<condition>
						<and>
							<not>
								<if-empty field="DET_AN_LAYOUT" />
							</not>
							<not>
								<if-empty field="IND_AN_LAYOUT" />
							</not>
						</and>
					</condition>
					<widgets>
						<platform-specific>
							<html>
								<html-template location="component://workeffortext/webapp/workeffortext/ftl/OnlyHeaderBreadCrumb.ftl" />
							</html>
						</platform-specific>
					</widgets>
				</section>
				<include-screen name="ManagementListFormScreen" location="component://base/widget/ManagementScreens.xml" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortTypeHierarchyPopup">
		<section>
			<widgets>
				<platform-specific>
					<html>
						<html-template location="component://workeffortext/webapp/workeffortext/ftl/WorkEffortTypeHierarchyPopup.ftl" />
					</html>
				</platform-specific>
			</widgets>
		</section>
	</screen>

	<!-- questo screen viene utilizzato nella stampa da scheda PDOGenerica, per inserire nella popup la data che è obbligatoria -->
	<screen name="ReportExtraParametersSchedaPianoPerformance">
		<section>
			<condition>
				<if-empty field="parameters.workEffortAnalysisId" />
			</condition>
			<widgets>
				<include-screen name="ReportExtraParametersGeneric" />
			</widgets>
		</section>
	</screen>

	<!-- questo screen viene utilizzato nella stampa da scheda PDOGenerica, per inserire nella popup la data che è obbligatoria -->
	<screen name="ReportExtraParametersGeneric">
		<section>
			<widgets>
				<platform-specific>
					<html>
						<html-template location="component://workeffortext/webapp/workeffortext/ftl/reportPrintBirtExtraParametersGeneric.ftl" />
					</html>
				</platform-specific>
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortTransactionViewSalManagementScreen">
		<section>
			<actions>			
				<!-- quando ricarico da tree -->
				<set field="parameters.contentIdInd" value="SAL"/>
				<set field="layoutType" value="WEFLD_SAL"/>
                <script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getAncestorWorkEffortType.groovy" />


				<set field="rootTree" value="${bsh: org.ofbiz.base.util.UtilValidate.isEmpty(parameters.get(&quot;workEffortId&quot;)) ? &quot;Y&quot; : &quot;&quot;}" />

				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getRootLayout.groovy" />
			</actions>
			<widgets>
				<section>
					<condition>
						<if-empty field="layoutContentId" />
					</condition>
					<actions>
						<!-- poiche NON si tratta solo di renderizzare i campi, il groovy e' invocato adesso se non e' previsto il folmato Avanzamenti Annuali -->
						<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getWorkEffortTransactionSalData.groovy" />
						<set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/WorkEffortTransactionSalGantt.js.ftl" />
					</actions>
					<widgets>
						<include-screen name="main-decorator-ui-labels" location="component://workeffortext/widget/screens/CommonScreens.xml" />
						<container id="WorkEffortIndicatorSalGanttTransactionPanel_${parameters.contentIdInd}">
							<platform-specific>
								<html>
									<html-template location="component://workeffortext/webapp/workeffortext/ftl/WorkEffortTransactionSalGantt.ftl" />
								</html>
							</platform-specific>
						</container>
						<container id="WorkEffortIndicatorModelPortletContainerSal_${parameters.contentIdInd}" style="transactionPortlet">
						</container>
						<section>
							<condition>
								<if-compare field="parameters.reloadPanel" operator="not-equals" value="Y" />
							</condition>
							<widgets>
								<include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml" />
							</widgets>
						</section>
					</widgets>
					<fail-widgets>
						<include-screen name="WorkEffortViewGeneralManagementScreen" />
					</fail-widgets>
				</section>
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortTypePeriodSearchFormScreen">
		<section>
			<actions>
				<set field="searchPanelArea" value="${searchPanelArea}" default-value="simple_search" />
				<set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/workefforttypeperiodsearch-extension.js.ftl" />
			</actions>
			<widgets>
				<include-screen name="SearchFormScreen" location="component://base/widget/SearchScreens.xml" />
				<include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml" />
			</widgets>
		</section>
	</screen>

	<!-- 5206, GN-24 -->
	<screen name="MassiveScoreCalcScreen">
		<section>
			<actions>
				<set field="executePaginationTarget" value="massiveScoreCardCalc"/>
				<set field="actionMenuName" value="OnlyExecuteMenuBar" />
				<set field="actionMenuLocation" value="component://base/widget/BaseMenus.xml"/>
				<set field="searchTabMenuName" value="OnlyExecuteTabMenuBar"/>
               	<set field="searchTabMenuLocation" value="component://base/widget/BaseMenus.xml"/>
				<set field="searchBaseScreenName" value="MassiveScoreCalcSearchBaseScreen" />
				<set field="searchBaseScreenLocation" value="component://workeffortext/widget/screens/WorkeffortExtScreens.xml" />
			</actions>
			<widgets>
				<include-screen name="main-decorator-ui-labels" location="component://workeffortext/widget/screens/CommonScreens.xml" />
				<include-screen name="SearchCommonScreen" location="component://base/widget/CommonScreens.xml"/>
			</widgets>
		</section>
	</screen>

	<screen name="MassiveScoreCalcSearchBaseScreen">
		<section>
			<actions>
				<set field="executePaginationTarget" value="massiveScoreCardCalc"/>
				<set field="searchFormScreenName" value="MassiveScoreCalcFormManagementScreen" />
				<set field="searchFormScreenLocation" value="component://workeffortext/widget/screens/WorkeffortExtScreens.xml" />
				<set field="simpleSearchTarget" value="${simpleSearchTarget}" default-value="simple_search"/>
                <set field="simpleSearchTargetTooltip" value="${uiLabelMap.CalcoloMassivoPunteggi}"/>
                <set field="simpleSearchTargetTitle" value="${uiLabelMap.CalcoloMassivoPunteggi}"/>
                <set field="searchAreaId" value="${searchAreaId}" default-value="common-container"/>
                <set field="searchTarget" value="${searchTarget}" default-value="searchResultContainerOnly"/>
			</actions>
			<widgets>
				<decorator-screen name="SearchListDecorator" location="component://base/widget/BaseScreens.xml">
                    <decorator-section name="parameter-form-section">
                        <decorator-screen name="SearchFormDecorator" location="component://base/widget/BaseScreens.xml">
                            <decorator-section name="search-form-section">
                            	<container id="${simpleSearchTarget}">
                                    <section>
                                        <actions>
                                            <script location="component://base/webapp/common/WEB-INF/actions/populateSearchParameters.groovy"/>
                                        </actions>
                                        <widgets>
                                            <container style="search-parameters">
                                            <include-screen name="${searchFormScreenName}" location="${searchFormScreenLocation}"/>
										    </container>
										</widgets>
									</section>
								</container>
							</decorator-section>
						</decorator-screen>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<screen name="MassiveScoreCalcFormManagementScreen">
		<section>
		    <actions>
		        <set field="scoreValueType" value="ACTUAL"/>
		    </actions>
			<widgets>
				<include-form name="MassiveScoreCalcManagementForm" location="component://workeffortext/widget/forms/WorkEffortViewForms.xml" />
			</widgets>
		</section>
	</screen>

	<screen name="BudgetProposal">
		<section>
			<actions>
				<set field="actionMenuName" value="SearchImportMenu" />
				<set field="searchBaseScreenName" value="BudgetProposalSearchBaseScreen" />
				<set field="searchBaseScreenLocation" value="component://workeffortext/widget/screens/WorkeffortExtScreens.xml" />
			</actions>
			<widgets>
				<include-screen name="main-decorator-ui-labels" location="component://workeffortext/widget/screens/CommonScreens.xml" />
				<include-screen name="SearchScreen" location="component://workeffortext/widget/screens/CommonScreens.xml" />
			</widgets>
		</section>
	</screen>

	<screen name="BudgetProposalSearchBaseScreen">
		<section>
			<actions>
				<set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/BudgetProposalSearchHandler.js.ftl" />
				<set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/CdcResponsibleHandler.js.ftl" />

				<entity-condition list="workEffortTypePeriodList" entity-name="WorkEffortTypePeriodView">
					<condition-list>
						<condition-expr field-name="weContextId" from-field="parameters.weContextId" ignore-if-empty="true" ignore-if-null="true" />
						<condition-expr field-name="glFiscalTypeEnumId" value="GLFISCTYPE_TARGETFIN" />
						<condition-list combine="or">
							<condition-expr field-name="statusEnumId" value="OPEN" />
							<condition-expr field-name="statusEnumId" value="REOPEN" />
							<condition-expr field-name="statusEnumId" value="CLOSE" />
                            <condition-expr field-name="statusEnumId" value="DETECTABLE" />
						</condition-list>
					</condition-list>
					<order-by field-name="description" />
				</entity-condition>

				<entity-condition list="cdcResponsibleList" entity-name="CdcResponsibleView">
					<condition-expr field-name="userLoginId" from-field="userLogin.userLoginId" />
					<order-by field-name="partyName" />
				</entity-condition>
			</actions>
			<widgets>
				<include-screen name="SearchListDecorator" location="component://base/widget/BaseScreens.xml" />
				<include-form name="BudgetProposalSearchForm" location="component://workeffortext/widget/forms/WorkEffortViewForms.xml" />
				<include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml" />
				<container id="WorkEffortMeasureBudgetProposalTransactionPanel_" style="transactionPanelThin" />
				<container id="WorkEffortMeasureIndicatorModelPortletContainer" style="transactionPortlet" />
			</widgets>
		</section>
	</screen>

	<screen name="BudgetProposalTable">
		<section>
			<widgets>
				<include-screen name="main-decorator-ui-labels" location="component://workeffortext/widget/screens/CommonScreens.xml" />
				<section>
					<actions>
						<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getBudgetProposalData.groovy" />
						<set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/BudgetProposalTable.js.ftl" />
						<set field="parameters.reloadRequestType" value="BudgetProposal" />
						<set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/BudgetProposalNextStatusHandler.js.ftl" />
					</actions>
					<widgets>
						<platform-specific>
							<html>
								<html-template location="component://workeffortext/webapp/workeffortext/ftl/BudgetProposalTable.ftl" />
							</html>
						</platform-specific>
						<include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml" />
					</widgets>
				</section>
			</widgets>
		</section>
	</screen>
	
	
	<screen name="WorkEffortTypeAttrManagementScreen">
        <section>
            <actions>
                <script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getWorkEffortTypeAttrFormColsTitle.groovy"/>
            </actions>
            <widgets>
                <include-screen name="ManagementListFormScreen" location="component://base/widget/ManagementScreens.xml"/>
            </widgets>
        </section>
    </screen>

	<screen name="WorkEffortTypeAttrParentScreen">
		<section>
			<actions>
				<entity-one value-field="we" entity-name="WorkEffortType" />
				<set field="description" from-field="we.description" default-value="${wet.workEffortTypeId}" />
			</actions>
			<widgets>
				<include-screen name="ParentManagementFormScreen" location="component://base/widget/ManagementScreens.xml" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortTypeAttrAndNoteDataManagementFormScreen">
		<section>
			<widgets>
				<section>
					<actions>
						<entity-one value-field="" entity-name="WorkEffortTypeAttrAndNoteData" />
						<entity-one value-field="wet" entity-name="WorkEffortTypeAttr" />
						<set field="noteId" from-field="wet.noteId" />

						<set field="managementPaginationTarget" value="managementContainerOnly" />
						<set field="managementPaginationAreaId" value="common-container" />
						<!-- <set field="childManagementDetailTitle" value="${uiLabelMap.BaseDetail}"/> Utilizzato per il dettaglio -->

						<!-- utilizzato epr il salvataggio -->
						<set field="managementScreenName" value="" />
						<set field="managementScreenLocation" value="" />
						<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getWorkEffortTypeAttrAndNoteDataManagementFormColsTitle.groovy"/>
					</actions>
					<widgets>
						<section>
							<condition>
								<if-compare operator="equals" value="Y" field="wet.isHtml" />
							</condition>
							<actions>
								<entity-condition list="defaultStyleList" entity-name="Content">
									<condition-expr field-name="contentTypeId" value="HTML_STYLE" />
								</entity-condition>

								<entity-one value-field="style1" entity-name="Content">
									<field-map field-name="contentId" from-field="wet.style1" />
								</entity-one>
								<entity-one value-field="style2" entity-name="Content">
									<field-map field-name="contentId" from-field="wet.style2" />
								</entity-one>
								<entity-one value-field="style3" entity-name="Content">
									<field-map field-name="contentId" from-field="wet.style3" />
								</entity-one>

								<set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/elrte_customformatlist_button.js.ftl" />
								<set field="layoutSettings.javaScriptBlocks[]" value="component://base/webapp/resources/ftl/register-rich-textarea.js.ftl" />
								<set field="textAreaId" value="WorkEffortNoteAndDataManagementForm_noteInfo" />
                                <set field="textAreaIdLang" value="WorkEffortNoteAndDataManagementForm_noteInfoLang" />
							</actions>
							<widgets>
								<include-screen name="loadRichTextAreaEditor" location="component://base/widget/CommonScreens.xml" />
								<include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml" />
								<include-screen name="ManagementFormScreen" location="component://base/widget/ManagementScreens.xml" />

							</widgets>
							<fail-widgets>
								<include-screen name="ManagementFormScreen" location="component://base/widget/ManagementScreens.xml" />
							</fail-widgets>
						</section>
					</widgets>
				</section>
			</widgets>
		</section>
	</screen>


	<!-- -->
	<screen name="ReportDefaultParametersSchedaIndividuale">
		<section>
			<actions>
				<entity-one value-field="we" entity-name="WorkEffort" />
				<set field="dateString" from-field="we.estimatedStartDate" type="String" />
				<set field="monitoringDate" value="${bsh: return org.ofbiz.base.util.UtilDateTime.getFormattedDate(dateString, org.ofbiz.base.util.UtilDateTime.getDateFormat(locale), timeZone,  locale) }" />
			</actions>
			<widgets>
				<platform-specific>
					<html>
						<html-template location="component://workeffortext/webapp/workeffortext/ftl/workeffortPrintBirtDefaultParameters.ftl" />
					</html>
				</platform-specific>
			</widgets>
		</section>
	</screen>

	<!-- 5509 -->
	<screen name="WorkEffortRootCopyScreen">
		<section>
			<actions>
				<set field="actionMenuName" value="OnlyExecuteMenuBarNoRegisterMenu"/>
				<set field="parameters.actionMenuLocation" value="component://base/widget/BaseMenus.xml"/>
                <set field="searchTabMenuName" value="OnlyExecuteTabMenuBar"/>
                <set field="searchTabMenuLocation" value="component://base/widget/BaseMenus.xml"/>
				<set field="searchBaseScreenName" value="WorkEffortRootCopySearchBaseScreen" />
				<set field="searchBaseScreenLocation" value="component://workeffortext/widget/screens/WorkeffortExtScreens.xml" />
			</actions>
			<widgets>
				<include-screen name="main-decorator-ui-labels" location="component://workeffortext/widget/screens/CommonScreens.xml" />
				<include-screen name="SearchScreen" location="component://workeffortext/widget/screens/CommonScreens.xml" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortRootCopySearchBaseScreen">
		<section>
			<actions>
				<set field="submitFormScreenName" value="WorkEffortRootCopyFormManagementScreen" />
				<set field="submitFormScreenLocation" value="component://workeffortext/widget/screens/WorkeffortExtScreens.xml" />
				<set field="simpleSearchTarget" value="${simpleSearchTarget}" default-value="simple_search"/>
                <set field="simpleSearchTargetTooltip" value="${uiLabelMap.WorkEffortRootCopyTab}"/>
                <set field="simpleSearchTargetTitle" value="${uiLabelMap.WorkEffortRootCopyTab}"/>
                <set field="searchAreaId" value="${searchAreaId}" default-value="common-container"/>
                <set field="searchTarget" value="${searchTarget}" default-value="searchResultContainerOnly"/>
			</actions>
			<widgets>
                <decorator-screen name="SearchListDecorator" location="component://base/widget/BaseScreens.xml">
                    <decorator-section name="parameter-form-section">
                        <decorator-screen name="SearchFormDecorator" location="component://base/widget/BaseScreens.xml">
                            <decorator-section name="search-form-section">
                                <container id="${simpleSearchTarget}">
                                    <section>
                                        <widgets>
                                            <container style="search-parameters">
                                                <section>
                                                    <widgets>
                                                        <platform-specific>
                                                            <html>
                                                               <html-template location="component://workeffortext/webapp/workeffortext/ftl/WorkEffortRootCopy.ftl" />
                                                            </html>
                                                        </platform-specific>
                                                    </widgets>
                                                </section>
                                            </container>
                                        </widgets>
                                    </section>
                                </container>
                            </decorator-section>
                        </decorator-screen>
                    </decorator-section>
                </decorator-screen>
            </widgets>
		</section>
	</screen>

	<screen name="WorkEffortRootCopyFormManagementScreen">
		<section>
			<widgets>
                <include-form name="WorkEffortRootCopyManagementForm" location="${parameters.managementFormLocation}" />
			</widgets>
		</section>
	</screen>
	
	<!-- REPORT PORTEL INIZIO -->
	<!-- Portlet per le stampe WorkEffortAndTypeView per modello -->
	<screen name="WorkEffortAndTypeViewListScreen">
		<section>
			<actions>

				<set field="parentEntityName" value="WorkEffortType" />
				<set field="entityName" value="WorkEffortAndTypeView" />
				<set field="managementFormType" value="list" />

				<set field="childManagement" value="Y" />
				<set field="mantainOldFormName" value="Y" />

				<set field="childManagementFormListName" value="WorkEffortAndTypeViewManagementListForm" />
				<set field="childManagementFormListLocation" value="component://workeffortext/widget/forms/WorkEffortViewForms.xml" />

				<set field="containerName" value="WorkEffortAndTypeView" />

				<set field="splitAttr" value="Y" />
				<set field="alsoInParameters" value="Y" />
				<set field="attrName" value="[portletAssoc, parentTypeId, isRoot, portalPageId]" />
				<script location="component://base/webapp/common/WEB-INF/actions/getPortletAttributes.groovy" />

				<set field="sortField" value="-estimatedStartDate" />

				<set field="childManagementFormListScreenName" value="WorkEffortAndTypeViewListScreenBody" />
				<set field="childManagementFormListScreenLocation" value="component://workeffortext/widget/screens/WorkeffortExtScreens.xml" />

				<set field="parameters.loadOnlyMainPortlet" value="Y" />
			</actions>
			<widgets>
				<include-screen name="PortletBaseScreen" location="${parameters.mainPortletBaseScreenLocation}" />
				<section>
					<actions>
						<set field="layoutSettings.javaScriptBlocks" value="" type="NewList" />
						<set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/WorkEffortAndTypeView-list-extension.js.ftl" />
					</actions>
					<widgets>
						<include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml" />
					</widgets>
				</section>
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortAndTypeViewListScreenBody">
		<section>
			<actions>
				<set field="parameters.periodTypeId" value="${groovy: import org.ofbiz.base.util.UtilValidate; UtilValidate.isNotEmpty(listIt) ? listIt[0].periodTypeId : &quot; &quot;}" />
				<set field="parameters.workEffortTypeId" value="${groovy: import org.ofbiz.base.util.UtilValidate; UtilValidate.isNotEmpty(listIt) ? listIt[0].workEffortTypeId : &quot; &quot;}" />
				<set field="parameters.workEffortId" value="${groovy: import org.ofbiz.base.util.UtilValidate; UtilValidate.isNotEmpty(listIt) ? listIt[0].workEffortId : &quot; &quot;}" />
				<set field="parameters.entityName" value="WorkEffortAndTypeView" />
			</actions>
			<widgets>
				<include-screen name="ManagementListFormScreen" location="component://base/widget/ManagementScreens.xml" />
			</widgets>
		</section>
	</screen>


	<!-- Portlet per le stampe WorkEffortCustomTimePeriodView per periodo -->
	<screen name="WorkEffortCustomTimePeriodViewListScreen">
		<section>
			<condition>
				<if-compare operator="not-equals" value="Y" field="parameters.loadOnlyMainPortlet" />
			</condition>
			<actions>
				<set field="parentEntityName" from-field="parameters.entityName" />
				<set field="entityName" value="CustomTimePeriodPrintView" />
				<set field="managementFormType" value="list" />

				<set field="childManagement" value="Y" />
				<set field="mantainOldFormName" value="Y" />

				<set field="childManagementFormListName" value="CustomTimePeriodPrintViewManagementListForm" />
				<set field="childManagementFormListLocation" value="component://workeffortext/widget/forms/WorkEffortViewForms.xml" />

				<set field="containerName" value="CustomTimePeriodPrintView" />

				<set field="splitAttr" value="Y" />
				<set field="alsoInParameters" value="Y" />
				<set field="attrName" value="[portletAssoc]" />
				<script location="component://base/webapp/common/WEB-INF/actions/getPortletAttributes.groovy" />
				<set field="sortField" value="thruDate" />

				<set field="childManagementFormListScreenName" value="WorkEffortCustomTimePeriodViewListScreenBody" />
				<set field="childManagementFormListScreenLocation" value="component://workeffortext/widget/screens/WorkeffortExtScreens.xml" />
			</actions>
			<widgets>
				<include-screen name="PortletBaseScreen" location="${parameters.mainPortletBaseScreenLocation}" />
				<section>
					<actions>
						<set field="layoutSettings.javaScriptBlocks" value="" type="NewList" />
						<set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/CustomTimePeriodPrintView-list-extension.js.ftl" />
					</actions>
					<widgets>
						<include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml" />
					</widgets>
				</section>
			</widgets>
			<fail-widgets>
				<include-screen name="PortletBaseScreen" location="${parameters.mainPortletBaseScreenLocation}" />
			</fail-widgets>
		</section>
	</screen>
	<screen name="WorkEffortCustomTimePeriodViewListScreenBody">
		<section>
			<actions>
				<set field="parameters.workEffortTypeId" value="${groovy: import org.ofbiz.base.util.UtilValidate; UtilValidate.isNotEmpty(listIt) ? listIt[0].workEffortTypeId : &quot; &quot;}" />
				<set field="parameters.workEffortId" value="${groovy: import org.ofbiz.base.util.UtilValidate; UtilValidate.isNotEmpty(listIt) ? listIt[0].workEffortId : &quot; &quot;}" />
				<set field="parameters.monitoringDate" value="${groovy: import org.ofbiz.base.util.UtilValidate; UtilValidate.isNotEmpty(listIt) ? listIt[0].thruDate : &quot; &quot;}" />
				<set field="parameters.entityName" value="CustomTimePeriodPrintView" />
			</actions>
			<widgets>
				<include-screen name="ManagementListFormScreen" location="component://base/widget/ManagementScreens.xml" />
			</widgets>
		</section>
	</screen>


	<!-- Portlet per le stampe WorkEffortTypeContentAndContentView per report -->
	<screen name="WorkEffortTypeContentAndContentViewListScreen">
		<section>
			<condition>
				<if-compare operator="not-equals" value="Y" field="parameters.loadOnlyMainPortlet" />
			</condition>
			<actions>
				<set field="parentEntityName" from-field="parameters.entityName" />
				<set field="entityName" value="WorkEffortTypeContentAndContentView" />
				<set field="managementFormType" value="list" />

				<set field="childManagement" value="Y" />
				<set field="mantainOldFormName" value="Y" />

				<set field="childManagementFormListName" value="WorkEffortTypeContentAndContentViewListForm" />
				<set field="childManagementFormListLocation" value="component://workeffortext/widget/forms/WorkEffortViewForms.xml" />

				<set field="containerName" value="WorkEffortTypeContentAndContentView" />

				<set field="splitAttr" value="Y" />
				<set field="alsoInParameters" value="Y" />
				<set field="attrName" value="[portletAssoc]" />
				<script location="component://base/webapp/common/WEB-INF/actions/getPortletAttributes.groovy" />
                <set field="sortField" value="sequenceNum"/>
				<set field="orderBy" value="sequenceNum" />

				<set field="childManagementFormListScreenName" value="WorkEffortTypeContentAndContentViewListScreenBody" />
				<set field="childManagementFormListScreenLocation" value="component://workeffortext/widget/screens/WorkeffortExtScreens.xml" />
			</actions>
			<widgets>
				<include-screen name="PortletBaseScreen" location="${parameters.mainPortletBaseScreenLocation}" />
				<section>
					<actions>
						<set field="layoutSettings.javaScriptBlocks" value="" type="NewList" />
						<set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/WorkEffortTypeContentAndContentView-list-extension.js.ftl" />
					</actions>
					<widgets>
						<include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml" />
					</widgets>
				</section>
			</widgets>
			<fail-widgets>
				<include-screen name="PortletBaseScreen" location="${parameters.mainPortletBaseScreenLocation}" />
			</fail-widgets>
		</section>
	</screen>
	<screen name="WorkEffortTypeContentAndContentViewListScreenBody">
		<section>
			<actions>
				<set field="parameters.workEffortTypeId" value="${groovy: import org.ofbiz.base.util.UtilValidate; UtilValidate.isNotEmpty(listIt) ? listIt[0].workEffortTypeId : &quot; &quot;}" />
				<set field="parameters.workEffortId" value="${groovy: import org.ofbiz.base.util.UtilValidate; UtilValidate.isNotEmpty(listIt) ? listIt[0].workEffortId : &quot; &quot;}" />
				<set field="parameters.pdfContentId" value="${groovy: import org.ofbiz.base.util.UtilValidate; UtilValidate.isNotEmpty(listIt) ? listIt[0].pdfContentId : &quot; &quot;}" />
				<set field="parameters.monitoringDate" from-field="parameters.monitoringDate" />
				<set field="parameters.entityName" value="WorkEffortTypeContentAndContentView" />
			</actions>
			<widgets>
				<platform-specific>
					<html>
						<html-template location="component://workeffortext/webapp/workeffortext/ftl/WorkEffortTypeContentAndContentView.ftl" />
					</html>
				</platform-specific>
			</widgets>
		</section>
	</screen>


	<!-- Portlet per le stampe WorkEffortNoteReportViewListScreen per periodo -->
	<screen name="WorkEffortNoteReportViewListScreen">
		<section>
			<condition>
				<if-compare operator="not-equals" value="Y" field="parameters.loadOnlyMainPortlet" />
			</condition>
			<actions>
				<set field="estimatedCompletionDate" from-field="parameters.monitoringDate" />
            	<!-- in caso di delete il monitoringDate Ã¨ contenuto in parameters.estimatedCompletionDate  -->
            	<set field="parameters.monitoringDate" from-field="parameters.monitoringDate" default-value="${parameters.estimatedCompletionDate}"/>

				<set field="parentEntityName" value="WorkEffortTypeContentAndContentView" />
				<set field="entityName" value="WorkEffortNoteAndDataReportView" />
				<set field="managementFormType" value="list" />

				<set field="childManagement" value="Y" />
				<set field="mantainOldFormName" value="Y" />
				<set field="noConditionFind" value="N" />
				<set field="portletMenuEnabled" value="N" />

				<set field="childManagementFormListName" value="WorkEffortNoteAndDataReportViewListForm" />
				<set field="childManagementFormListLocation" value="component://workeffortext/widget/forms/WorkEffortViewForms.xml" />

				<set field="containerName" value="WorkEffortNoteAndDataReportView" />
				<set field="orderBy" value="-noteDateTime" />

				<!-- Inserisco il js per gestire i bottoni di insert detail e delete -->
				<set field="layoutSettings.javaScriptBlocks" value="" type="NewList" />
				<set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/WorkEffortNoteAndDataReportView-link-listener.js.ftl" />

				<set field="attrName" value="extraAreaId" />
				<script location="component://base/webapp/common/WEB-INF/actions/getPortletAttributes.groovy" />
				<set field="extraParams" value="${extraParams}&amp;workEffortId=${parameters.workEffortId}&amp;monitoringDate=${parameters.monitoringDate}&amp;pdfContentId=${parameters.pdfContentId}" />
			</actions>
			<widgets>
				<include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml" />
				<include-screen name="PortletBaseScreen" location="component://base/widget/PortletScreens.xml" />
			</widgets>
			<fail-widgets>
				<include-screen name="PortletBaseScreen" location="${parameters.mainPortletBaseScreenLocation}" />
			</fail-widgets>
		</section>
	</screen>

	<!-- REPORT PORTEL FINE -->
	
	<screen name="AmountLockedScreen">
        <section>
            <actions>
                <set field="actionMenuName" value="OnlyExecuteMenuBarNoRegisterMenu"/>
                <set field="parameters.actionMenuLocation" value="component://base/widget/BaseMenus.xml"/>
                <set field="searchTabMenuName" value="OnlyExecuteTabMenuBar"/>
                <set field="searchTabMenuLocation" value="component://base/widget/BaseMenus.xml"/>
                <set field="searchBaseScreenName" value="LockAmountSearchBaseScreen"/>
                <set field="searchBaseScreenLocation" value="component://workeffortext/widget/screens/WorkeffortExtScreens.xml"/>
            </actions>
            <widgets>
                <include-screen name="main-decorator-ui-labels" location="component://workeffortext/widget/screens/CommonScreens.xml" />
                <include-screen name="SearchScreen" location="component://workeffortext/widget/screens/CommonScreens.xml"/>
            </widgets>
        </section>
    </screen>
    
    <screen name="LockAmountSearchBaseScreen">
        <section>
            <actions>
                <set field="lockAmountScreenLocation" value="component://workeffortext/widget/screens/WorkeffortExtScreens.xml"/>
                <set field="lockAmountScreenName" value="LockAmountScreen"/>
                <set field="simpleSearchTarget" value="${simpleSearchTarget}" default-value="simple_search"/>
                <set field="simpleSearchTargetTooltip" value="${uiLabelMap.LockAmount_tab}"/>
                <set field="simpleSearchTargetTitle" value="${uiLabelMap.LockAmount_tab}"/>
                <set field="searchAreaId" value="${searchAreaId}" default-value="common-container"/>
                <set field="searchTarget" value="${searchTarget}" default-value="searchResultContainerOnly"/>
            </actions>
            <widgets>
                <decorator-screen name="SearchListDecorator" location="component://base/widget/BaseScreens.xml">
                    <decorator-section name="parameter-form-section">
                        <decorator-screen name="SearchFormDecorator" location="component://base/widget/BaseScreens.xml">
                            <decorator-section name="search-form-section">
                                <container id="${simpleSearchTarget}">
                                    <section>
                                        <widgets>
                                            <container style="search-parameters">
                                                <section>
                                                    <widgets>
                                                        <platform-specific>
										                    <html>
										                        <html-template location="component://workeffortext/webapp/workeffortext/ftl/lockAmount.ftl"/>
										                    </html>
										                </platform-specific>
                                                    </widgets>
                                                </section>
                                            </container>
                                        </widgets>
                                    </section>
                                </container>
                            </decorator-section>
                        </decorator-screen>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    <screen name="LockAmountScreen">
        <section>
            <actions>
                <set field="workEffortTypeContextList" value="${bsh: return org.ofbiz.base.util.UtilMisc.toList(&quot;CTX_EP&quot;, &quot;CTX_OR&quot;, &quot;CTX_BS&quot;, &quot;CTX_CO&quot;,  &quot;CTX_PR&quot;,  &quot;CTX_CG&quot;,  &quot;CTX_TR&quot;,  &quot;CTX_RE&quot;, &quot;CTX_GD&quot;, &quot;CTX_PA&quot;, &quot;CTX_DI&quot;)}"/>
                <entity-condition list="workEffortTypeContextList" entity-name="WorkEffortType">
                    <condition-list combine="or">
                        <condition-expr field-name="workEffortTypeId" value="CTX_EP"/>
                        <condition-expr field-name="workEffortTypeId" value="CTX_OR"/>
                        <condition-expr field-name="workEffortTypeId" value="CTX_BS"/>
                        <condition-expr field-name="workEffortTypeId" value="CTX_CO"/>
                        <condition-expr field-name="workEffortTypeId" value="CTX_PR"/>
                        <condition-expr field-name="workEffortTypeId" value="CTX_CG"/>
                        <condition-expr field-name="workEffortTypeId" value="CTX_TR"/>
                        <condition-expr field-name="workEffortTypeId" value="CTX_RE"/>
                        <condition-expr field-name="workEffortTypeId" value="CTX_GD"/>
                        <condition-expr field-name="workEffortTypeId" value="CTX_PA"/>
                        <condition-expr field-name="workEffortTypeId" value="CTX_DI"/>
                    </condition-list>
                </entity-condition>
            </actions>
            <widgets>
                <include-form name="LockAmountForm" location="component://workeffortext/widget/forms/WorkEffortViewForms.xml"/>
            </widgets>
        </section>
    </screen>
    
    <screen name="ExternalWorkEffortViewContainerOnlyScreen">
        <section>
            <actions>
                <set field="parameters.loadTreeView" value="N"/>
                <set field="containerOnly" value="Y" />
                <set field="parameters.survey" from-field="parameters.survey" default-value=""/>
            </actions>
            <widgets>
                <include-screen name="ExternalWorkEffortViewPageScreen" />
            </widgets>
        </section>
    </screen>
    
    <screen name="ExternalSurveyContainerOnlyScreen">
        <section>
            <actions>
                <set field="parameters.specialized" value="Y" />
                <set field="parameters.loadTreeView" value="N"/>
                <set field="containerOnly" value="Y" />
                <set field="parameters.survey" value="Y"/>
                <set field="managementUrl" value="openSurveyContainerOnly"/>
                <set field="parameters.constFields" value="${parameters.constFields}" default-value="rootTree;${parameters.rootTree}|rootInqyTree;${parameters.rootInqyTree}|specialized;${parameters.specialized}|workEffortIdRoot;${parameters.workEffortIdRoot}|weHierarchyTypeId;${weHierarchyTypeId}|weIsTemplate;${weIsTemplate}|weContextId;${weContextId}|estimatedStartDate;${estimatedStartDate}|estimatedCompletionDate;${estimatedCompletionDate}|loadTreeView;N|nextStatusId;${nextStatusId}|workEffortTypeIdRoot;${workEffortTypeId}|snapShot;${parameters.snapShot}|searchDate;${parameters.searchDate}|snapshot;${parameters.snapshot}${bsh: import org.ofbiz.base.util.UtilValidate; return UtilValidate.isNotEmpty(context.get(&quot;constField&quot;)) ? &quot;|&quot; + context.get(&quot;constField&quot;) : &quot;&quot;}"/>
            </actions>
            <widgets>
                <include-screen name="ExternalWorkEffortViewPageScreen" />
            </widgets>
        </section>
    </screen>
    
    <screen name="ExternalSurveyPageScreen">
        <section>
            <actions>
                <set field="parameters.survey" value="Y"/>
                <set field="managementUrl" value="openSurveyContainerOnly"/>
            </actions>
            <widgets>
                <include-screen name="ExternalWorkEffortViewPageScreen" />
            </widgets>
        </section>
    </screen>
    
    <screen name="ExternalWorkEffortViewPageScreen">
        <section>
            <actions>
            	<set field="parameters.rootTree" value="N"/>
                <set field="managementUrl" from-field="managementUrl" default-value="openWorkEffortViewContainerOnly"/>
                <set field="parameters.entityName" value="WorkEffortView"/>
                <set field="parameters.saveView" value="N"/>
                <set field="parameters.weIsTemplate" value="N"/>
                <set field="parameters.loadTreeView" value="${parameters.loadTreeView}" default-value="Y"/>
                <set field="parameters.javaScriptEnabled" value="Y"/>
                <set field="parameters.disableDragAndDrop" value="Y" />
                
                <set field="backAreaId" value="content-main-section" />
                <set field="forcedBackAreaId" from-field="backAreaId" />

                <set field="targetCode" value="${bsh: request.getAttribute(&quot;targetCode&quot;) }" default-value="${parameters.targetCode}"/>
                <!-- se null, viene recuperato il workEffort dal parameters.workEffortId -->
                <log message="*** targetCode = ${targetCode}"/>
                <entity-condition list="workEffortListCodeBasisList" entity-name="WorkEffort">
                    <condition-expr field-name="sourceReferenceId" from-field="targetCode"/>
                </entity-condition>

                <set field="workEffort" value="${bsh: return org.ofbiz.entity.util.EntityUtil.getFirst(context.get(&quot;workEffortListCodeBasisList&quot;))}"/>
                
                <set field="parameters.workEffortId" value="${parameters.workEffortId}" default-value="${workEffort.workEffortId}" />
                
                <entity-and list="assocRootList" entity-name="WorkEffortAssoc">
                    <field-map field-name="workEffortIdTo" from-field="parameters.workEffortId"/>
                    <field-map field-name="workEffortAssocTypeId" value="ROOT"/>
                    
                    <order-by field-name="-fromDate"/>
                </entity-and>
                <set field="assocRoot" value="${bsh: return org.ofbiz.entity.util.EntityUtil.getFirst(context.get(&quot;assocRootList&quot;))}"/>
                <set field="parameters.workEffortIdRoot" from-field="assocRoot.workEffortIdFrom"/>

                <entity-one value-field="" entity-name="WorkEffortView">
                    <field-map field-name="workEffortId" from-field="parameters.workEffortId"/>
                </entity-one>
                <set field="workEffortTypeIdTo" from-field="workEffortTypeId"/>
                
                <entity-one value-field="currentWorkEffortRoot" entity-name="WorkEffort">
                    <field-map field-name="workEffortId" from-field="assocRoot.workEffortIdFrom"/>
                </entity-one>
                <set field="workEffortTypeIdRoot" from-field="currentWorkEffortRoot.workEffortTypeId"/>
                <get-related-one relation-name="WorkEffortType" to-value-field="workEffortTypeRoot" value-field="currentWorkEffortRoot"/>
                <entity-and list="assocList" entity-name="WorkEffortAssoc">
                    <field-map field-name="workEffortIdTo" from-field="parameters.workEffortId"/>
                    <field-map field-name="fromDate" from-field="assocRoot.fromDate"/>
                    <field-map field-name="workEffortAssocTypeId" from-field="workEffortTypeRoot.hierarchyAssocTypeId"/>
                </entity-and>
                <set field="assocParent" value="${bsh: return org.ofbiz.entity.util.EntityUtil.getFirst(context.get(&quot;assocList&quot;))}"/>
                <entity-one value-field="workEffortFrom" entity-name="WorkEffort">
                    <field-map field-name="workEffortId" from-field="assocParent.workEffortIdFrom"/>
                </entity-one>
                <set field="workEffortTypeIdFrom" from-field="workEffortFrom.workEffortTypeId"/>
                
                <set field="loadAlsoIfNotRoot" value="${groovy: return (org.ofbiz.base.util.UtilValidate.isNotEmpty(parameters.get(&quot;workEffortId&quot;)) &amp;&amp;  !currentWorkEffortRoot.get(&quot;workEffortId&quot;).equals(parameters.get(&quot;workEffortId&quot;))) ? &quot;Y&quot; : &quot;N&quot;}"/>

                <get-related-one relation-name="WorkEffortType" value-field="workEffort" to-value-field="workEffortType" />
                <set field="weIsRoot" from-field="workEffortType.isRoot" />

                <set field="parameters.selectedId" value="${groovy: return &quot;Y&quot;.equals(context.get(&quot;weIsRoot&quot;)) ? &quot;WorkEffortAssocExtView_root_&quot; + parameters.get(&quot;workEffortId&quot;) : &quot;WorkEffortAssocExtView_child_&quot; + parameters.get(&quot;workEffortId&quot;)}"/>

                <script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getWorkeffortExtSelectedMenuItem.groovy" />

                <set field="commonScreensLocation" from-field="commonScreensLocation" default-value="component://workeffortext/widget/screens/CommonScreens.xml" />
            </actions>
            <widgets>
                <include-screen name="Management${groovy: return !&quot;Y&quot;.equals(context.get(&quot;containerOnly&quot;)) ? &quot;&quot; : &quot;ContainerOnly&quot;}Screen" location="${commonScreensLocation}"/>
                <section>
                    <condition>
                        <and>
                            <if-compare value="Y" field="containerOnly" operator="not-equals" />
                            <if-empty field="parameters.survey"/>
                        </and>
                    </condition>
                    <actions>
                       <set field="layoutSettings.javaScriptBlocks[]" value="component://base/webapp/common/ftl/hideTreeView.js.ftl" />
                    </actions>
                    <widgets>
                        <include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml" />
                    </widgets>
                    <fail-widgets>
                        <include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml" />
                    </fail-widgets>
                </section>
            </widgets>
        </section>
    </screen>
    
    <!-- STD -->
     <screen name="WorkEffortExtStandardImportScreen">
        <section>
            <actions>
                <set field="executePaginationTarget" value="executeStandardImport"/>
                
                <set field="actionMenuName" value="OnlyExecuteMenuBar"/>
                <set field="searchTabMenuName" value="OnlyExecuteTabMenuBar"/>
            	<set field="searchTabMenuLocation" value="component://base/widget/BaseMenus.xml"/>
                <set field="searchBaseScreenName" value="WorkEffortExtStandardImportBaseScreen"/>
                <set field="searchBaseScreenLocation" value="component://workeffortext/widget/screens/WorkeffortExtScreens.xml"/>
            </actions>
            <widgets>
                <include-screen name="main-decorator-ui-labels" location="component://workeffortext/widget/screens/CommonScreens.xml"/>
                <include-screen name="SearchScreen" location="component://workeffortext/widget/screens/CommonScreens.xml"/>
            </widgets>
        </section>
	</screen>
	
	<screen name="WorkEffortExtStandardImportBaseScreen">
        <section>
            <actions>
                <set field="executePaginationTarget" value="executeStandardImport"/>
            	
                <set field="searchFormScreenName" value="WorkEffortExtStandardImportFormManagementScreen"/>
                <set field="searchFormScreenLocation" value="component://workeffortext/widget/screens/WorkeffortExtScreens.xml"/>
                <set field="simpleSearchTarget" value="${simpleSearchTarget}" default-value="simple_search"/>
                <set field="simpleSearchTargetTooltip" value="${uiLabelMap.StandardImport}"/>
                <set field="simpleSearchTargetTitle" value="${uiLabelMap.StandardImport}"/>
                <set field="searchAreaId" value="${searchAreaId}" default-value="common-container"/>
                <set field="searchTarget" value="${searchTarget}" default-value="searchResultContainerOnly"/>
            </actions>
            <widgets>
                <decorator-screen name="SearchListDecorator" location="component://base/widget/BaseScreens.xml">
                    <decorator-section name="parameter-form-section">
                        <decorator-screen name="SearchFormDecorator" location="component://base/widget/BaseScreens.xml">
                            <decorator-section name="search-form-section">
                            	<container id="${simpleSearchTarget}">
                                    <section>
                                        <actions>
                                            <script location="component://base/webapp/common/WEB-INF/actions/populateSearchParameters.groovy"/>
                                        </actions>
                                        <widgets>
                                            <container style="search-parameters">
										        <include-screen name="${searchFormScreenName}" location="${searchFormScreenLocation}"/>
										    </container>
										</widgets>
									</section>
								</container>
							</decorator-section>
						</decorator-screen>
					</decorator-section>
				</decorator-screen>
            </widgets>
        </section>
    </screen>
    
    <!-- tutti includono component://base/widget/BaseScreens.xml#StandardImportUploadFileListenerScreen, tranne il workEffort che ne ha uno specifico -->
    <screen name="WorkEffortExtStandardImportFormManagementScreen">
        <section>
            <actions>
                <script location="component://base/webapp/common/WEB-INF/actions/checkTableInterface.groovy"/>
            </actions>
            <widgets>
                <include-form name="WorkEffortExtStandardImportForm" location="component://workeffortext/widget/forms/WorkEffortExtStandardImportForms.xml"/>
                <platform-specific>
                	<html>
                    	<html-template location="component://base/webapp/common/ftl/ContentUploadIframe.ftl"/>
                    </html>
                </platform-specific>
                <include-screen name="WorkEffortStandardImportUploadFileListenerScreen"/>
            </widgets>
        </section>
    </screen>
    
    <screen name="WorkEffortStandardImportUploadFileListenerScreen">
        <section>
            <actions>
                <set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/WorkEffortStandardImportUploadFileListener.js.ftl"/>
            </actions>
            <widgets>
                <include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml"/>
            </widgets>
        </section>
    </screen>
    
    <screen name="WorkEffortReviewViewSearchFormScreen">
    	<section>
			<actions>
				<set field="searchFormName" value="WorkEffortReviewViewSearchForm"/>
			</actions>
			<widgets>
				<include-screen name="SearchFormScreen" location="component://base/widget/SearchScreens.xml"/>
			</widgets>
		</section>
    </screen>
    
    <!-- Ricerca per aggiunta del bottono di cambio stato massivo -->
    <screen name="WorkEffortRootViewFormResultSearchScreen">
        <section>     
        	<actions>
        		<set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/WorkEffortViewSearchResultList-management-extension.js.ftl" />
        	</actions>     
        	<widgets>
                <platform-specific>
    				<html>
    					<html-template location="component://workeffortext/webapp/workeffortext/ftl/WorkEffortRootViewSearch_extension.ftl" />
    				</html>
    			</platform-specific>
                <include-screen name="SearchResultScreen" location="component://base/widget/SearchScreens.xml"/>
                <include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml" />
            </widgets>
        </section>    
    </screen> 
       
    <!-- screen risultati ricerca interrogazioni schede -->
    <screen name="WorkEffortRootViewInqyFormResultSearchScreen">
        <section>     
        	<actions>
        		<set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/WorkEffortViewSearchResultList-management-extension.js.ftl" />
        	</actions>     
        	<widgets>
                <include-screen name="SearchResultScreen" location="component://base/widget/SearchScreens.xml"/>
                <include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml" />
            </widgets>
        </section>    
    </screen>    
    
    <!-- GN-517 -->
    <screen name="WorkEffortAnalysisReferenceManagementScreen">
		<section>
			<actions>
				<set field="containerName" value="WorkEffortAnalysis" />
				<log message=" --  specialTerms ${specialTerms}"/>
				<entity-one value-field="" entity-name="WorkEffortAnalysis" />
				<log message=" --  specialTerms ${specialTerms}"/>
				
				<set field="extraParams" value="${extraParams}" default-value="isManagement=Y&amp;containerName=${containerName}"   />
				
				<set field="weAssocTypeId" from-field="workEffortAssocTypeId" />

				<entity-condition entity-name="PartyRoleIntOrgViewAndUserLoginValidPartyRole" list="organizationList">
					<condition-expr field-name="userLoginId" from-field="userLogin.userLoginId" />
				</entity-condition>
				
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/checkWorkEffortActivationStatus.groovy" />
			</actions>
			<widgets>
				<include-screen name="WorkEffortViewGeneralManagementLayoutScreen" />
			</widgets>
		</section>
	</screen>
    
    
    <screen name="WorkEffortStatusContextManagementScreen">
		<section>
			<actions>
            	<set field="insertExtraParams" value="${insertExtraParams}&amp;weIsTemplate=${parameters.weIsTemplate}&amp;isObiettivo=${parameters.isObiettivo}" />
			</actions>			
			<widgets>
				<include-screen name="ContextManagementMultiFormScreen" location="component://base/widget/ManagementScreens.xml" />
			</widgets>
		</section>
	</screen>
	
	<screen name="WorkEffortRoleAssignmentRoleContextManagementScreen">
		<section>
			<actions>
            	<set field="insertExtraParams" value="${insertExtraParams}&amp;weIsTemplate=${parameters.weIsTemplate}&amp;isObiettivo=${parameters.isObiettivo}" />
			</actions>			
			<widgets>
				<include-screen name="ContextManagementMultiFormScreen" location="component://base/widget/ManagementScreens.xml" />
			</widgets>
		</section>
	</screen>
	
	
	<!-- Includo lo screen del totale solo quando non ho nessun layout altrimenti viene incluso nel laoyt esistente -->
	<screen name="WorkEffortExtViewkpiScoreWeightTotWithoutLayoutManagementScreen">
		<section>
			<actions>
				<entity-one value-field="wrk" entity-name="WorkEffort" />
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getRootLayout.groovy" />
				<log message="### contentId per Layout = ${context.layoutContentId}" />
			</actions>
			<widgets>
				<section>
					<condition>
						<if-empty field="layoutContentId" />
					</condition>
					<widgets>
						<include-screen name="WorkEffortExtViewkpiScoreWeightTotManagementScreen" location="component://workeffortext/widget/screens/LayoutWorkEffortRootScreens.xml"/>
					</widgets>					
				</section>
			</widgets>
		</section>
	</screen>
			
	<!--  Screen calcolo indicatori  -->
	<screen name="WorkEffortTransactionIndicatorViewManagementScreen">
		<section>
			<actions>
				<set field="parameters.contentId" value="${parameters.contentId}" default-value="WEFLD_ELIN"/>
				<entity-one value-field="wrk" entity-name="WorkEffort" />
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getRootLayout.groovy" />
				<log message="### contentId per Layout = ${context.layoutContentId}" />
			</actions>
			<widgets>
				<section>
					<condition>
						<if-empty field="context.layoutContentId" />
					</condition>
					<widgets>
						<include-screen name="WorkEffortTransactionIndicatorViewBaseManagementScreen" />
					</widgets>
					<fail-widgets>
						<content content-id="${layoutContentId}" />
					</fail-widgets>
				</section>
			</widgets>
		</section>
	</screen>
	
	<screen name="WorkEffortTransactionIndicatorViewBaseManagementScreen">
		<section>
			<actions>
				<set field="parameters.contentId" value="${parameters.contentId}" default-value="WEFLD_ELIN"/>
				<set field="submitFormScreenName" value="WorkEffortTransactionIndicatorViewIndicatorSubmitFormScreen" /><!-- Usati nell'ftl IndicatorCalc.ftl per renderizzare la form di submit -->
				<set field="submitFormScreenLocation" value="component://workeffortext/widget/screens/WorkeffortExtScreens.xml" /><!-- Usati nell'ftl IndicatorCalc.ftl per renderizzare la form di submit -->
				<set field="resultFormScreenName" value="JobLogUserViewScreen" /><!-- Usati nell'ftl IndicatorCalc.ftl per renderizzare la form di submit -->
				<set field="resultFormScreenLocation" value="component://workeffortext/widget/screens/WorkeffortExtScreens.xml" /><!-- Usati nell'ftl IndicatorCalc.ftl per renderizzare la form di submit -->
				
				<!-- verifico per messi in base allo stato  -->
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/checkStatusCrudEnum.groovy"/>
			</actions>
			<widgets>
				<platform-specific>
					<html>
						<html-template location="component://workeffortext/webapp/workeffortext/ftl/IndicatorCalc.ftl" />
					</html>
				</platform-specific>
			</widgets>
		</section>
	</screen>
	
	<!-- Screen per la form di submit (screen richiamato dentro: IndicatorCalc.ftl) -->
	<screen name="WorkEffortTransactionIndicatorViewIndicatorSubmitFormScreen">
		<section>
			<actions>			
				<property-map resource="AccountingExtUiLabels" map-name="uiLabelMap" global="true"/>
			
				<set field="isReadOnly" value="true" type="Boolean" />
				<set field="entityName" value="WorkEffortTransactionIndicatorView" />
				<set field="parentEntityName" value="WorkEffortView" />
				<set field="managementFormName" value="WorkEffortTransactionIndicatorViewManagementForm" />
				<set field="managementFormLocation" value="component://workeffortext/widget/forms/WorkEffortViewForms.xml" />

				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/populateSearchDateAndParams.groovy"/>
				<set field="thruDate" from-field="parameters.searchDate" />
				<set field="glFiscalTypeIdInput" from-field="glFiscalTypeIdInput" default-value="ACTUAL"/>
			</actions>
			<widgets>
				<include-screen name="ManagementFormScreen" location="component://base/widget/ManagementScreens.xml" />
			</widgets>
		</section>
	</screen>
	
	<!-- screen per il reload nel search -->
    <screen name="WorkEffortRootViewSearchFormScreen">
		<section>
			<actions>
        		<set field="orgUnitDisplayField" value="${bsh: &quot;Y&quot;.equals(context.get(&quot;localeSecondarySet&quot;)) ? &quot;partyNameLang&quot; : &quot;partyName&quot;}"/>
        		<set field="workEffortTypeDisplayField" value="${bsh: &quot;Y&quot;.equals(context.get(&quot;localeSecondarySet&quot;)) ? &quot;descriptionLang&quot; : &quot;description&quot;}"/>
        		<set field="currentStatusDisplayField" value="${bsh: &quot;Y&quot;.equals(context.get(&quot;localeSecondarySet&quot;)) ? &quot;descriptionLang&quot; : &quot;description&quot;}"/>
			
				<!-- devo caricate il JS per la gestione del droplist dei soggetti con ruolo e senza ruolo -->
				<set field="searchPanelArea" value="${searchPanelArea}" default-value="simple_search"/>
				<set field="searchTarget" value="searchResultContainerOnly"/>
                <set field="searchAreaId" value="common-container"/>                
				<set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/workEffortRootViewSearch-extension.js.ftl"/>
			</actions>
			<widgets>
				<include-screen name="SearchFormScreen" location="component://base/widget/SearchScreens.xml"/>
				<include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml"/>
			</widgets>
		</section>
	</screen>
	
	
	<screen name="WorkEffortNoteAndDataFolderDetailScreen">
		<section>
			<actions>
				<set field="childManagementDetailTitle" value="${uiLabelMap.BaseDetail}" />			
			</actions>
			<widgets>
				<include-screen name="WorkEffortViewFolderDetailScreen" />
			</widgets>
		</section>
	</screen>
	
	<screen name="WorkEffortMeasureFolderDetailScreen">
		<section>
			<actions>
                <log message=" --- WorkEffortMeasureFolderDetailScreen "/>
				<set field="childManagementDetailTitle" value="${uiLabelMap.BaseDetail}" />
                <set field="insertAreaTarget" value="${insertAreaTarget}" default-value="${bsh: return &quot;Y&quot;.equals(subFolder) ? &quot;childManagementContainerOnly&quot; : &quot;managementContainerOnly&quot;}"/>
                <set field="insertAreaId" value="${parameters.backAreaId}" default-value="${bsh: return &quot;Y&quot;.equals(subFolder) ? &quot;child-management-container-&quot; + containerName : &quot;common-container&quot;}"/>
                <set field="selectAreaTarget" value="${selectAreaTarget}" default-value="${bsh: return &quot;Y&quot;.equals(subFolder) ? &quot;childManagementContainerOnly&quot; : &quot;managementContainerOnly&quot;}"/>
                <set field="selectAreaId" value="${parameters.backAreaId}" default-value="${bsh: return &quot;Y&quot;.equals(subFolder) ? &quot;child-management-container-&quot; + containerName : &quot;common-container&quot;}"/>
                <set field="copyAreaTarget" value="${copyAreaTarget}" default-value="${bsh: return &quot;Y&quot;.equals(subFolder) ? &quot;childManagementContainerOnly&quot; : &quot;managementContainerOnly&quot;}"/>
                <set field="copyAreaId" value="${parameters.backAreaId}" default-value="${bsh: return &quot;Y&quot;.equals(subFolder) ? &quot;child-management-container-&quot; + containerName : &quot;common-container&quot;}"/>
                <set field="managementPaginationAreaTarget" value="${managementPaginationAreaTarget}" default-value="${bsh: return &quot;Y&quot;.equals(subFolder) ? &quot;childManagementContainerOnly&quot; : &quot;managementContainerOnly&quot;}"/>
                <set field="managementPaginationAreaId" value="${parameters.backAreaId}" default-value="${bsh: return &quot;Y&quot;.equals(subFolder) ? &quot;child-management-container-&quot; + containerName : &quot;common-container&quot;}"/>
                <script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/workEffortTypeCntParamsEvaluator.groovy"/>
            </actions>
			<widgets>
				<include-screen name="WorkEffortViewFolderDetailScreen" />
			</widgets>
		</section>
	</screen>

	<!-- Nuova gestione report -->
	<screen name="WorkEffortNewPrintBirt">
		<section>
			<actions>
				<set field="printBirtScreenLocation" value="component://workeffortext/widget/screens/WorkeffortExtScreens.xml" />
				<set field="printBirtScreenName" value="WorkEffortInnerNewPrintBirt" />

				<set field="parameters.repContextContentId" value="WE_PRINT" /> <!-- tipo di lista di report da caricare -->
			</actions>
			<widgets>
				<include-screen name="LoadPrintBirtFormWrapper" location="component://base/widget/CommonScreens.xml" />
			</widgets>
		</section>
	</screen>
	<screen name="WorkEffortInnerNewPrintBirt">
		<section>
			<actions>
				<set field="extraFieldBaseContainerScreenLocation[]" value="component://workeffortext/widget/screens/WorkeffortExtScreens.xml" />
				<set field="extraFieldBaseContainerScreenName[]" value="WorkEffortExtraParametersNewPrintBirt" />

				<set field="showSelectLabel" value="Y" /> <!-- controllare a che serve (nel popup non deve comparire quella label) -->
				
				<set field=""/> <!-- serve per selezione il nuovo file per il caricamento dinamico della mappa lancio -->
			</actions>
			<widgets>
				<include-screen name="ExtraParametersLoadNewPrintBirt" location="component://base/widget/CommonScreens.xml" />
			</widgets>
		</section>
	</screen>
	
	<!-- file ftl da visualizzare diverso per ogni report! -->
	<screen name="WorkEffortExtraParametersNewPrintBirt">
		<section>
			<actions>
                <script location="component://base/webapp/common/WEB-INF/actions/getPrintBirtWorkEffortTypeList.groovy"/>
            </actions>			
			<widgets>
				<platform-specific>
					<html>
						<html-template location="component://workeffortext/webapp/workeffortext/birt/ftl/workeffortPrintBirtBaseParameters.ftl" />
					</html>
				</platform-specific>
			</widgets>
		</section>
	</screen>
	<!--  -->
	<screen name="WorkEffortLoadReportParamPrintBirtList">
		<section>
			<actions>
				<property-map resource="CustomUiLabels" map-name="uiLabelMap" global="true" />
				<property-map resource="WorkeffortExtUiLabels" map-name="uiLabelMap" global="true" />				
			</actions>
			<widgets>
			    <include-screen name="LoadReportParamPrintBirt" location="component://base/widget/CommonScreens.xml" />
			</widgets>
		</section>
	</screen>
	<screen name="WorkEffortLoadReportWorkEffortPrintBirtList">
		<section>
			<actions>
				<property-map resource="CustomUiLabels" map-name="uiLabelMap" global="true" />
				<property-map resource="WorkeffortExtUiLabels" map-name="uiLabelMap" global="true" />				
			</actions>
			<widgets>
			    <include-screen name="LoadReportWorkEffortPrintBirt" location="component://base/widget/CommonScreens.xml" />
			</widgets>
		</section>
	</screen>
	<!--  -->
	<screen name="WorkEffortLoadNewPrintBirtList">
		<section>
			<actions>
			    <property-map resource="CustomUiLabels" map-name="uiLabelMap" global="true"/>
			    <property-map resource="CustomUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="WorkeffortExtUiLabels" map-name="uiLabelMap" global="true" />
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getWorkEffortPrintBirtList.groovy" />
			</actions>
			<widgets>
				<include-screen name="LoadNewPrintBirt" location="component://base/widget/CommonScreens.xml" />
			</widgets>
		</section>
	</screen>
	<screen name="PopupWorkEffortLoadNewPrintBirt">
		<section>
			<actions>
				<set field="workEffortLoadPrintBirtScreenName" value="PopupLoadNewPrintBirt" />
				<set field="workEffortLoadPrintBirtScreenLocation" value="component://base/widget/CommonScreens.xml" />
			</actions>
			<widgets>
				<include-screen name="WorkEffortLoadPrintBirt" />
			</widgets>
		</section>
	</screen>
	
	<screen name="QueryConfigCondFolderScreen">
        <section>
            <actions>
            	<set field="entityName" value="QueryConfig"/>
                <set field="containerName" value="QueryConfigCond"/>
                <set field="childManagement" value="Y"/>

                <set field="managementPaginationAreaId" value="child-management-container-${containerName}"/>
                <set field="managementPaginationTarget" value="childManagementContainerOnly"/>
                <set field="noExecuteChildPerformFind" value="Y"/>
            </actions>
            <widgets>
                <include-screen name="ManagementDetailCommonScreen" location="component://base/widget/CommonScreens.xml"/>
            </widgets>
        </section>
    </screen>
    
    <screen name="QueryConfigCondFolderManagementScreen">
        <section>
            <actions>
				<set field="entityName" value="QueryConfig"/>
				<set field="containerName" value="QueryConfigCond"/>
				<entity-one value-field="" entity-name="QueryConfig"/>
				
				<set field="extraParams" value="containerName=${containerName}"/>
				
            </actions>
            <widgets>
                <include-screen name="ManagementFormScreen" location="component://base/widget/ManagementScreens.xml"/>
            </widgets>
        </section>
    </screen>
    
	<screen name="WorkEffortContentViewDetailContextManagementScreen">
		<section>
			<actions>
				<entity-one value-field="workEffort" entity-name="WorkEffort">
					<field-map field-name="workEffortId" from-field="parameters.workEffortId" />
				</entity-one>
                <set field="extraParams" value="${extraParams}&amp;weIsTemplate=${parameters.weIsTemplate}&amp;snapshot=${parameters.snapshot}&amp;searchDate=${parameters.searchDate}&amp;workEffortIdRoot=${parameters.workEffortIdRoot}&amp;rootTree=${parameters.rootTree}&amp;workEffortTypeId=${workEffort.workEffortTypeId}&amp;rootInqyTree=${parameters.rootInqyTree}&amp;isObiettivo=${parameters.isObiettivo}" />
				<set field="arrayListExtraParams" value="${arrayListExtraParams}&amp;weIsTemplate=${parameters.weIsTemplate}&amp;snapshot=${parameters.snapshot}&amp;searchDate=${parameters.searchDate}&amp;workEffortIdRoot=${parameters.workEffortIdRoot}&amp;saveView=N&amp;rootTree=${parameters.rootTree}&amp;workEffortTypeId=${workEffort.workEffortTypeId}&amp;isObiettivo=${parameters.isObiettivo}" />
				<set field="insertExtraParams" value="${insertExtraParams}&amp;weIsTemplate=${parameters.weIsTemplate}&amp;snapshot=${parameters.snapshot}&amp;searchDate=${parameters.searchDate}&amp;workEffortIdRoot=${parameters.workEffortIdRoot}&amp;rootTree=${parameters.rootTree}&amp;workEffortTypeId=${workEffort.workEffortTypeId}&amp;isObiettivo=${parameters.isObiettivo}" />
				<set field="managementChildExtraParams" value="workEffortId=${parameters.workEffortId}" />				
			</actions>
			<widgets>
				<include-screen name="ContextManagementMultiFormScreen" location="component://base/widget/ManagementScreens.xml" />
			</widgets>
		</section>
	</screen>
	
    <screen name="WorkEffortContentViewManagementWrapperScreen">
        <section>
            <actions>
               <entity-one value-field="workEffort" entity-name="WorkEffort">
                    <field-map field-name="workEffortId" from-field="parameters.workEffortId" />
                </entity-one>
                <set field="extraParams" value="${extraParams}&amp;workEffortTypeId=${workEffort.workEffortTypeId}" />
            </actions>
            <widgets>
                <include-screen name="WorkEffortViewGeneralManagementScreen" location="component://workeffortext/widget/screens/WorkeffortExtScreens.xml"/>
            </widgets>
        </section>
    </screen>
    
    <screen name="WorkEffortContentViewDetailScreen">
		<section>
			<actions>
				<entity-one value-field="we" entity-name="WorkEffort" />
				<set field="extraParams" value="${extraParams}&amp;weIsTemplate=${parameters.weIsTemplate}&amp;snapshot=${parameters.snapshot}&amp;searchDate=${parameters.searchDate}&amp;workEffortTypeId=${we.workEffortTypeId}&amp;typeEmployment=${typeEmployment}&amp;defaultFromDate=${defaultFromDate}&amp;defaultThruDate=${defaultThruDate}&amp;workEffortId=${we.workEffortId}" />
				<set field="childManagementDetailTitle" value="${uiLabelMap.BaseDetail}" />
				<script location="component://workeffortext/webapp/workeffortext/WEB-INF/actions/getWorkEffortContentViewColsTitle.groovy"/>
			</actions>
			<widgets>
				<container id="uploadContainer">
					<platform-specific>
                		<html>
                			<html-template location="component://base/webapp/common/ftl/ContentUploadIframe.ftl"/>
                    	</html>
                	</platform-specific>
					<include-screen name="WorkEffortViewFolderDetailScreen" location="component://workeffortext/widget/screens/WorkeffortExtScreens.xml"/>
					<include-screen name="ContentListenerScreen" location="component://base/widget/ContentScreens.xml"/>
				</container>
			</widgets>
		</section>
	</screen>    
      
    <screen name="WorkEffortContentScreen">
        <section>
            <actions>
                 <entity-one value-field="workEffort" entity-name="WorkEffort">
                    <field-map field-name="workEffortId" from-field="parameters.workEffortId" />
                </entity-one>
                <set field="extraParams" value="${extraParams}&amp;workEffortTypeId=${workEffort.workEffortTypeId}&amp;workEffortId=${parameters.workEffortId}" />
            </actions>
            <widgets>
                <include-screen name="WorkEffortViewGeneralManagementScreen" location="component://workeffortext/widget/screens/WorkeffortExtScreens.xml"/>
                <platform-specific>
                    <html>
                        <html-template location="component://workeffortext/webapp/workeffortext/birt/ftl/workEffortContentDownloadAll.ftl" />
                    </html>
                </platform-specific>
            </widgets>
        </section>
    </screen>
    
	<screen name="QueryConfigViewManagementScreen">
		<section>
		    <actions>
		        <set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/QueryConfigViewManagement-extension.js.ftl" />
		    </actions>
			<widgets>				
				 <platform-specific>
                    <html>
                        <html-template location="component://workeffortext/webapp/workeffortext/ftl/QueryConfigViewManagement.ftl" />
                    </html>				
				</platform-specific>
				<include-screen name="ManagementFormScreen" location="component://base/widget/ManagementScreens.xml" />
			    <include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml" />				
			</widgets>
		</section>
	</screen>
	
    <screen name="QueryConfigResultSearchScreen">
        <section>  
            <actions>
	            <set field="extraParams" value="typeQuery=${parameters.typeQuery}"/>
	            <set field="insertExtraParams" value="typeQuery=${parameters.typeQuery}"/>
	        </actions>      
        	<widgets>
                <include-screen name="SearchResultScreen" location="component://base/widget/SearchScreens.xml"/>
            </widgets>
        </section>    
    </screen> 	
	
	<screen name="QueryConfigScreen">
	   <section>
	       <actions>
               <set field="extraParams" value="typeQuery=${parameters.typeQuery}"/>
	           <set field="insertExtraParams" value="typeQuery=${parameters.typeQuery}"/>
	       </actions>
	       <widgets>
	           <include-screen name="ManagementFormScreen" location="component://base/widget/ManagementScreens.xml" />
	       </widgets>
	   </section>
	</screen>
	
	<screen name="QueryConfigDetailScreen">
		<section>
			<actions>
			    <set field="managementFormScreenName" value="QueryConfigManagementScreen" />
				<set field="managementFormScreenLocation" value="component://workeffortext/widget/screens/WorkeffortExtScreens.xml" />
				<set field="contextManagementFormName" value="QueryConfigContextManagementForm" />
				<set field="contextManagementFormLocation" value="component://workeffortext/widget/forms/WorkEffortViewForms.xml" />
				<set field="extraParams" value="typeQuery=${parameters.typeQuery}" />
				<set field="insertExtraParams" value="typeQuery=${parameters.typeQuery}"/>
			</actions>
			<widgets>
				<include-screen name="InnerMenuContextManagementBaseScreen" location="component://base/widget/CommonScreens.xml" />
			</widgets>
		</section>
	</screen>	
		
    <screen name="QueryConfigManagementScreen">
	   <section>
	       <actions>	         	           
	           <set field="extraParams" value="typeQuery=${parameters.typeQuery}"/>
	           <set field="insertExtraParams" value="typeQuery=${parameters.typeQuery}"/>
	       </actions>
	       <widgets>
                <include-screen name="ManagementFormScreen" location="component://base/widget/ManagementScreens.xml"/>
            </widgets>
	   </section>
	</screen>
	
	<screen name="QueryConfigSearchFormScreen">
	   <section>
	       <actions>           
	           <set field="extraParams" value="typeQuery=${parameters.typeQuery}"/>
	           <set field="insertExtraParams" value="typeQuery=${parameters.typeQuery}"/>
	       </actions>
	       <widgets>      
	           <include-screen name="SearchFormScreen" location="component://base/widget/SearchScreens.xml"/>
	       </widgets>
	   </section>
	</screen>
	
	<screen name="QueryConfigContextManagementFormScreen">
	   <section>
	       <actions>	           	           
	           <set field="extraParams" value="typeQuery=${parameters.typeQuery}"/>
	           <set field="insertExtraParams" value="typeQuery=${parameters.typeQuery}"/>
	       </actions>
	       <widgets>
	           <include-screen name="ContextManagementFormScreen" location="component://base/widget/ManagementScreens.xml"/>
	       </widgets>
	   </section>	
	</screen>
	
	<screen name="QueryConfigContextDetailManagementFormScreen">
		<section>
			<actions>
				<set field="extraParams" value="${extraParams}" default-value="typeQuery=${parameters.typeQuery}" />
				<set field="insertExtraParams" value="${insertExtraParams}" default-value="typeQuery=${parameters.typeQuery}" />
				<set field="arrayListExtraParams" value="${arrayListExtraParams}" default-value="typeQuery=${parameters.typeQuery}" />				
				<set field="contextManagementFormScreenName" value="QueryConfigContextManagementFormScreen"/>
				<set field="contextManagementFormScreenLocation" value="component://workeffortext/widget/screens/WorkeffortExtScreens.xml" />
			</actions>
			<widgets>
				<include-screen name="${contextManagementFormScreenName}" location="${contextManagementFormScreenLocation}" />
			</widgets>
		</section>
	</screen>
	
	<screen name="WorkEffortMassiveRootCopyScreen">
		<section>
			<actions>
				<set field="actionMenuName" value="OnlyExecuteMenuBarNoRegisterMenu"/>
				<set field="parameters.actionMenuLocation" value="component://base/widget/BaseMenus.xml"/>
                <set field="searchTabMenuName" value="OnlyExecuteTabMenuBar"/>
                <set field="searchTabMenuLocation" value="component://base/widget/BaseMenus.xml"/>
				<set field="searchBaseScreenName" value="WorkEffortMassiveRootCopySearchBaseScreen" />
				<set field="searchBaseScreenLocation" value="component://workeffortext/widget/screens/WorkeffortExtScreens.xml" />
				<set field="layoutSettings.javaScriptBlocks[]" value="component://workeffortext/webapp/workeffortext/ftl/WorkEffortMassiveRootCopy-extension.js.ftl" />
			</actions>
			<widgets>
				<include-screen name="main-decorator-ui-labels" location="component://workeffortext/widget/screens/CommonScreens.xml" />
				<include-screen name="SearchScreen" location="component://workeffortext/widget/screens/CommonScreens.xml" />
				<include-screen name="loadjavascript" location="component://base/widget/CommonScreens.xml" />
			</widgets>
		</section>
	</screen>

	<screen name="WorkEffortMassiveRootCopySearchBaseScreen">
		<section>
			<actions>
				<set field="submitFormScreenName" value="WorkEffortMasiveRootCopyFormManagementScreen" />
				<set field="submitFormScreenLocation" value="component://workeffortext/widget/screens/WorkeffortExtScreens.xml" />
				<set field="simpleSearchTarget" value="${simpleSearchTarget}" default-value="simple_search"/>
                <set field="simpleSearchTargetTooltip" value="${uiLabelMap.WorkEffortRootCopyTab}"/>
                <set field="simpleSearchTargetTitle" value="${uiLabelMap.WorkEffortRootCopyTab}"/>
                <set field="searchAreaId" value="${searchAreaId}" default-value="common-container"/>
                <set field="searchTarget" value="${searchTarget}" default-value="searchResultContainerOnly"/>
			</actions>
			<widgets>
                <decorator-screen name="SearchListDecorator" location="component://base/widget/BaseScreens.xml">
                    <decorator-section name="parameter-form-section">
                        <decorator-screen name="SearchFormDecorator" location="component://base/widget/BaseScreens.xml">
                            <decorator-section name="search-form-section">
                                <container id="${simpleSearchTarget}">
                                    <section>
                                        <widgets>
                                            <container style="search-parameters">
                                                <section>
                                                    <widgets>
                                                        <platform-specific>
                                                            <html>
                                                               <html-template location="component://workeffortext/webapp/workeffortext/ftl/WorkEffortMassiveRootCopy.ftl" />
                                                            </html>
                                                        </platform-specific>
                                                    </widgets>
                                                </section>
                                            </container>
                                        </widgets>
                                    </section>
                                </container>
                            </decorator-section>
                        </decorator-screen>
                    </decorator-section>
                </decorator-screen>
            </widgets>
		</section>
	</screen>
	
	<screen name="WorkEffortMasiveRootCopyFormManagementScreen">
		<section>
		    <actions>
		        <set field="workEffortNameDisplayField" value="${bsh: &quot;Y&quot;.equals(context.get(&quot;localeSecondarySet&quot;)) ? &quot;workEffortNameLang&quot; : &quot;workEffortName&quot;}"/>
		    </actions>
			<widgets>
                <include-form name="WorkEffortMassiveRootCopyManagementForm" location="component://workeffortext/widget/forms/WorkEffortViewForms.xml" />
			</widgets>
		</section>
	</screen>
	
	<!-- Screen per reload dopo presa visione scheda -->
	<screen name="UpdateWorkEffortViewCardSuccessScreen">
		<section>
			<widgets>
				<platform-specific>
					<html>
						<html-template location="component://workeffortext/webapp/workeffortext/includes/updateWorkEffortViewCardSuccess.ftl"/>
					</html>
				</platform-specific>
			</widgets>
		</section>
	</screen>
	
	<!-- Screen che combina il form principale con il form Presa Visione -->
	<screen name="WorkEffortViewWithCardManagementScreen">
		<section>
			<actions>
				<property-map resource="WorkeffortExtUiLabels" map-name="uiLabelMap" global="true"/>
			</actions>
			<widgets>
				<!-- Form principale WorkEffort -->
				<include-form name="WorkEffortViewManagementForm" location="component://workeffortext/widget/forms/WorkEffortViewForms.xml"/>
				<!-- Form Presa Visione con controllo permessi -->
				<include-form name="WorkEffortViewCardForm" location="component://workeffortext/widget/forms/WorkEffortViewForms.xml"/>
			</widgets>
		</section>
	</screen>		    
</screens>